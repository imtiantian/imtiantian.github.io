<div id="pf67" class="pf w0 h0" data-page-no="67"><div class="pc pc67 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg67.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y1ab ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws156">print<span class="ff8 fc0 ws13a">(c<span class="fc6 ls34">.</span>limit_denominator(<span class="fc7 ls34">8</span>))</span></span></div><div class="t m0 x5 hf y1ac ff8 fs5 fc8 sc0 ls0">4/7</div><div class="t m0 x5 h11 y1ae ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Converting a float to a fraction</span></div><div class="t m0 x5 hf y1af ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">x<span class="fc6 ls33">=<span class="fc7 ls0">3.75</span></span></span></div><div class="t m0 x5 hf y1b0 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">y<span class="fc6 ls33">=</span><span class="ls0 ws13a">Fraction(<span class="fc6 ls34">*<span class="fc0">x</span>.</span>as_integer_ratio())</span></span></div><div class="t m0 x5 hf y355 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">y</span></div><div class="t m0 x5 hf y410 ff8 fs5 fc8 sc0 ls0 ws4">Fraction(15, 4)</div><div class="t m0 x5 hf y411 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x5 he yb84 ff2 fs2 fc4 sc0 ls0 ws135">5.8.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 yb85 ff1 fs3 fc0 sc0 ls56 ws1fa">在大多数程序中一般不会出现分数的计算问题<span class="_ _c"></span>，但是有时候还是需要用到的<span class="_ _1"></span>。比<span class="_ _1"></span></div><div class="t m0 x5 h9 yb86 ff1 fs3 fc0 sc0 ls13 wse5">如<span class="_ _1"></span>，在一个允许接受分数形式的测试单位并以分数形式执行运算的程序中，直接使用<span class="_ _c"></span></div><div class="t m0 x5 h9 yb87 ff1 fs3 fc0 sc0 ls0">分数可以减少手动转换为小数或浮点数的工作。</div><div class="t m0 x5 hd yb88 ff2 fs4 fc4 sc0 ls0 ws134">5.9<span class="_ _e"> </span>3.9 <span class="ff1">大型数组运算</span></div><div class="t m0 x5 he yb89 ff2 fs2 fc4 sc0 ls0 ws135">5.9.1 <span class="ff1">问题</span></div><div class="t m0 x0 h7 yb8a ff1 fs3 fc0 sc0 ls0 wsc">你需要在大数据集 <span class="ff4 ls1b">(</span><span class="wsa0">比如数组或网格<span class="ff4 ls6a">)</span>上面执行计算。</span></div><div class="t m0 x5 he yb8b ff2 fs2 fc4 sc0 ls0 ws135">5.9.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 yb8c ff1 fs3 fc0 sc0 ls0 ws4d1">涉及<span class="_ _6"></span>到<span class="_ _6"></span>数<span class="_ _6"></span>组的<span class="_ _6"></span>重<span class="_ _6"></span>量<span class="_ _6"></span>级运<span class="_ _6"></span>算<span class="_ _6"></span>操作，<span class="_ _6"></span>可<span class="_ _6"></span>以<span class="_ _6"></span>使用 <span class="ff6 ws27d">NumPy </span><span class="ws4d2">库。 <span class="ff6 ws27d">NumPy </span><span class="ls10 wsdf">的一个主要特征是它</span></span></div><div class="t m0 x5 h7 yb8d ff1 fs3 fc0 sc0 ls0 ws4d3">会<span class="_ _6"></span>给 <span class="ff4 ws4d4">Python </span><span class="ws4d5">提<span class="_ _6"></span>供<span class="_ _0"></span>一<span class="_ _6"></span>个<span class="_ _6"></span>数<span class="_ _6"></span>组<span class="_ _0"></span>对<span class="_ _6"></span>象，<span class="_ _6"></span>相<span class="_ _0"></span>比<span class="_ _6"></span>标<span class="_ _6"></span>准<span class="_ _6"></span>的 <span class="ff4 ws4d4">Python </span><span class="wsa0">列<span class="_ _0"></span>表<span class="_ _6"></span>而<span class="_ _6"></span>已<span class="_ _6"></span>更<span class="_ _0"></span>适<span class="_ _6"></span>合<span class="_ _6"></span>用<span class="_ _6"></span>来<span class="_ _0"></span>做<span class="_ _6"></span>数<span class="_ _6"></span>学<span class="_ _6"></span>运</span></span></div><div class="t m0 x5 h9 yb8e ff1 fs3 fc0 sc0 ls0 ws63">算。下面是一个简单的小例子，向你展示标准列表对象和 <span class="ff6 ws17d">NumPy </span>数组对象之间的差别：</div><div class="t m0 x5 h11 yb8f ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws13b"># Python lists</span></div><div class="t m0 x5 hf yb90 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">x<span class="fc6 ls33">=</span><span class="ls34">[<span class="fc7 ls0 ws13a">1</span><span class="ls33">,<span class="fc7 ls0 ws13a">2</span>,</span><span class="fc7">3</span></span>,<span class="fc7 ls34">4</span><span class="ls0">]</span></span></div><div class="t m0 x5 hf yb91 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">y<span class="fc6 ls33">=</span><span class="ls34">[<span class="fc7 ls0 ws13a">5</span><span class="ls33">,<span class="fc7 ls0 ws13a">6</span>,</span><span class="fc7">7</span></span>,<span class="fc7 ls34">8</span><span class="ls0">]</span></span></div><div class="t m0 x5 hf yb92 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">x<span class="fc6 ls33">*<span class="fc7 ls0">2</span></span></span></div><div class="t m0 x5 hf yb93 ff8 fs5 fc8 sc0 ls0 ws4">[1, 2, 3, 4, 1, 2, 3, 4]</div><div class="t m0 x5 hf yb94 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">x<span class="fc6 ls33">+<span class="fc7 ls0">10</span></span></span></div><div class="t m0 x5 hf yb95 ff8 fs5 fce sc0 ls0 ws4">Traceback (most recent call last):</div><div class="t m0 x15 hf yb96 ff8 fs5 fc0 sc0 ls0 ws13c">File <span class="fc9 ws13a">&quot;&lt;stdin&gt;&quot;</span><span class="ws145">, line <span class="fc7 ls34">1</span><span class="ls32">,</span><span class="ff7 fca ws160">in </span><span class="fc6 ws13a">&lt;<span class="fc0">module</span>&gt;</span></span></div><div class="t m0 x5 hf yb97 ff8 fs5 fc2 sc0 ls0 ws13a">TypeError<span class="fc0 ws4">: can only concatenate list (not &quot;int&quot;) to list</span></div><div class="t m0 x5 hf yb98 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">x<span class="fc6 ls33">+</span><span class="ls0">y</span></span></div><div class="t m0 x5 hf yb99 ff8 fs5 fc8 sc0 ls0 ws4">[1, 2, 3, 4, 5, 6, 7, 8]</div><div class="t m0 x5 h11 yb4 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws13b"># Numpy arrays</span></div><div class="t m0 x5 h10 yb9a ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc ws16a">numpy </span><span class="ws160">as <span class="fcc">np</span></span></span></div><div class="t m0 x5 hf yb9b ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws159">ax <span class="fc6 ls33">=</span><span class="ws13a">np<span class="fc6 ls34">.</span>array([<span class="fc7 ls34">1</span><span class="ls32">,<span class="fc7 ls34">2</span>,<span class="fc7 ls34">3</span>,<span class="fc7 ls34">4</span></span>])</span></span></div><div class="t m0 x5 hf yb9c ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws159">ay <span class="fc6 ls33">=</span><span class="ws13a">np<span class="fc6 ls34">.</span>array([<span class="fc7 ls34">5</span><span class="ls32">,<span class="fc7 ls34">6</span>,<span class="fc7 ls34">7</span>,<span class="fc7 ls34">8</span></span>])</span></span></div><div class="t m0 x5 hf yb9d ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws159">ax <span class="fc6 ls33">*</span><span class="fc7">2</span></span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">5.9.<span class="_ _5"> </span>3.9 <span class="ff1 ws325">大型数组运算 </span>94</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

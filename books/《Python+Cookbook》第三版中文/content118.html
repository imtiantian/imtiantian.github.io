<div id="pf76" class="pf w0 h0" data-page-no="76"><div class="pc pc76 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg76.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 he y137 ff2 fs2 fc4 sc0 ls0 ws212">5.16.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 y675 ff1 fs3 fc0 sc0 ls3a ws153">为了不让你被这些东东弄的晕头转向，处理本地化日期的通常的策略先将所有日期</div><div class="t m0 x5 h7 y676 ff1 fs3 fc0 sc0 ls0 ws38">转换为 <span class="ff4 ws54c">UTC </span>时间，并用它来执行所有的中间存储和操作。比如：</div><div class="t m0 x5 hf yd39 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws156">print<span class="ff8 fc0">(loc_d)</span></span></div><div class="t m0 x5 hf yd3a ff8 fs5 fc8 sc0 ls0 ws4">2013-03-10 01:45:00-06:00</div><div class="t m0 x5 hf yd3b ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws15f">utc_d <span class="fc6 ls33">=</span><span class="ws13a">loc_d<span class="fc6 ls34">.</span>astimezone(pytz<span class="fc6 ls34">.</span>utc)</span></span></div><div class="t m0 x5 hf yd3c ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws156">print<span class="ff8 fc0">(utc_d)</span></span></div><div class="t m0 x5 hf y9e ff8 fs5 fc8 sc0 ls0 ws4">2013-03-10 07:45:00+00:00</div><div class="t m0 x5 hf yd3d ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 yd3e ff1 fs3 fc0 sc0 ls0 ws54d">一旦<span class="_ _6"></span>转<span class="_ _6"></span>换<span class="_ _6"></span>为 <span class="ff4 wsa5">UTC</span><span class="ls10 wsdf">，你就不用去担心跟夏令时相关的问题了<span class="_ _1"></span>。因此，你可以跟之前<span class="_ _c"></span></span></div><div class="t m0 x5 h9 yd3f ff1 fs3 fc0 sc0 ls13 wse5">一样放心的执行常见的日期计算<span class="_ _1"></span>。当你想将输出变为本地时间的时候，使用合适的时<span class="_ _c"></span></div><div class="t m0 x5 h9 yd40 ff1 fs3 fc0 sc0 ls0">区去转换下就行了。比如：</div><div class="t m0 x5 hf yd41 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws16e">later_utc <span class="fc6 ls33">=</span><span class="ws15f">utc_d <span class="fc6 ls32">+</span><span class="ws13a">timedelta(minutes<span class="fc6 ls34">=</span><span class="fc7">30</span>)</span></span></span></div><div class="t m0 x5 hf yd42 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws156">print<span class="ff8 fc0 ws13a">(later_utc<span class="fc6 ls34">.</span>astimezone(central))</span></span></div><div class="t m0 x5 hf yd43 ff8 fs5 fc8 sc0 ls0 ws4">2013-03-10 03:15:00-05:00</div><div class="t m0 x5 hf yd44 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 yd45 ff1 fs3 fc0 sc0 ls0 wsa0">当涉及到时区操作的<span class="_ _6"></span>时候，有个问题就是我们如<span class="_ _6"></span>何得到时区的名称。比如，<span class="_ _6"></span>在这个</div><div class="t m0 x5 h7 yd46 ff1 fs3 fc0 sc0 ls0 wsa0">例子中，我们如何知道“<span class="ff4 wsa5">Asia/K<span class="_ _1"></span>olkata<span class="ff1">”就是印度对应的时区名呢？为了查找，可以使</span></span></div><div class="t m0 x5 h7 yd47 ff1 fs3 fc0 sc0 ls4">用<span class="ff4 ls0 ws9c">ISO 3166 </span><span class="ls0 ws14">国家代码作为关键字去查阅字典 <span class="ff6 ws1d1">pytz.country<span class="_ _7"> </span>timezones </span>。比如：</span></div><div class="t m0 x5 hf yd48 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">pytz<span class="fc6 ls34">.</span>country_timezones[<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">IN<span class="ff9 ls34">&apos;</span></span>]</span></div><div class="t m0 x5 hf y758 ff8 fs5 fc8 sc0 ls34">[<span class="ff9 ls0 ws13b">&apos;</span><span class="ls0 ws13a">Asia/Kolkata</span><span class="ff9">&apos;</span><span class="ls0">]</span></div><div class="t m0 x5 hf yd49 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 yd4a ff1 fs3 fc0 sc0 ls0 ws54e">注：<span class="_ _d"></span>当你阅读到这里的时候，<span class="_ _d"></span>有可能 <span class="ff6 ws54f">pytz </span><span class="ws550">模块以及不再建议使用了，<span class="_ _d"></span>因为 <span class="ff4">PEP431</span></span></div><div class="t m0 x5 h7 yd4b ff1 fs3 fc0 sc0 ls0 ws551">提<span class="_ _0"></span>出<span class="_ _0"></span>了<span class="_ _0"></span>更<span class="_ _0"></span>先<span class="_ _6"></span>进<span class="_ _0"></span>的<span class="_ _0"></span>时<span class="_ _0"></span>区<span class="_ _0"></span>支<span class="_ _0"></span>持。<span class="_ _0"></span>但<span class="_ _0"></span>是<span class="_ _0"></span>这<span class="_ _0"></span>里<span class="_ _0"></span>谈<span class="_ _0"></span>到<span class="_ _6"></span>的<span class="_ _0"></span>很<span class="_ _0"></span>多<span class="_ _0"></span>问<span class="_ _0"></span>题<span class="_ _0"></span>还<span class="_ _0"></span>是<span class="_ _0"></span>有<span class="_ _0"></span>参<span class="_ _0"></span>考<span class="_ _0"></span>价<span class="_ _0"></span>值<span class="_ _6"></span>的 <span class="ff4 wsa5">(</span><span class="wsa0">比<span class="_ _0"></span>如<span class="_ _0"></span>使<span class="_ _0"></span>用</span></div><div class="t m0 x5 h7 yd4c ff4 fs3 fc0 sc0 ls0 ws54c">UTC <span class="ff1 wsa0">日期的建议等</span><span class="wsa5">)<span class="ff1">。</span></span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">5.16.<span class="_ _5"> </span>3.16 <span class="ff1 ws544">结合时区的日期操作 </span>109</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

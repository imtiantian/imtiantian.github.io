<div id="pf11" class="pf w0 h0" data-page-no="11"><div class="pc pc11 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg11.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hd y112 ff2 fs4 fc4 sc0 ls0 ws134">3.2<span class="_ _e"> </span>1.2 <span class="ff1">解压可迭代对象赋值给多个变量</span></div><div class="t m0 x5 he y113 ff2 fs2 fc4 sc0 ls0 ws135">3.2.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 y114 ff1 fs3 fc0 sc0 ls18 ws140">如果一个可迭代对象的元素个数超过变量个数时，会抛出一个 <span class="ff6 ls0 ws141">ValueError </span><span class="ws110">。那么</span></div><div class="t m0 x5 h7 y115 ff1 fs3 fc0 sc0 ls0 ws14">怎样才能从这个可迭代对象中解压出 <span class="ff4 ls3">N</span>个元素出来？</div><div class="t m0 x5 he y116 ff2 fs2 fc4 sc0 ls0 ws135">3.2.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h7 y117 ff4 fs3 fc0 sc0 ls0 ws131">Python <span class="ff1 ls2d ws132">的星号表达式可以用来解决这个问题<span class="_ _1"></span>。比如，你在学习<span class="_ _1"></span>一门课程，在学期<span class="_ _c"></span></span></div><div class="t m0 x5 h9 y118 ff1 fs3 fc0 sc0 ls0 wsa0">末<span class="_ _6"></span>的时<span class="_ _6"></span>候，<span class="_ _6"></span>你<span class="_ _6"></span>想<span class="_ _6"></span>统<span class="_ _6"></span>计下<span class="_ _6"></span>家<span class="_ _6"></span>庭<span class="_ _6"></span>作<span class="_ _6"></span>业<span class="_ _6"></span>的平<span class="_ _6"></span>均<span class="_ _6"></span>成<span class="_ _6"></span>绩，<span class="_ _6"></span>但<span class="_ _6"></span>是<span class="_ _6"></span>排除<span class="_ _6"></span>掉<span class="_ _6"></span>第<span class="_ _6"></span>一<span class="_ _6"></span>个<span class="_ _6"></span>和最<span class="_ _6"></span>后<span class="_ _6"></span>一<span class="_ _6"></span>个<span class="_ _6"></span>分<span class="_ _6"></span>数。如</div><div class="t m0 x5 h7 y119 ff1 fs3 fc0 sc0 ls35 ws142">果只有四个分数，你可能就直接去简单的手动赋值，但如果有 <span class="ff4 ls0 ws143">24 </span><span class="ws144">个呢？这时候星号表</span></div><div class="t m0 x5 h9 y11a ff1 fs3 fc0 sc0 ls0">达式就派上用场了：</div><div class="t m0 x5 hf y11b ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">drop_first_last<span class="fc0">(grades):</span></span></div><div class="t m0 x15 hf y11c ff8 fs5 fc0 sc0 ls0 ws145">first, <span class="fc6 ls34">*</span><span class="ws13b">middle, last <span class="fc6 ls33">=</span>grades</span></div><div class="t m0 x15 hf y11d ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 fc0">avg(middle)</span></div><div class="t m0 x0 h9 y11e ff1 fs3 fc0 sc0 ls24 ws11d">另外一种情况<span class="_ _c"></span>，假设你现在有一些用户的记录列表<span class="_ _1"></span>，每条记录包含一个名字<span class="_ _1"></span>、邮<span class="_ _c"></span></div><div class="t m0 x5 h9 y11f ff1 fs3 fc0 sc0 ls0">件，接着就是不确定数量的电话号码。你可以像下面这样分解这些记录：</div><div class="t m0 x5 hf y120 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws145">record <span class="fc6 ls32">=</span><span class="ls34">(<span class="ff9 fc9">&apos;</span></span><span class="fc9 ws13a">Dave<span class="ff9 ls34">&apos;</span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9 ws13a">dave@example.com<span class="ff9 ls34">&apos;</span></span><span class="ls33">,</span><span class="ff9 fc9 ws13b">&apos;<span class="ff8 ws13a">773-555-1212</span><span class="ls34">&apos;</span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9 ws13a">847-555-1212<span class="ff9 ws13b">&apos;</span></span>)</span></div><div class="t m0 x5 hf y121 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13b">name, email, <span class="fc6 ls34">*</span><span class="ws147">phone_numbers <span class="fc6 ls33">=</span>record</span></span></div><div class="t m0 x5 hf y122 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">name</span></div><div class="t m0 x5 hf y123 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">Dave<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y124 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">email</span></div><div class="t m0 x5 hf y125 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">dave@example.com<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y126 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">phone_numbers</span></div><div class="t m0 x5 hf y127 ff8 fs5 fc8 sc0 ls34">[<span class="ff9 ls0 ws13b">&apos;</span><span class="ls0 ws13a">773-555-1212</span><span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span><span class="ls0 ws13a">847-555-1212</span><span class="ff9">&apos;</span><span class="ls0">]</span></div><div class="t m0 x5 hf y128 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y129 ff1 fs3 fc0 sc0 ls36 ws148">值得注意的是上面解压出的 <span class="ff6 ls0 ws149">phone numbers </span><span class="ws14a">变量永<span class="_ _6"></span>远都是列表类型<span class="_ _c"></span>，不管解压的</span></div><div class="t m0 x5 h7 y12a ff1 fs3 fc0 sc0 lse ws14b">电话号码数量是多少 <span class="ff4 ls0 wsa5">(<span class="ff1 ws14c">包括 </span><span class="ls37">0</span></span><span class="lsb">个<span class="ff4 ls0 wsa5">)</span></span><span class="ws14d">。所以，任何使用到 <span class="ff6 ls0 ws14e">phone numbers </span><span class="wsd8">变量的代码就不</span></span></div><div class="t m0 x5 h9 y12b ff1 fs3 fc0 sc0 ls0">需要做多余的类型检查去确认它是否是列表类型了。</div><div class="t m0 x0 h7 y12c ff1 fs3 fc0 sc0 ls0 ws14f">星号表达式也能用在列表的开始部分。比如，<span class="_ _1"></span>你有一个公司前 <span class="ff4 ls38">8</span>个月销售数据的序</div><div class="t m0 x5 h7 y12d ff1 fs3 fc0 sc0 ls0 ws14">列，但是你想看下最近一个月数据和前面 <span class="ff4 ls39">7</span>个月的平均值的对比。你可以这样做：</div><div class="t m0 x5 hf y12e ff8 fs5 fc6 sc0 ls34">*<span class="fc0 ls0 ws13b">trailing_qtrs, current_qtr </span><span class="ls33">=<span class="fc0 ls0">sales_record</span></span></div><div class="t m0 x5 hf y12f ff8 fs5 fc0 sc0 ls0 ws150">trailing_avg <span class="fc6 ls33">=</span><span class="fca ws13a">sum</span><span class="ws151">(trailing_qtrs) <span class="fc6 ls32">/</span><span class="fca ws13a">len</span>(trailing_qtrs)</span></div><div class="t m0 x5 hf y130 ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 fc0 ws4">avg_comparison(trailing_avg, current_qtr)</span></div><div class="t m0 x0 h7 y131 ff1 fs3 fc0 sc0 ls0 wsc">下面是在 <span class="ff4 ws5c">Python </span>解释器中执行的结果：</div><div class="t m0 x5 hf y132 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc6 ls34">*<span class="fc0 ls0 ws13b">trailing, current </span><span class="ls32">=</span><span class="fc0">[<span class="fc7 ls0 ws13a">10</span><span class="ls33">,</span><span class="fc7">8</span><span class="ls32">,</span><span class="fc7">7</span><span class="ls32">,</span><span class="fc7">1</span><span class="ls32">,</span><span class="fc7">9</span><span class="ls33">,<span class="fc7 ls0 ws13a">5</span>,<span class="fc7 ls0 ws13a">10</span>,<span class="fc7 ls0 ws13a">3<span class="fc0">]</span></span></span></span></span></div><div class="t m0 x5 hf y133 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">trailing</span></div><div class="t m0 x5 hf y134 ff8 fs5 fc8 sc0 ls0 ws4">[10, 8, 7, 1, 9, 5, 10]</div><div class="t m0 x5 hf y135 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">current</span></div><div class="t m0 x5 hf y136 ff8 fs5 fc8 sc0 ls0">3</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">3.2.<span class="_ _5"> </span>1.2 <span class="ff1 ws152">解压可迭代对象赋值给多个变量 </span>8</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

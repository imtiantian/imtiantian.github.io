<div id="pff9" class="pf w0 h0" data-page-no="f9"><div class="pc pcf9 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bgf9.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y334 ff8 fs5 fc2 sc0 ls0 ws13a">TypeError<span class="fc0 ws4">: Expected a string</span></div><div class="t m0 x5 hf y335 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">del <span class="ff8 fc0 ls34">a<span class="fc6 ls0 ws13a">.<span class="fc0">first_name</span></span></span></span></div><div class="t m0 x5 hf y336 ff8 fs5 fce sc0 ls0 ws4">Traceback (most recent call last):</div><div class="t m0 x15 hf y337 ff8 fs5 fc0 sc0 ls0 ws13c">File <span class="fc9 ws13a">&quot;&lt;stdin&gt;&quot;</span><span class="ws145">, line <span class="fc7 ls34">1</span><span class="ls32">,</span><span class="ff7 fca ws160">in </span><span class="fc6 ws13a">&lt;<span class="fc0">module</span>&gt;</span></span></div><div class="t m0 x5 hf yadd ff8 fs5 fc2 sc0 ls0 ws13a">AttributeError<span class="fc0 ws4">: can<span class="ff9 ls34">`</span><span class="ws13b">t delete attribute</span></span></div><div class="t m0 x5 hf yade ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y1ae9 ff1 fs3 fc0 sc0 lsa5 wsa36">在实现一个 <span class="ff4 ls0 wsa37">prop<span class="_ _6"></span>ert<span class="_ _1"></span>y <span class="ff1 wsa38">的<span class="_ _6"></span>时<span class="_ _6"></span>候，<span class="_ _6"></span>底<span class="_ _6"></span>层<span class="_ _6"></span>数<span class="_ _6"></span>据 </span><span class="ls1b">(<span class="ff1 lsa5 ws3b5">如果有的话</span><span class="ls16a">)<span class="ff1 lsa5 ws3b5">仍然需要存储在某个地方<span class="_ _c"></span>。<span class="_ _1"></span></span></span></span></span></div><div class="t m0 x5 h7 y1aea ff1 fs3 fc0 sc0 ls0 ws7fa">因此，在 <span class="ff4 wsa39">get </span><span class="ls16b">和</span><span class="ff4 wsa3a">set </span><span class="wsa3b">方法中，你会看到对 <span class="ff6 wsa3c">first<span class="_ _16"> </span>name </span><span class="wsa0">属性的操作，这也是实际数据保</span></span></div><div class="t m0 x5 h9 y1aeb ff1 fs3 fc0 sc0 ls42 wsa3d">存的地方。另外<span class="_ _1"></span>，你可能还会问为什么 <span class="ff6 ls0 wsa3e">init<span class="_ _e"> </span>() </span><span class="wsa3f">方法中设置了 <span class="ff6 ls0 wsa40">self.first<span class="_ _7"> </span>name <span class="ff1">而</span></span></span></div><div class="t m0 x5 h7 y1aec ff1 fs3 fc0 sc0 ls0 wsa41">不<span class="_ _6"></span>是 <span class="ff6 ws149">self. first name<span class="_ _7"> </span></span><span class="wsa42">。<span class="_ _6"></span>在<span class="_ _0"></span>这个<span class="_ _0"></span>例子<span class="_ _0"></span>中，我<span class="_ _0"></span>们创<span class="_ _0"></span>建一<span class="_ _6"></span>个 <span class="ff4 wsa43">prop<span class="_ _6"></span>erty </span><span class="ls36 ws14a">的目的就是在设置<span class="_ _c"></span></span></span></div><div class="t m0 x5 h7 y1aed ff4 fs3 fc0 sc0 ls0 wsa44">attribute <span class="ff1 ls10 wsdf">的时候进行检查<span class="_ _1"></span>。因此，你可能想在初始化的时候也进行这种类型检查<span class="_ _c"></span>。通</span></div><div class="t m0 x5 h9 y1aee ff1 fs3 fc0 sc0 ls0 wsa45">过设<span class="_ _6"></span>置 <span class="ff6 ws179">self.first name </span><span class="lse wsa46">，自动调用 </span><span class="ff6 ws6aa">setter </span><span class="lse wsd8">方法，这个方法里面会进行参数的检查，<span class="_ _1"></span></span></div><div class="t m0 x5 h9 y1aef ff1 fs3 fc0 sc0 ls0 ws14">否则就是直接访问 <span class="ff6 ws149">self. first name<span class="_ _a"> </span></span>了。</div><div class="t m0 x0 h7 y1af0 ff1 fs3 fc0 sc0 ls0 ws38">还能在已存在的 <span class="ff4 wsa47">get </span><span class="ls4">和</span><span class="ff4 wsa48">set </span>方法基础上定义 <span class="ff4 wsa5">prop<span class="_ _6"></span>ert<span class="_ _1"></span>y<span class="ff1">。例如：</span></span></div><div class="t m0 x5 hf y1af1 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">Person<span class="ff8 fc0">:</span></span></div><div class="t m0 x15 hf y19e9 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span><span class="ws4">, first_name):</span></span></span></div><div class="t m0 x16 hf y1af2 ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0">set_first_name(first_name)</span></span></div><div class="t m0 x15 h11 y1af3 ffa fs5 fcd sc0 ls0 ws13b"># Getter function</div><div class="t m0 x15 hf y1af4 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">get_first_name<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0">):</span></span></span></div><div class="t m0 x16 hf y1af5 ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 ws13a">self<span class="fc6 ls34">.</span><span class="fc0">_first_name</span></span></div><div class="t m0 x15 h11 y1af6 ffa fs5 fcd sc0 ls0 ws13b"># Setter function</div><div class="t m0 x15 hf y1af7 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">set_first_name<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0 ws13b">, value):</span></span></span></div><div class="t m0 x16 hf y1af8 ff7 fs5 fca sc0 ls0 ws157">if not <span class="ff8 ws13a">isinstance<span class="fc0 ws155">(value, </span>str<span class="fc0">):</span></span></div><div class="t m0 x17 hf y1af9 ff7 fs5 fca sc0 ls0 ws16a">raise <span class="ff8 ws13a">TypeError<span class="fc0">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Expected a string<span class="ff9 ls34">&apos;</span></span>)</span></span></div><div class="t m0 x16 hf y1afa ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws208">_first_name </span><span class="ls33">=</span><span class="fc0">value</span></span></div><div class="t m0 x15 h11 y1afb ffa fs5 fcd sc0 ls0 ws4"># Deleter function (optional)</div><div class="t m0 x15 hf y1afc ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">del_first_name<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0">):</span></span></span></div><div class="t m0 x16 hf y1afd ff7 fs5 fca sc0 ls0 ws16a">raise <span class="ff8 ws13a">AttributeError<span class="fc0 ls34">(</span><span class="fc9">&quot;Can<span class="ff9 ls34">&apos;</span><span class="ws13b">t delete attribute&quot;<span class="fc0">)</span></span></span></span></div><div class="t m0 x15 h11 y1afe ffa fs5 fcd sc0 ls0 ws4"># Make a property from existing get/set methods</div><div class="t m0 x15 hf y1aff ff8 fs5 fc0 sc0 ls0 ws13c">name <span class="fc6 ls32">=</span><span class="fca ws13a">property</span><span class="ws13b">(get_first_name, set_first_name, del_first_name)</span></div><div class="t m0 x5 he y1b00 ff2 fs2 fc4 sc0 ls0 ws212">10.6.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h7 y1b01 ff1 fs3 fc0 sc0 ls0 wsa49">一<span class="_ _12"></span>个 <span class="ff4 wsa4a">prop<span class="_ _6"></span>ert<span class="_ _1"></span>y <span class="ff1 ls126 ws74c">属性其实就是一系列相关绑定方法的集合<span class="_ _19"></span>。<span class="_ _6"></span>如果你去查看拥有<span class="_ _19"></span></span></span></div><div class="t m0 x5 h7 y1b02 ff4 fs3 fc0 sc0 ls0 wsa4b">prop<span class="_ _6"></span>ert<span class="_ _1"></span>y <span class="ff1 wsa4c">的类，<span class="_ _6"></span>就<span class="_ _6"></span>会发<span class="_ _6"></span>现 </span>prop<span class="_ _6"></span>ert<span class="_ _1"></span>y <span class="ff1 wsa4d">本身<span class="_ _6"></span>的 </span><span class="wsa5">fget<span class="ff1 ls16c">、</span><span class="wsa4e">fset <span class="ff1 ls134">和</span><span class="wsa4f">fdel <span class="ff1 wsa0">属<span class="_ _6"></span>性就<span class="_ _6"></span>是类<span class="_ _6"></span>里<span class="_ _6"></span>面的<span class="_ _6"></span>普通<span class="_ _6"></span>方</span></span></span></span></div><div class="t m0 x5 h9 y1b03 ff1 fs3 fc0 sc0 ls0">法。比如：</div><div class="t m0 x5 hf y1b04 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">Person<span class="fc6 ls34">.</span>first_name<span class="fc6 ls34">.</span>fget</span></div><div class="t m0 x5 hf y1b05 ff8 fs5 fc8 sc0 ls0 ws4">&lt;function Person.first_name at 0x1006a60e0&gt;</div><div class="t m0 x5 hf y1b06 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">Person<span class="fc6 ls34">.</span>first_name<span class="fc6 ls34">.</span>fset</span></div><div class="t m0 x5 hf y1b07 ff8 fs5 fc8 sc0 ls0 ws4">&lt;function Person.first_name at 0x1006a6170&gt;</div><div class="t m0 x5 hf y1b08 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">Person<span class="fc6 ls34">.</span>first_name<span class="fc6 ls34">.</span>fdel</span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws9da">10.6.<span class="_ _5"> </span>8.6 <span class="ff1 ws2a4">创建可管理的属性 </span>240</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

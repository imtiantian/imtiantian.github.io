<div id="pf34" class="pf w0 h0" data-page-no="34"><div class="pc pc34 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg34.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y1ab ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">url[:<span class="fc7">5</span><span class="ls33">]</span><span class="fc6 ws159">== <span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">http:<span class="ff9 ls33">&apos;</span></span></span><span class="fca ws157">or <span class="ff8 fc0 ws13a">url[:<span class="fc7">6</span><span class="ls33">]</span><span class="fc6 ws159">== <span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">https:<span class="ff9 ls32">&apos;</span></span></span><span class="ws160">or <span class="ff8 fc0 ws13a">url[:<span class="fc7 ls34">4</span><span class="ls32">]</span><span class="fc6 ws15c">== <span class="ff9 fc9 ws13b">&apos;</span></span><span class="fc9">ftp:<span class="ff9">&apos;</span></span></span></span></span></div><div class="t m0 x5 hf y1ac ff8 fs5 fc8 sc0 ls0">True</div><div class="t m0 x5 hf y1ad ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y2f1 ff1 fs3 fc0 sc0 ls0">你可以能还想使用正则表达式去实现，比如：</div><div class="t m0 x5 h10 y577 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">re</span></span></div><div class="t m0 x5 hf y578 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws158">url <span class="fc6 ls32">=<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9 ws13a">http://www.python.org<span class="ff9">&apos;</span></span></span></div><div class="t m0 x5 hf y579 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">re<span class="fc6 ls34">.</span>match(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">http:<span class="ffd ws13b">|</span>https:<span class="ffd ws13b">|</span>ftp:<span class="ff9 ls34">&apos;</span></span><span class="ws13b">, url)</span></span></div><div class="t m0 x5 hf y57a ff8 fs5 fc8 sc0 ls0 ws4">&lt;_sre.SRE_Match object at 0x101253098&gt;</div><div class="t m0 x5 hf y57b ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y57c ff1 fs3 fc0 sc0 ls3a ws153">这种方式也行得通，但是对于简单的匹配实在是有点小材大用了，本节中的方法更</div><div class="t m0 x5 h9 y57d ff1 fs3 fc0 sc0 ls0">加简单并且运行会更快些。</div><div class="t m0 x0 h9 y57e ff1 fs3 fc0 sc0 ls7b ws2e4">最后提一下<span class="_ _8"></span>，当和其他操作比如普通数据聚合相结合的时候 <span class="ff6 ls0 ws2e5">startswith() <span class="ff1">和</span></span></div><div class="t m0 x5 h9 y57f ff6 fs3 fc0 sc0 ls0 ws2e6">endswith() <span class="ff1 ls18 ws110">方法是很不错的。比如，下面这个语句检查<span class="_ _1"></span>某个文件夹中是否存在指定的</span></div><div class="t m0 x5 h9 y580 ff1 fs3 fc0 sc0 ls0">文件类型：</div><div class="t m0 x5 hf y581 ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 ws13a">any<span class="fc0">(name<span class="fc6 ls34">.</span>endswith((<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">.c<span class="ff9 ls34">&apos;</span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">.h<span class="ff9 ws13b">&apos;</span></span><span class="ws159">)) </span></span></span><span class="ws139">for <span class="ff8 fc0 ws13c">name </span></span>in <span class="ff8 fc0">listdir(dirname)):</span></div><div class="t m0 x5 hf y582 ff8 fs5 fc6 sc0 ls0 ws13a">...</div><div class="t m0 x5 hd y583 ff2 fs4 fc4 sc0 ls0 ws134">4.3<span class="_ _e"> </span>2.3 <span class="ff1 ls7c">用</span><span class="ws2e7">Shell <span class="ff1">通配符匹配字符串</span></span></div><div class="t m0 x5 he y584 ff2 fs2 fc4 sc0 ls0 ws135">4.3.1 <span class="ff1">问题</span></div><div class="t m0 x0 h7 y585 ff1 fs3 fc0 sc0 ls0 ws2e8">你想<span class="_ _6"></span>使<span class="_ _6"></span>用 <span class="ff5 ws2e9">Unix<span class="_ _18"> </span>Shell </span><span class="ls22 ws2ea">中常用的通配符 </span><span class="ff4 wsa5">(</span><span class="ws2eb">比如 <span class="ff6 ws217">*.py <span class="ff4 ls7d">,</span><span class="ws2ec">Dat[0-9]*.csv </span></span><span class="lsb">等<span class="ff4 ls7e">)</span><span class="ls22 ws119">去匹配文</span></span></span></div><div class="t m0 x5 h9 y586 ff1 fs3 fc0 sc0 ls0">本字符串</div><div class="t m0 x5 he y587 ff2 fs2 fc4 sc0 ls0 ws135">4.3.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 y588 ff6 fs3 fc0 sc0 ls0 ws2ed">fnmatch <span class="ff1 ls48 ws2ee">模块提供了两个函数—<span class="_ _19"></span>— <span class="ff6 ls0 ws2b0">fnmatch() </span><span class="ls7f">和<span class="ff6 ls0 ws2ef">fnmatchcase() </span></span><span class="ws242">，可以用来实现<span class="_ _1"></span></span></span></div><div class="t m0 x5 h9 y589 ff1 fs3 fc0 sc0 ls0">这样的匹配。用法如下：</div><div class="t m0 x5 hf y58a ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws15a">from <span class="fcc ws2f0">fnmatch </span><span class="ws146">import <span class="ff8 fc0 ws4">fnmatch, fnmatchcase</span></span></span></div><div class="t m0 x5 hf y58b ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">fnmatch(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">foo.txt<span class="ff9 ws13b">&apos;</span></span><span class="ls33">,</span><span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">*.txt<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 hf y58c ff8 fs5 fc8 sc0 ls0">True</div><div class="t m0 x5 hf y58d ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">fnmatch(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">foo.txt<span class="ff9 ws13b">&apos;</span></span><span class="ls33">,</span><span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">?oo.txt<span class="ff9 ws13b">&apos;</span></span>)</span></div><div class="t m0 x5 hf y58e ff8 fs5 fc8 sc0 ls0">True</div><div class="t m0 x5 hf y58f ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">fnmatch(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">Dat45.csv<span class="ff9 ls34">&apos;</span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">Dat[0-9]*<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 hf y590 ff8 fs5 fc8 sc0 ls0">True</div><div class="t m0 x5 hf y591 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws15f">names <span class="fc6 ls33">=</span><span class="ws13a">[<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">Dat1.csv<span class="ff9 ls34">&apos;</span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">Dat2.csv<span class="ff9 ws13b">&apos;</span></span><span class="ls33">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">config.ini<span class="ff9 ls34">&apos;</span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">foo.py<span class="ff9 ls34">&apos;</span></span>]</span></span></div><div class="t m0 x5 hf y592 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws15f">[name </span><span class="fca">for <span class="ff8 fc0 ws13c">name </span><span class="ws157">in <span class="ff8 fc0 ws15f">names </span><span class="ws160">if <span class="ff8 fc0 ws147">fnmatch(name, <span class="ff9 fc9 ws13b">&apos;<span class="ff8 ws13a">Dat*.csv</span><span class="ls34">&apos;</span></span>)]</span></span></span></span></div><div class="t m0 x5 hf y593 ff8 fs5 fc8 sc0 ls34">[<span class="ff9 ls0 ws13b">&apos;</span><span class="ls0 ws13a">Dat1.csv</span><span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span><span class="ls0 ws13a">Dat2.csv</span><span class="ff9">&apos;</span><span class="ls0">]</span></div><div class="t m0 x5 hf y594 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y595 ff6 fs3 fc0 sc0 ls0 ws2f1">fnmatch() <span class="ff1 ls1e ws2f2">函数使用底层操作系统的大小写敏感规则 </span><span class="ff4 wsa5">(<span class="ff1 ls1e ws111">不同的系统是不一样的<span class="_ _c"></span><span class="ff4 ls80">)<span class="ff1 ls0">来</span></span></span></span></div><div class="t m0 x5 h9 y596 ff1 fs3 fc0 sc0 ls0">匹配模式。比如：</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">4.3.<span class="_ _5"> </span>2.3 <span class="ff1 ls81">用</span><span class="ws2f3">Shell <span class="ff1 ws2f4">通配符匹配字符串 </span>43</span></div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

<div id="pf217" class="pf w0 h0" data-page-no="217"><div class="pc pc217 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg217.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y15f ff7 fs5 fca sc0 ls0 ws146">except <span class="ff8 ws13a">OSError<span class="fc0">:</span></span></div><div class="t m0 x15 h10 y160 ff7 fs5 fca sc0 ls0">pass</div><div class="t m0 x0 h9 y33f8 ff6 fs3 fc0 sc0 ls0 ws472">OSError <span class="ff1 ls4">是</span><span class="ws12b7">FileNotFoundError <span class="ff1 ls4">和</span><span class="ws4f7">PermissionError <span class="ff1">异常的基类。</span></span></span></div><div class="t m0 x5 he y33f9 ff2 fs2 fc4 sc0 ls0 ws212">16.6.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 y33fa ff1 fs3 fc0 sc0 ls19 ws12b8">尽管处理多个异常本身并没什么特殊的，不过你<span class="_ _1"></span>可以使用 <span class="ff6 ls0 ws12b9">as <span class="ff1 wsa0">关键<span class="_ _6"></span>字来<span class="_ _6"></span>获得<span class="_ _6"></span>被抛出</span></span></div><div class="t m0 x5 h9 y33fb ff1 fs3 fc0 sc0 ls0">异常的引用：</div><div class="t m0 x5 hf y33fc ff7 fs5 fca sc0 ls0 ws156">try<span class="ff8 fc0">:</span></div><div class="t m0 x15 hf y33fd ff8 fs5 fc0 sc0 ls32">f<span class="fc6 ls33">=<span class="fca ls0 ws13a">open<span class="fc0">(filename)</span></span></span></div><div class="t m0 x5 hf y33fe ff7 fs5 fca sc0 ls0 ws146">except <span class="ff8 ws155">OSError </span><span class="ws157">as <span class="ff8 fc0">e:</span></span></div><div class="t m0 x15 hf y33ff ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 fc0 ls34">e<span class="fc6">.</span><span class="ls0 ws15f">errno <span class="fc6 ws159">== </span><span class="ws13a">errno<span class="fc6">.</span>ENOENT:</span></span></span></div><div class="t m0 x16 hf y3400 ff8 fs5 fc0 sc0 ls0 ws13a">logger<span class="fc6 ls34">.</span>error(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">File not found<span class="ff9 ls34">&apos;</span></span>)</div><div class="t m0 x15 hf y3401 ff7 fs5 fca sc0 ls0 ws15a">elif <span class="ff8 fc0 ws13a">e<span class="fc6 ls34">.</span><span class="ws15f">errno <span class="fc6 ws15c">== </span></span>errno<span class="fc6 ls34">.</span>EACCES:</span></div><div class="t m0 x16 hf y3402 ff8 fs5 fc0 sc0 ls0 ws13a">logger<span class="fc6 ls34">.</span>error(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Permission denied<span class="ff9 ls34">&apos;</span></span>)</div><div class="t m0 x15 hf y3403 ff7 fs5 fca sc0 ls0 ws156">else<span class="ff8 fc0">:</span></div><div class="t m0 x16 hf y3404 ff8 fs5 fc0 sc0 ls0 ws13a">logger<span class="fc6 ls34">.</span>error(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws23c">Unexpected error: </span><span class="ffa fcf">%d<span class="ff9 fc9 ws13b">&apos;</span></span><span class="ws4">, e<span class="fc6 ls34">.</span>errno)</span></div><div class="t m0 x0 h9 y3405 ff1 fs3 fc0 sc0 ls0 ws12ba">这个<span class="_ _6"></span>例<span class="_ _6"></span>子<span class="_ _6"></span>中， <span class="ff6 ls97">e</span><span class="ls10 ws12bb">变量指向一个被抛出的 </span><span class="ff6 ws470">OSError </span><span class="ls10 wsdf">异常实例<span class="_ _1"></span>。这个在你想更进一步</span></div><div class="t m0 x5 h9 y24ac ff1 fs3 fc0 sc0 ls0">分析这个异常的时候会很有用，比如基于某个状态码来处理它。</div><div class="t m0 x0 h9 yaca ff1 fs3 fc0 sc0 lse wse59">同时还要注意的时候 <span class="ff6 ls0 ws20b">except </span><span class="wsd8">语句是顺序检查的，第一个匹配的会执行<span class="_ _1"></span>。你可以很</span></div><div class="t m0 x5 h9 y3406 ff1 fs3 fc0 sc0 ls0 ws38">容易的构造多个 <span class="ff6 ws25d">except </span>同时匹配的情形，比如：</div><div class="t m0 x5 hf y2b06 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">f<span class="fc6 ls33">=<span class="fca ls0 ws13a">open<span class="fc0">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">missing<span class="ff9 ls34">&apos;</span></span>)</span></span></span></span></div><div class="t m0 x5 hf y1185 ff8 fs5 fce sc0 ls0 ws4">Traceback (most recent call last):</div><div class="t m0 x19 hf y2b07 ff8 fs5 fc0 sc0 ls0 ws13c">File <span class="fca ws13a">&quot;&lt;stdin&gt;&quot;</span><span class="ws13b">, line <span class="fc7 ws13a">1</span><span class="ws4">, in &lt;module&gt;</span></span></div><div class="t m0 x5 hf y2ea9 ff8 fs5 fc2 sc0 ls0 ws13a">FileNotFoundError<span class="fc0 ws4">: [Errno 2] No such file or directory: <span class="ff9 ws13b">&apos;</span><span class="ws13a">missing<span class="ff9">&apos;</span></span></span></div><div class="t m0 x5 hf y2b08 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws156">try<span class="ff8 fc0">:</span></span></div><div class="t m0 x5 hf y2b09 ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="ff8 fc0 ls32">f<span class="fc6 ls33">=<span class="fca ls0 ws13a">open<span class="fc0">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">missing<span class="ff9 ls34">&apos;</span></span>)</span></span></span></span></div><div class="t m0 x5 hf y3407 ff7 fs5 fc5 sc0 ls0 ws139">... <span class="fca ws146">except <span class="ff8 ws13a">OSError<span class="fc0">:</span></span></span></div><div class="t m0 x5 hf y2eab ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13b">It failed</span>&apos;</span><span class="ls0">)</span></span></span></div><div class="t m0 x5 hf y2eac ff7 fs5 fc5 sc0 ls0 ws139">... <span class="fca ws146">except <span class="ff8 fc0">FileNotFoundError:</span></span></div><div class="t m0 x5 hf y2ead ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13b">File not found</span>&apos;</span><span class="ls0">)</span></span></span></div><div class="t m0 x5 h10 y3408 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf y2eae ff8 fs5 fc8 sc0 ls0 ws4">It failed</div><div class="t m0 x5 hf y2eaf ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y3298 ff1 fs3 fc0 sc0 ls0 ws84f">这里<span class="_ _6"></span>的 <span class="ff6 ws12bc">FileNotFoundError </span><span class="ls6b ws12bd">语句并没有执行的原因是 </span><span class="ff6 ws12be">OSError </span><span class="wsa0">更一<span class="_ _6"></span>般，<span class="_ _6"></span>它可<span class="_ _6"></span>匹<span class="_ _6"></span>配</span></div><div class="t m0 x5 h9 y3299 ff6 fs3 fc0 sc0 ls0 ws12bf">FileNotFoundError <span class="ff1 ls14 ws174">异常<span class="_ _1"></span>，于是就是第一个匹配的<span class="_ _1"></span>。在调试的时候，如果你对某个特<span class="_ _c"></span></span></div><div class="t m0 x5 h9 yf47 ff1 fs3 fc0 sc0 ls63 ws12c0">定异常的类成层级关系不是很确定<span class="_ _1"></span>，你可以通过查看该异常的 <span class="ff6 ls0 ws12c1">mro </span><span class="ws21f">属性来快速浏<span class="_ _1"></span></span></div><div class="t m0 x5 h9 yb7f ff1 fs3 fc0 sc0 ls0">览。比如：</div><div class="t m0 x5 hf y3409 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">FileNotFoundError<span class="fc6 ls34">.</span>__mro__</span></div><div class="t m0 x5 hf y340a ff8 fs5 fc8 sc0 ls0 ws155">(&lt;class <span class="ff9 ls34">&apos;</span><span class="ws13a">FileNotFoundError<span class="ff9 ls34">&apos;</span><span class="ws13b">&gt;, &lt;class <span class="ff9 ls34">&apos;</span></span>OSError<span class="ff9 ws13b">&apos;</span><span class="ws4">&gt;, &lt;class <span class="ff9 ws13b">&apos;</span></span>Exception<span class="ff9 ls34">&apos;</span>&gt;,</span></div><div class="t m0 x4b hf y340b ff8 fs5 fc8 sc0 ls0 ws145">&lt;class <span class="ff9 ls34">&apos;</span><span class="ws13a">BaseException<span class="ff9 ls34">&apos;</span><span class="ws13b">&gt;, &lt;class <span class="ff9 ls34">&apos;</span></span>object<span class="ff9 ls34">&apos;</span>&gt;)</span></div><div class="t m0 x5 hf y340c ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y340d ff1 fs3 fc0 sc0 ls0 ws38">上面列表中任何一个直到 <span class="ff6 ws317">BaseException </span>的类都能被用于 <span class="ff6 ws25d">except </span>语句。</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">16.6.<span class="_ _36"> </span>14.6 <span class="ff1 ws999">处理多个异常 </span>526</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

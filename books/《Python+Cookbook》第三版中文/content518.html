<div id="pf206" class="pf w0 h0" data-page-no="206"><div class="pc pc206 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg206.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x0 h9 y2a ff1 fs3 fc0 sc0 ls0 ws38">创建一个下面这样的文件，名字叫 <span class="ff6 ws317">logconfig.ini </span>：</div><div class="t m0 x5 hf y212 ff8 fs5 fc0 sc0 ls0">[loggers]</div><div class="t m0 x5 hf y213 ff8 fs5 fc0 sc0 ls0">keys=root</div><div class="t m0 x5 hf y215 ff8 fs5 fc0 sc0 ls0">[handlers]</div><div class="t m0 x5 hf y216 ff8 fs5 fc0 sc0 ls0">keys=defaultHandler</div><div class="t m0 x5 hf y218 ff8 fs5 fc0 sc0 ls0">[formatters]</div><div class="t m0 x5 hf y16b0 ff8 fs5 fc0 sc0 ls0">keys=defaultFormatter</div><div class="t m0 x5 hf y16b2 ff8 fs5 fc0 sc0 ls0">[logger_root]</div><div class="t m0 x5 hf y16b3 ff8 fs5 fc0 sc0 ls0">level=INFO</div><div class="t m0 x5 hf y16b4 ff8 fs5 fc0 sc0 ls0">handlers=defaultHandler</div><div class="t m0 x5 hf y16b5 ff8 fs5 fc0 sc0 ls0">qualname=root</div><div class="t m0 x5 hf y16b7 ff8 fs5 fc0 sc0 ls0">[handler_defaultHandler]</div><div class="t m0 x5 hf ya ff8 fs5 fc0 sc0 ls0">class=FileHandler</div><div class="t m0 x5 hf y329d ff8 fs5 fc0 sc0 ls0">formatter=defaultFormatter</div><div class="t m0 x5 hf y329e ff8 fs5 fc0 sc0 ls0 ws13a">args=(<span class="ff9 ls34">&apos;</span>app.log<span class="ff9 ls34">&apos;</span><span class="ls32">,<span class="ff9 ls34">&apos;<span class="ff8">a</span>&apos;</span></span>)</div><div class="t m0 x5 hf y329f ff8 fs5 fc0 sc0 ls0">[formatter_defaultFormatter]</div><div class="t m0 x5 hf y32a0 ff8 fs5 fc0 sc0 ls0">format=%(levelname)s:%(name)s:%(message)s</div><div class="t m0 x0 h7 y1587 ff1 fs3 fc0 sc0 ls0 ws38">如果你想修改配置，可以直接编辑文件 <span class="ff4 ws60f">logconﬁg.ini </span>即可。</div><div class="t m0 x5 he y32a1 ff2 fs2 fc4 sc0 ls0 wsadf">15.11.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 y32a2 ff1 fs3 fc0 sc0 ls0 ws124c">尽<span class="_ _6"></span>管<span class="_ _6"></span>对<span class="_ _6"></span>于 <span class="ff6 ws183">logging </span><span class="ls14 ws174">模块而已有很多更高级的配置选项<span class="_ _1"></span>，不过这里的方案对于简单</span></div><div class="t m0 x5 h7 y32a3 ff1 fs3 fc0 sc0 ls36 ws124d">的程序和脚本已经足够了<span class="_ _1"></span>。只想在调用日志操作前先执行下 <span class="ff4 ls0 ws124e">basicConﬁg() <span class="ff1 wsa0">函<span class="_ _6"></span>数<span class="_ _6"></span>方<span class="_ _6"></span>法，</span></span></div><div class="t m0 x5 h9 y1f20 ff1 fs3 fc0 sc0 ls0">你的程序就能产生日志输出了。</div><div class="t m0 x0 h9 ybff ff1 fs3 fc0 sc0 ls21e ws124f">如果你想要你的日志消息写到标准错误中<span class="_ _f"></span>，而不是日志文件中<span class="_ _f"></span>，调用<span class="_ _f"></span></div><div class="t m0 x5 h9 y32a4 ff6 fs3 fc0 sc0 ls0 ws317">basicConfig() <span class="ff1">时不传文件名参数即可。例如：</span></div><div class="t m0 x5 hf y32a5 ff8 fs5 fc0 sc0 ls0 ws13a">logging<span class="fc6 ls34">.</span>basicConfig(level<span class="fc6 ls34">=</span>logging<span class="fc6 ls34">.</span>INFO)</div><div class="t m0 x0 h9 y32a6 ff6 fs3 fc0 sc0 ls0 ws770">basicConfig() <span class="ff1 ls3a ws153">在程序中只能被执行一次。如果你稍后想改变日志配置，就需要先</span></div><div class="t m0 x5 h9 y251e ff1 fs3 fc0 sc0 ls0 ws14">获取 <span class="ff6 ws893">root<span class="_ _11"> </span>logger </span>，然后直接修改它。例如：</div><div class="t m0 x5 hf y32a7 ff8 fs5 fc0 sc0 ls0 ws13a">logging<span class="fc6 ls34">.</span>getLogger()<span class="fc6 ls34">.</span><span class="ws15f">level <span class="fc6 ls32">=</span></span>logging<span class="fc6 ls34">.</span>DEBUG</div><div class="t m0 x0 h9 y32a8 ff1 fs3 fc0 sc0 ls14 ws1250">需要强调的是本节只是演示了 <span class="ff6 ls0 ws183">logging </span><span class="ws174">模块的一些基本用法<span class="_ _1"></span>。它可以做更多更高</span></div><div class="t m0 x5 h7 y32a9 ff1 fs3 fc0 sc0 ls0 ws14">级的定制。关于日志定制化一个很好的资源是 <span class="ff4 fc3 ws9c">Logging Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 wsd97">15.11.<span class="_ _36"> </span>13.11 <span class="ff1 wse2d">给简单脚本增加日志功能 </span>509</div><a class="l" href="https://docs.python.org/3/howto/logging-cookbook.html"><div class="d m1" style="border-style:none;position:absolute;left:472.501500px;bottom:250.257000px;width:96.119000px;height:16.821000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

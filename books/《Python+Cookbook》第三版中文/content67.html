<div id="pf43" class="pf w0 h0" data-page-no="43"><div class="pc pc43 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg43.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf ye9 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">a</span></div><div class="t m0 x5 hf yea ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13b">pýtĥöñ is awesome\n<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf yeb ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">b<span class="fc6 ls33">=</span><span class="ls0 ws13a">unicodedata<span class="fc6 ls34">.</span>normalize(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">NFD<span class="ff9 ws13b">&apos;</span></span><span class="ws4">, a)</span></span></span></div><div class="t m0 x5 hf yec ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls34">b<span class="fc6 ls0 ws13a">.<span class="fc0">encode(</span></span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">ascii</span>&apos;</span><span class="ls32">,</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">ignore</span>&apos;</span>)<span class="fc6 ls0 ws13a">.<span class="fc0">decode(</span></span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">ascii<span class="ff9 ws13b">&apos;</span><span class="fc0">)</span></span></span></span></div><div class="t m0 x5 hf yed ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13b">python is awesome\n<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf yee ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y74b ff1 fs3 fc0 sc0 ls2b ws39c">这里的标准化操作将原来的文本分解为单独的和音符。接下来的 <span class="ff4 ls0 ws39d">ASCII <span class="ff1 wsa0">编<span class="_ _6"></span>码</span><span class="ls6">/</span><span class="ff1 wsa0">解码</span></span></div><div class="t m0 x5 h9 y74c ff1 fs3 fc0 sc0 ls13 wse5">只是简单的一下子丢弃掉那些字符<span class="_ _1"></span>。当然，这种方法仅仅只在最后的目标就是获取到<span class="_ _c"></span></div><div class="t m0 x5 h7 y74d ff1 fs3 fc0 sc0 ls0 ws14">文本对应 <span class="ff4 ws39e">A<span class="_ _1"></span>CSI<span class="_ _6"></span>I <span class="ff1">表示的时候生效。</span></span></div><div class="t m0 x5 he y74e ff2 fs2 fc4 sc0 ls0 ws212">4.12.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 y74f ff1 fs3 fc0 sc0 ls3a ws153">文本字符清理一个最主要的问题应该是运行的性能。一般来讲，代码越简单运行越</div><div class="t m0 x5 h9 y750 ff1 fs3 fc0 sc0 ls0 ws39f">快。对<span class="_ _6"></span>于简<span class="_ _6"></span>单的<span class="_ _6"></span>替换<span class="_ _6"></span>操作， <span class="ff6 ws3a0">str.replace() </span><span class="wsa0">方<span class="_ _6"></span>法通<span class="_ _6"></span>常是<span class="_ _6"></span>最快<span class="_ _6"></span>的，甚<span class="_ _6"></span>至在<span class="_ _6"></span>你需<span class="_ _6"></span>要多<span class="_ _6"></span>次调</span></div><div class="t m0 x5 h9 y751 ff1 fs3 fc0 sc0 ls0">用的时候。比如，为了清理空白字符，你可以这样做：</div><div class="t m0 x5 hf y752 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">clean_spaces<span class="fc0">(s):</span></span></div><div class="t m0 x15 hf y753 ff8 fs5 fc0 sc0 ls32">s<span class="fc6 ls33">=</span><span class="ls34">s<span class="fc6 ls0 ws13a">.<span class="fc0">replace(</span></span><span class="ff9 fc9">&apos;<span class="ff7 ls0 ws156">\r</span>&apos;</span></span>,<span class="ff9 fc9 ls34">&apos;&apos;</span><span class="ls0">)</span></div><div class="t m0 x15 hf y754 ff8 fs5 fc0 sc0 ls32">s<span class="fc6 ls33">=</span><span class="ls34">s<span class="fc6 ls0 ws13a">.<span class="fc0">replace(</span></span><span class="ff9 fc9">&apos;<span class="ff7 ls0 ws156">\t</span>&apos;</span></span>,<span class="ff9 fc9 ls0 ws286">&apos; &apos;</span><span class="ls0">)</span></div><div class="t m0 x15 hf y755 ff8 fs5 fc0 sc0 ls32">s<span class="fc6 ls33">=</span><span class="ls34">s<span class="fc6 ls0 ws13a">.<span class="fc0">replace(</span></span><span class="ff9 fc9">&apos;<span class="ff7 ls0 ws156">\f</span>&apos;</span></span>,<span class="ff9 fc9 ls0 ws286">&apos; &apos;</span><span class="ls0">)</span></div><div class="t m0 x15 hf y756 ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 fc0">s</span></div><div class="t m0 x0 h9 y757 ff1 fs3 fc0 sc0 ls14 ws3a1">如果你去测试的话<span class="_ _1"></span>，你就会发现这种方式会比使用 <span class="ff6 ls0 ws3a2">translate() </span><span class="ws174">或者正则表达式<span class="_ _1"></span></span></div><div class="t m0 x5 h9 y758 ff1 fs3 fc0 sc0 ls0">要快很多。</div><div class="t m0 x0 h9 y759 ff1 fs3 fc0 sc0 ls98 ws3a3">另一方面<span class="_ _c"></span>，如果你需要执行任何复杂字符对字符的重新映射或者删除操作的话<span class="_ _c"></span>，<span class="_ _c"></span></div><div class="t m0 x5 h9 y75a ff6 fs3 fc0 sc0 ls0 ws17c">tanslate() <span class="ff1">方法会非常的快。</span></div><div class="t m0 x0 h9 y75b ff1 fs3 fc0 sc0 ls3a ws153">从大的方面来讲，对于你的应用程序来说性能是你不得不去自己研究的东西。不幸</div><div class="t m0 x5 h9 y75c ff1 fs3 fc0 sc0 ls1e ws111">的是<span class="_ _1"></span>，我们不可能给你建议一个特定的技术<span class="_ _1"></span>，使它能够适应所有的情况。因此实<span class="_ _1"></span>际情</div><div class="t m0 x5 h9 y75d ff1 fs3 fc0 sc0 ls0">况中需要你自己去尝试不同的方法并评估它。</div><div class="t m0 x0 h9 y75e ff1 fs3 fc0 sc0 ls3a ws153">尽管这一节集中讨论的是文本，但是类似的技术也可以适用于字节，包括简单的替</div><div class="t m0 x5 h9 y75f ff1 fs3 fc0 sc0 ls0">换，转换和正则表达式。</div><div class="t m0 x5 hd y56e ff2 fs4 fc4 sc0 ls0 ws211">4.13<span class="_ _e"> </span>2.13 <span class="ff1">字符串对齐</span></div><div class="t m0 x5 he y760 ff2 fs2 fc4 sc0 ls0 ws212">4.13.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 y761 ff1 fs3 fc0 sc0 ls0">你想通过某种对齐方式来格式化字符串</div><div class="t m0 x5 he y762 ff2 fs2 fc4 sc0 ls0 ws212">4.13.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h7 y763 ff1 fs3 fc0 sc0 ls6c ws3a4">对于基本的字符串对齐操作<span class="_ _1"></span>，可以使用字符串的 <span class="ff6 ls0 ws3a5">ljust() <span class="ff4 ls99">,</span><span class="ws3a6">rjust() </span></span><span class="ls9a">和<span class="ff6 ls0">center()</span></span></div><div class="t m0 x5 h9 y764 ff1 fs3 fc0 sc0 ls0">方法。比如：</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">4.13.<span class="_ _5"> </span>2.13 <span class="ff1 ws3a7">字符串对齐 </span>58</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

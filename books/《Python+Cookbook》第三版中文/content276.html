<div id="pf114" class="pf w0 h0" data-page-no="114"><div class="pc pc114 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg114.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 h10 y181 ff7 fs5 fc12 sc0 ls0">@Unsigned</div><div class="t m0 x5 hf y182 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">UnsignedInteger<span class="ff8 fc0">(Integer):</span></span></div><div class="t m0 x15 h10 y183 ff7 fs5 fca sc0 ls0">pass</div><div class="t m0 x5 hf y186 ff7 fs5 fc12 sc0 ls0 ws156">@Typed<span class="ff8 fc0 ls34">(<span class="fca ls0 ws13a">float<span class="fc0">)</span></span></span></div><div class="t m0 x5 hf y187 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">Float<span class="ff8 fc0">(Descriptor):</span></span></div><div class="t m0 x15 h10 y188 ff7 fs5 fca sc0 ls0">pass</div><div class="t m0 x5 h10 y990 ff7 fs5 fc12 sc0 ls0">@Unsigned</div><div class="t m0 x5 hf y991 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">UnsignedFloat<span class="ff8 fc0">(Float):</span></span></div><div class="t m0 x15 h10 y992 ff7 fs5 fca sc0 ls0">pass</div><div class="t m0 x5 hf y994 ff7 fs5 fc12 sc0 ls0 ws156">@Typed<span class="ff8 fc0 ls34">(<span class="fca ls0 ws13a">str<span class="fc0">)</span></span></span></div><div class="t m0 x5 hf y995 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">String<span class="ff8 fc0">(Descriptor):</span></span></div><div class="t m0 x15 h10 y996 ff7 fs5 fca sc0 ls0">pass</div><div class="t m0 x5 h10 ya71 ff7 fs5 fc12 sc0 ls0">@MaxSized</div><div class="t m0 x5 hf y999 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">SizedString<span class="ff8 fc0">(String):</span></span></div><div class="t m0 x15 h10 y99a ff7 fs5 fca sc0 ls0">pass</div><div class="t m0 x0 h9 y1da2 ff1 fs3 fc0 sc0 ls3a ws153">这种方式定义的类跟之前的效果一样，而且执行速度会更快。设置一个简单的类型</div><div class="t m0 x5 h7 y1da3 ff1 fs3 fc0 sc0 ls82 wsb0c">属性的值，装饰器方式要比之前的混入类的方式几乎快 <span class="ff4 ls0 wsa5">100%</span><span class="ws2f9">。现在你应该庆幸自己读</span></div><div class="t m0 x5 h9 y1da4 ff1 fs3 fc0 sc0 ls0 wsa0">完了本节全部内容了吧？<span class="fff wsb0d">ˆ ˆ</span></div><div class="t m0 x5 hd y10da ff2 fs4 fc4 sc0 ls0 ws211">10.14<span class="_ _e"> </span>8.14 <span class="ff1">实现自定义容器</span></div><div class="t m0 x5 he y1da5 ff2 fs2 fc4 sc0 ls0 wsadf">10.14.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 y1da6 ff1 fs3 fc0 sc0 ls3a ws153">你想实现一个自定义的类来模拟内置的容器类功能，比如列表和字典。但是你不确</div><div class="t m0 x5 h9 y1da7 ff1 fs3 fc0 sc0 ls0">定到底要实现哪些方法。</div><div class="t m0 x5 he y1da8 ff2 fs2 fc4 sc0 ls0 wsadf">10.14.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 y1da9 ff6 fs3 fc0 sc0 ls0 ws686">collections <span class="ff1 ls13 wse5">定义了很多抽象基类<span class="_ _1"></span>，当你想自定义容器类的时候它们会非常有用。<span class="_ _1"></span></span></div><div class="t m0 x5 h9 y7c5 ff1 fs3 fc0 sc0 ls0 ws63">比如你想让你的类支持迭代，那就让你的类继承 <span class="ff6 wsb0e">collections.Iterable </span>即可：</div><div class="t m0 x5 h10 y18f3 ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc">collections</span></div><div class="t m0 x5 hf y1daa ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ls34">A</span><span class="ff8 fc0 ws13a">(collections<span class="fc6 ls34">.</span>Iterable):</span></div><div class="t m0 x15 h10 y1dab ff7 fs5 fca sc0 ls0">pass</div><div class="t m0 x0 h7 y1dac ff1 fs3 fc0 sc0 ls0 ws38">不过你需要实现 <span class="ff6 wsb0e">collections.Iterable </span><span class="wsa0">所有的抽象方法，否则会报错<span class="ff4">:</span></span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 wsae0">10.14.<span class="_ _5"> </span>8.14 <span class="ff1 wsb0f">实现自定义容器 </span>267</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

<div id="pf82" class="pf w0 h0" data-page-no="82"><div class="pc pc82 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg82.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 h10 ye49 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf ye4a ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 ye4b ff1 fs3 fc0 sc0 ls0">如果你想跳过开始部分的注释行的话，可以这样做：</div><div class="t m0 x5 hf ye4c ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws15a">from <span class="fcc ws285">itertools </span><span class="ws146">import <span class="ff8 fc0">dropwhile</span></span></span></div><div class="t m0 x5 hf ye4d ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws15a">with <span class="ff8 ws13a">open<span class="fc0 ls34">(<span class="ff9 fc9">&apos;</span></span><span class="fc9">/etc/passwd<span class="ff9 ls34">&apos;</span><span class="fc0 ls32">)</span></span></span><span class="ws157">as <span class="ff8 fc0">f:</span></span></span></div><div class="t m0 x5 hf ye4e ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws139">for <span class="ff8 fc0 ws161">line </span><span class="ws160">in <span class="ff8 fc0 ws13a">dropwhile(</span><span class="ws146">lambda <span class="ff8 fc0 ws13b">line: line<span class="fc6 ls34">.</span><span class="ws13a">startswith(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">#<span class="ff9 ls34">&apos;</span></span><span class="ws4">), f):</span></span></span></span></span></span></div><div class="t m0 x5 hf ye4f ff7 fs5 fc5 sc0 ls0 ws1a3">... <span class="fca ws156">print<span class="ff8 fc0 ws4">(line, end<span class="fc6 ws13a">=<span class="ff9 fc9 ls34">&apos;&apos;</span></span>)</span></span></div><div class="t m0 x5 h10 ye50 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf ye51 ff8 fs5 fc8 sc0 ls0 ws4">nobody:*:-2:-2:Unprivileged User:/var/empty:/usr/bin/false</div><div class="t m0 x5 hf ye52 ff8 fs5 fc8 sc0 ls0 ws4">root:*:0:0:System Administrator:/var/root:/bin/sh</div><div class="t m0 x5 h10 ye53 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf ye54 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 ye55 ff1 fs3 fc0 sc0 ls3a ws153">这个例子是基于根据某个测试函数跳过开始的元素。如果你已经明确知道了要跳过</div><div class="t m0 x5 h9 ye56 ff1 fs3 fc0 sc0 ls0 ws38">的元素的个数的话，那么可以使用 <span class="ff6 ws5a3">itertools.islice() </span>来代替。比如：</div><div class="t m0 x5 hf ye57 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws15a">from <span class="fcc ws285">itertools </span><span class="ws146">import <span class="ff8 fc0">islice</span></span></span></div><div class="t m0 x5 hf ye58 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws15f">items <span class="fc6 ls33">=</span><span class="ws13a">[<span class="ff9 fc9 ls34">&apos;<span class="ff8">a</span>&apos;</span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;<span class="ff8">b</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">,</span></span><span class="ff9 fc9 ws13b">&apos;<span class="ff8 ls34">c<span class="ff9">&apos;</span></span></span><span class="ls32">,<span class="fc7 ls34">1</span><span class="ls33">,</span></span><span class="fc7">4</span><span class="ls33">,</span><span class="fc7">10</span><span class="ls33">,</span><span class="fc7">15</span>]</span></span></div><div class="t m0 x5 hf ye59 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">for <span class="ff8 fc0 ls32">x</span><span class="ws157">in <span class="ff8 fc0 ws5a4">islice(items, <span class="fc7 ws13a">3</span><span class="ls33">,</span><span class="fca ws13a">None</span>):</span></span></span></div><div class="t m0 x5 hf ye5a ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws156">print<span class="ff8 fc0">(x)</span></span></div><div class="t m0 x5 h10 ye5b ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf ye5c ff8 fs5 fc8 sc0 ls0">1</div><div class="t m0 x5 hf ye5d ff8 fs5 fc8 sc0 ls0">4</div><div class="t m0 x5 hf ye5e ff8 fs5 fc8 sc0 ls0">10</div><div class="t m0 x5 hf ye5f ff8 fs5 fc8 sc0 ls0">15</div><div class="t m0 x5 hf ye60 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 ye61 ff1 fs3 fc0 sc0 ls0 ws5a5">在这<span class="_ _6"></span>个例<span class="_ _6"></span>子中， <span class="ff6 ws5a6">islice() </span><span class="ws5a7">函<span class="_ _6"></span>数最<span class="_ _6"></span>后那<span class="_ _6"></span>个 <span class="ff6 ws5a8">None </span><span class="ls17 ws5a9">参数指定了你要获取从第 <span class="ff4 lsed">3</span></span><span class="wsa0">个到<span class="_ _6"></span>最</span></span></div><div class="t m0 x5 h7 ye62 ff1 fs3 fc0 sc0 ls19 ws14b">后的所有元素，如果 <span class="ff6 ls0 ws5aa">None </span><span class="lsee">和<span class="ff4 lsef">3</span></span><span class="ws22a">的位置对调<span class="_ _1"></span>，意思就是仅仅获取前三个元素恰恰相反，<span class="_ _1"></span></span></div><div class="t m0 x5 h7 ye63 ff4 fs3 fc0 sc0 ls0 wsa5">(<span class="ff1 ws14">这个跟切片的相反操作 <span class="ff6 ws5ab">[3:] </span><span class="ls4">和</span><span class="ff6 ws27b">[:3] </span><span class="wsa0">原理是一样的</span></span>)<span class="ff1">。</span></div><div class="t m0 x5 he ye64 ff2 fs2 fc4 sc0 ls0 ws135">6.8.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 ye65 ff1 fs3 fc0 sc0 ls0 ws5ac">函数 <span class="ff6 ws5ad">dropwhile() </span><span class="lsf0">和</span><span class="ff6 ws5ae">islice() </span><span class="wsa0">其实就是两个帮助函数，为的就是避免写出下面这</span></div><div class="t m0 x5 h9 ye66 ff1 fs3 fc0 sc0 ls0">种冗余代码：</div><div class="t m0 x5 hf ye67 ff7 fs5 fca sc0 ls0 ws15a">with <span class="ff8 ws13a">open<span class="fc0">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">/etc/passwd<span class="ff9 ls34">&apos;</span></span><span class="ls32">)</span></span></span><span class="ws157">as <span class="ff8 fc0">f:</span></span></div><div class="t m0 x15 h11 ye68 ffa fs5 fcd sc0 ls0 ws4"># Skip over initial comments</div><div class="t m0 x15 hf ye69 ff7 fs5 fca sc0 ls0 ws16a">while <span class="ff8 ws13a">True<span class="fc0">:</span></span></div><div class="t m0 x16 hf ye6a ff8 fs5 fc0 sc0 ls0 ws161">line <span class="fc6 ls33">=</span><span class="fca ws13a">next</span><span class="ws158">(f, <span class="ff9 fc9 ws13b">&apos;&apos;</span>)</span></div><div class="t m0 x16 hf ye6b ff7 fs5 fca sc0 ls0 ws157">if not <span class="ff8 fc0 ws13a">line<span class="fc6 ls34">.</span>startswith(<span class="ff9 fc9 ws13b">&apos;<span class="ff8 ls34">#<span class="ff9">&apos;</span></span></span>):</span></div><div class="t m0 x17 h10 ye6c ff7 fs5 fca sc0 ls0">break</div><div class="t m0 x15 h11 ye6d ffa fs5 fcd sc0 ls0 ws4"># Process remaining lines</div><div class="t m0 x15 hf ye6e ff7 fs5 fca sc0 ls0 ws16a">while <span class="ff8 fc0">line:</span></div><div class="t m0 x16 h11 ye6f ffa fs5 fcd sc0 ls0 ws4"># Replace with useful processing</div><div class="t m0 x16 hf ye70 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ws4">(line, end<span class="fc6 ws13a">=<span class="ff9 fc9 ls34">&apos;&apos;</span></span>)</span></div><div class="t m0 x16 hf ye71 ff8 fs5 fc0 sc0 ls0 ws161">line <span class="fc6 ls33">=</span><span class="fca ws13a">next</span><span class="ws158">(f, <span class="fca ws13a">None</span>)</span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">6.8.<span class="_ _5"> </span>4.8 <span class="ff1 ws599">跳过可迭代对象的开始部分 </span>121</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

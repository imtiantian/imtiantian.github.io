<div id="pf100" class="pf w0 h0" data-page-no="100"><div class="pc pc100 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg100.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x0 h7 y2a ff1 fs3 fc0 sc0 ls2a">在<span class="ff4 ls0 ws72c">Python </span><span class="ls1f wsa9c">社区中对于 </span><span class="ff6 ls0 ws6bf">super() </span><span class="ls1f ws113">的使用有时候会引来一些争议。尽管如此，如果一</span></div><div class="t m0 x5 h7 y2b ff1 fs3 fc0 sc0 ls0 wsa0">切顺利的话，你应该在你最新代码中使用它。<span class="_ _1"></span><span class="ff4 wsa9d">Ra<span class="_ _1"></span>ymond Hettinger <span class="ff1">为此写了一篇非常好</span></span></div><div class="t m0 x5 h7 y2c ff1 fs3 fc0 sc0 ls0 wsa9e">的文章 <span class="fc3 lsb">“<span class="ff4 ls0 wsa5">Python</span><span class="ls171">’<span class="ff4 ls0 wsa9f">s sup<span class="_ _6"></span>er() Considered Sup<span class="_ _6"></span>er!</span><span class="ls10e">”</span></span></span><span class="ls1f ws113">，通过大量的例子向我们解释了为什</span></div><div class="t m0 x5 h9 y2d ff1 fs3 fc0 sc0 ls4">么<span class="ff6 ls0 ws23a">super() <span class="ff1">是极好的。</span></span></div><div class="t m0 x5 hd y1bbb ff2 fs4 fc4 sc0 ls0 ws9c6">10.8<span class="_ _e"> </span>8.8 <span class="ff1 ws357">子类中扩展 </span><span class="wsd3">p<span class="_ _c"></span>rop<span class="_ _0"></span>ert<span class="_ _d"></span>y</span></div><div class="t m0 x5 he y1bbc ff2 fs2 fc4 sc0 ls0 ws212">10.8.1 <span class="ff1">问题</span></div><div class="t m0 x0 h7 y1bbd ff1 fs3 fc0 sc0 ls0 ws38">在子类中，你想要扩展定义在父类中的 <span class="ff4 wsa75">prop<span class="_ _6"></span>ert<span class="_ _1"></span>y <span class="ff1">的功能。</span></span></div><div class="t m0 x5 he y1bbe ff2 fs2 fc4 sc0 ls0 ws212">10.8.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h7 y1bbf ff1 fs3 fc0 sc0 ls0 ws14">考虑如下的代码，它定义了一个 <span class="ff4 wsa5">prop<span class="_ _6"></span>ert<span class="_ _1"></span>y<span class="ff1">：</span></span></div><div class="t m0 x5 hf y1bc0 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">Person<span class="ff8 fc0">:</span></span></div><div class="t m0 x15 hf y1bc1 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span><span class="ws4">, name):</span></span></span></div><div class="t m0 x16 hf y1bc2 ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws13c">name </span><span class="ls33">=</span><span class="fc0">name</span></span></div><div class="t m0 x15 h11 y1bc3 ffa fs5 fcd sc0 ls0 ws13b"># Getter function</div><div class="t m0 x15 h10 y1bc4 ff7 fs5 fc12 sc0 ls0">@property</div><div class="t m0 x15 hf y1bc5 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">name<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1bc6 ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 ws13a">self<span class="fc6 ls34">.</span><span class="fc0">_name</span></span></div><div class="t m0 x15 h11 y1bc7 ffa fs5 fcd sc0 ls0 ws13b"># Setter function</div><div class="t m0 x15 h10 y1bc8 ff7 fs5 fc12 sc0 ls0">@name.setter</div><div class="t m0 x15 hf y1bc9 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">name<span class="fc0">(<span class="fca">self</span><span class="ws4">, value):</span></span></span></div><div class="t m0 x16 hf y1bca ff7 fs5 fca sc0 ls0 ws157">if not <span class="ff8 ws13a">isinstance<span class="fc0 ws155">(value, </span>str<span class="fc0">):</span></span></div><div class="t m0 x17 hf y1bcb ff7 fs5 fca sc0 ls0 ws16a">raise <span class="ff8 ws13a">TypeError<span class="fc0">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Expected a string<span class="ff9 ls34">&apos;</span></span>)</span></span></div><div class="t m0 x16 hf y1bcc ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws458">_name </span><span class="ls32">=</span><span class="fc0">value</span></span></div><div class="t m0 x15 h11 y1bcd ffa fs5 fcd sc0 ls0 ws13b"># Deleter function</div><div class="t m0 x15 h10 y1bce ff7 fs5 fc12 sc0 ls0">@name.deleter</div><div class="t m0 x15 hf y1bcf ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">name<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1bd0 ff7 fs5 fca sc0 ls0 ws16a">raise <span class="ff8 ws13a">AttributeError<span class="fc0 ls34">(</span><span class="fc9">&quot;Can<span class="ff9 ls34">&apos;</span><span class="ws13b">t delete attribute&quot;<span class="fc0">)</span></span></span></span></div><div class="t m0 x0 h7 y1bd1 ff1 fs3 fc0 sc0 ls0 ws38">下面是一个示例类，它继承自 <span class="ff4 wsaa0">P<span class="_ _1"></span>erson <span class="ff1 ws14">并扩展了 <span class="ff6 ws17a">name </span>属性的功能：</span></span></div><div class="t m0 x5 hf y1bd2 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">SubPerson<span class="ff8 fc0">(Person):</span></span></div><div class="t m0 x15 h10 y1a2 ff7 fs5 fc12 sc0 ls0">@property</div><div class="t m0 x15 hf y1a3 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">name<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1a4 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13b">Getting name<span class="ff9">&apos;</span><span class="fc0">)</span></span></span></span></div><div class="t m0 x16 hf y1a5 ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 ws13a">super<span class="fc0">()<span class="fc6 ls34">.</span>name</span></span></div><div class="t m0 x15 h10 y1a7 ff7 fs5 fc12 sc0 ls0">@name.setter</div><div class="t m0 x15 hf y1a8 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">name<span class="fc0">(<span class="fca">self</span><span class="ws4">, value):</span></span></span></div><div class="t m0 x16 hf y1a9 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13b">Setting name to</span>&apos;</span><span class="ls0 ws13b">, value)</span></span></div><div class="t m0 x16 hf y1aa ff8 fs5 fca sc0 ls0 ws13a">super<span class="fc0 ws4">(SubPerson, SubPerson)<span class="fc6 ls34">.</span><span class="ws13a">name<span class="fc6 ls34">.</span>__set__(</span></span>self<span class="fc0 ws13b">, value)</span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws9da">10.8.<span class="_ _5"> </span>8.8 <span class="ff1 ws7da">子类中扩展 </span><span class="wsaa1">p<span class="_ _c"></span>rop<span class="_ _0"></span>ert<span class="_ _c"></span>y 247</span></div><a class="l" href="http://rhettinger.wordpress.com/2011/05/26/super-considered-super"><div class="d m1" style="border-style:none;position:absolute;left:167.719500px;bottom:1088.544000px;width:216.094000px;height:16.820000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

<div id="pf20" class="pf w0 h0" data-page-no="20"><div class="pc pc20 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg20.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y1ab ff8 fs5 fc0 sc0 ls0 ws145">SHARES <span class="fc6 ls33">=</span><span class="fca ws13a">slice</span><span class="ls34">(</span><span class="fc7 ws13a">20</span><span class="ls33">,</span><span class="fc7 ws13a">23</span>)</div><div class="t m0 x5 hf y1ac ff8 fs5 fc0 sc0 ls0 ws15f">PRICE <span class="fc6 ls33">=</span><span class="fca ws13a">slice</span><span class="ls34">(</span><span class="fc7 ws13a">31</span><span class="ls32">,</span><span class="fc7 ws13a">37</span>)</div><div class="t m0 x5 hf y1ad ff8 fs5 fc0 sc0 ls0 ws13c">cost <span class="fc6 ls32">=</span><span class="fca ws13a">int</span><span class="ws227">(record[SHARES]) <span class="fc6 ls32">*</span><span class="fca ws13a">float</span>(record[PRICE])</span></div><div class="t m0 x0 h9 y30d ff1 fs3 fc0 sc0 ls3a ws153">第二种版本中，你避免了大量无法理解的硬编码下标，使得你的代码更加清晰可读</div><div class="t m0 x5 h9 y30e ff1 fs3 fc0 sc0 ls0">了。</div><div class="t m0 x5 he y30f ff2 fs2 fc4 sc0 ls0 ws212">3.11.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 y310 ff1 fs3 fc0 sc0 ls63 ws21f">一般来讲<span class="_ _c"></span>，代码中如果出现大量的硬编码下标值会使得可读性和可维护性大大降<span class="_ _1"></span></div><div class="t m0 x5 h9 y311 ff1 fs3 fc0 sc0 ls0 wsa0">低。<span class="_ _6"></span>比如，<span class="_ _6"></span>如<span class="_ _6"></span>果<span class="_ _6"></span>你<span class="_ _6"></span>回<span class="_ _6"></span>过来<span class="_ _6"></span>看<span class="_ _6"></span>看<span class="_ _6"></span>一<span class="_ _6"></span>年<span class="_ _6"></span>前你<span class="_ _6"></span>写<span class="_ _6"></span>的<span class="_ _6"></span>代<span class="_ _6"></span>码，<span class="_ _6"></span>你<span class="_ _6"></span>会摸<span class="_ _6"></span>着<span class="_ _6"></span>脑<span class="_ _6"></span>袋<span class="_ _6"></span>想<span class="_ _6"></span>那时<span class="_ _6"></span>候<span class="_ _6"></span>自<span class="_ _6"></span>己<span class="_ _6"></span>到<span class="_ _6"></span>底想</div><div class="t m0 x5 h9 y312 ff1 fs3 fc0 sc0 ls0">干嘛啊。这里的解决方案是一个很简单的方法让你更加清晰的表达代码到底要做什么。</div><div class="t m0 x0 h9 y313 ff1 fs3 fc0 sc0 ls0 ws228">内置<span class="_ _6"></span>的 <span class="ff6 ws229">slice() </span><span class="ls19 ws22a">函数创建了一个切片对象，可以被用在任何切片允许使用的地方<span class="_ _c"></span>。</span></div><div class="t m0 x5 h9 y314 ff1 fs3 fc0 sc0 ls0">比如：</div><div class="t m0 x5 hf y315 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws15f">items <span class="fc6 ls33">=</span><span class="ws13a">[<span class="fc7 ls34">0</span><span class="ls33">,</span><span class="fc7">1</span><span class="ls33">,<span class="fc7 ls34">2</span><span class="ls32">,<span class="fc7 ls34">3</span>,<span class="fc7 ls34">4</span>,<span class="fc7 ls34">5</span></span>,</span><span class="fc7">6</span>]</span></span></div><div class="t m0 x5 hf y316 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">a<span class="fc6 ls33">=<span class="fca ls0 ws13a">slice</span></span><span class="ls34">(<span class="fc7">2</span></span>,<span class="fc7 ls34">4</span><span class="ls0">)</span></span></div><div class="t m0 x5 hf y317 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">items[<span class="fc7 ls34">2<span class="fc0">:</span><span class="ls0">4</span></span>]</span></div><div class="t m0 x5 hf y318 ff8 fs5 fc8 sc0 ls0 ws4">[2, 3]</div><div class="t m0 x5 hf y319 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">items[a]</span></div><div class="t m0 x5 hf y31a ff8 fs5 fc8 sc0 ls0 ws4">[2, 3]</div><div class="t m0 x5 hf y31b ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws1f5">items[a] <span class="fc6 ls33">=</span><span class="ls34">[</span><span class="fc7 ws13a">10</span><span class="ls34">,</span><span class="fc7 ws13a">11</span>]</span></div><div class="t m0 x5 hf y31c ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">items</span></div><div class="t m0 x5 hf y31d ff8 fs5 fc8 sc0 ls0 ws4">[0, 1, 10, 11, 4, 5, 6]</div><div class="t m0 x5 hf y31e ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">del <span class="ff8 fc0">items[a]</span></span></div><div class="t m0 x5 hf y31f ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">items</span></div><div class="t m0 x5 hf y320 ff8 fs5 fc8 sc0 ls0 ws4">[0, 1, 4, 5, 6]</div><div class="t m0 x0 h7 y321 ff1 fs3 fc0 sc0 ls0 ws22b">如果你有一个切片对象 <span class="ff4 ls6">a</span><span class="ws22c">，你可以分别调用它的 <span class="ff6 ws22d">a.start <span class="ff4 ls66">,</span><span class="ws22e">a.stop <span class="ff4 ls66">,</span>a.step </span></span>属性来</span></div><div class="t m0 x5 h9 y322 ff1 fs3 fc0 sc0 ls0">获取更多的信息。比如：</div><div class="t m0 x5 hf y323 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">a<span class="fc6 ls33">=<span class="fca ls0 ws13a">slice</span></span><span class="ls34">(<span class="fc7">5</span></span>,<span class="fc7 ls0 ws13a">50</span>,<span class="fc7 ls34">2</span><span class="ls0">)</span></span></div><div class="t m0 x5 hf y324 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls34">a<span class="fc6 ls0 ws13a">.<span class="fc0">start</span></span></span></div><div class="t m0 x5 hf y325 ff8 fs5 fc8 sc0 ls0">5</div><div class="t m0 x5 hf y326 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls34">a<span class="fc6 ls0 ws13a">.<span class="fc0">stop</span></span></span></div><div class="t m0 x5 hf y327 ff8 fs5 fc8 sc0 ls0">50</div><div class="t m0 x5 hf y328 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls34">a<span class="fc6 ls0 ws13a">.<span class="fc0">step</span></span></span></div><div class="t m0 x5 hf y329 ff8 fs5 fc8 sc0 ls0">2</div><div class="t m0 x5 hf y32a ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y32b ff1 fs3 fc0 sc0 ls14 ws22f">另外<span class="_ _1"></span>，你还能通过调用切片的 <span class="ff6 ls0 ws230">indices(size) </span><span class="ws174">方法将它映射到一个确定大小的序<span class="_ _1"></span></span></div><div class="t m0 x5 h9 y32c ff1 fs3 fc0 sc0 ls18 ws231">列上，这个方法返回一个三元组 <span class="ff6 ls0 ws232">(start, stop, step)<span class="_ _16"> </span></span><span class="ws110">，所有值都会被合适的缩小以</span></div><div class="t m0 x5 h9 y32d ff1 fs3 fc0 sc0 ls0 ws14">满足边界限制，从而使用的时候避免出现 <span class="ff6 ws17c">IndexError </span>异常。比如：</div><div class="t m0 x5 hf y32e ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">s<span class="fc6 ls33">=<span class="ff9 fc9 ls34">&apos;<span class="ff8 ls0 ws13a">HelloWorld<span class="ff9">&apos;</span></span></span></span></span></div><div class="t m0 x5 hf y32f ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls34">a<span class="fc6 ls0 ws13a">.<span class="fc0">indices(<span class="fca">len</span>(s))</span></span></span></div><div class="t m0 x5 hf y330 ff8 fs5 fc8 sc0 ls0 ws4">(5, 10, 2)</div><div class="t m0 x5 hf y331 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">for <span class="ff8 fc0 ls32">i</span><span class="ws157">in <span class="ff8 ws13a">range<span class="fc0 ls34">(<span class="fc6">*</span><span class="ls0">a</span><span class="fc6">.</span><span class="ls0">indices(</span></span>len<span class="fc0">(s))):</span></span></span></span></div><div class="t m0 x5 hf y332 ff7 fs5 fc5 sc0 ls0 ws139">... <span class="fca ws156">print<span class="ff8 fc0">(s[i])</span></span></div><div class="t m0 x5 h10 y333 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">3.11.<span class="_ _5"> </span>1.11 <span class="ff1 ws226">命名切片 </span>23</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

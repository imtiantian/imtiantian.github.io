<div id="pf1a4" class="pf w0 h0" data-page-no="1a4"><div class="pc pc1a4 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg1a4.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x15 hf y1ab ff8 fs5 fc0 sc0 ls0 ws13a">httpd<span class="fc6">.</span>serve_forever()</div><div class="t m0 x0 h9 y2ac1 ff1 fs3 fc0 sc0 ls0 ws38">要测试下这个服务器，你可以使用一个浏览器或 <span class="ff6 ws25d">urllib </span>和它交互。例如：</div><div class="t m0 x5 hf y2ac2 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">u<span class="fc6 ls33">=</span><span class="ls0 ws13a">urlopen(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">http://localhost:8080/hello?name=Guido<span class="ff9 ls34">&apos;</span></span>)</span></span></div><div class="t m0 x5 hf y2ac3 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws156">print<span class="ff8 fc0 ws13a">(u<span class="fc6 ls34">.</span>read()<span class="fc6 ls34">.</span>decode(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">utf-8<span class="ff9 ls34">&apos;</span></span>))</span></span></div><div class="t m0 x5 hf y2ac4 ff8 fs5 fc8 sc0 ls0">&lt;html&gt;</div><div class="t m0 x19 hf y2ac5 ff8 fs5 fc8 sc0 ls0">&lt;head&gt;</div><div class="t m0 x31 hf y2ac6 ff8 fs5 fc8 sc0 ls0 ws13b">&lt;title&gt;Hello Guido&lt;/title&gt;</div><div class="t m0 x3c hf y1f88 ff8 fs5 fc8 sc0 ls0">&lt;/head&gt;</div><div class="t m0 x3c hf y1f89 ff8 fs5 fc8 sc0 ls0">&lt;body&gt;</div><div class="t m0 x31 hf y1f8a ff8 fs5 fc8 sc0 ls0 ws13b">&lt;h1&gt;Hello Guido!&lt;/h1&gt;</div><div class="t m0 x3c hf y1f8b ff8 fs5 fc8 sc0 ls0">&lt;/body&gt;</div><div class="t m0 x5 hf y1f8c ff8 fs5 fc8 sc0 ls0">&lt;/html&gt;</div><div class="t m0 x5 hf y1f8e ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">u<span class="fc6 ls33">=</span><span class="ls0 ws13a">urlopen(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">http://localhost:8080/localtime<span class="ff9 ls34">&apos;</span></span>)</span></span></div><div class="t m0 x5 hf y1f8f ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws156">print<span class="ff8 fc0 ws13a">(u<span class="fc6 ls34">.</span>read()<span class="fc6 ls34">.</span>decode(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">utf-8<span class="ff9 ls34">&apos;</span></span>))</span></span></div><div class="t m0 x5 hf y1f90 ff8 fs5 fc8 sc0 ls0 ws4">&lt;?xml version=&quot;1.0&quot;?&gt;</div><div class="t m0 x5 hf y1f91 ff8 fs5 fc8 sc0 ls0">&lt;time&gt;</div><div class="t m0 x19 hf y1f92 ff8 fs5 fc8 sc0 ls0">&lt;year&gt;2012&lt;/year&gt;</div><div class="t m0 x19 hf y1f93 ff8 fs5 fc8 sc0 ls0">&lt;month&gt;11&lt;/month&gt;</div><div class="t m0 x19 hf y1dcd ff8 fs5 fc8 sc0 ls0">&lt;day&gt;24&lt;/day&gt;</div><div class="t m0 x19 hf y1f94 ff8 fs5 fc8 sc0 ls0">&lt;hour&gt;14&lt;/hour&gt;</div><div class="t m0 x19 hf y2ac7 ff8 fs5 fc8 sc0 ls0">&lt;minute&gt;49&lt;/minute&gt;</div><div class="t m0 x19 hf y2ac8 ff8 fs5 fc8 sc0 ls0">&lt;second&gt;17&lt;/second&gt;</div><div class="t m0 x5 hf y2ac9 ff8 fs5 fc8 sc0 ls0">&lt;/time&gt;</div><div class="t m0 x5 hf y1e82 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x5 he y2aca ff2 fs2 fc4 sc0 ls0 ws212">13.5.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h7 y2acb ff1 fs3 fc0 sc0 ls60 wsf09">在编写 <span class="ff4 ls0 wsf0a">REST <span class="ff1 wsf0b">接<span class="_ _6"></span>口<span class="_ _0"></span>时，<span class="_ _6"></span>通<span class="_ _0"></span>常<span class="_ _6"></span>都<span class="_ _0"></span>是<span class="_ _6"></span>服<span class="_ _0"></span>务<span class="_ _6"></span>于<span class="_ _0"></span>普<span class="_ _6"></span>通<span class="_ _0"></span>的 </span><span class="wsf0c">HTTP <span class="ff1 wsa0">请<span class="_ _6"></span>求。<span class="_ _0"></span>但<span class="_ _6"></span>是<span class="_ _0"></span>跟<span class="_ _6"></span>那<span class="_ _0"></span>些<span class="_ _6"></span>功<span class="_ _6"></span>能<span class="_ _0"></span>完</span></span></span></div><div class="t m0 x5 h7 y15dd ff1 fs3 fc0 sc0 ls1e wsf0d">整的网站相比<span class="_ _1"></span>，你通常只需要处理数据。这些数据以各种标准格式编码<span class="_ _c"></span>，比<span class="_ _6"></span>如 <span class="ff4 ls0 wsa5">XML<span class="ff1">、</span></span></div><div class="t m0 x5 h7 y2acc ff4 fs3 fc0 sc0 ls0 wsf0e">JSON <span class="ff1 ls199">或</span><span class="wsa5">CSV<span class="ff1 ls68 wsf0f">。尽管程序看上去很简单，但是以这种方式提供的 </span><span class="wsf10">API <span class="ff1 ls68 ws23f">对于很多应用程</span></span></span></div><div class="t m0 x5 h9 y2acd ff1 fs3 fc0 sc0 ls0">序来讲是非常有用的。</div><div class="t m0 x0 h7 y2ace ff1 fs3 fc0 sc0 ls1e wsf11">例如<span class="_ _1"></span>，长期运行的程序可能会使用一个 <span class="ff4 ls0 wsf12">REST API </span><span class="ws111">来实现监控或诊断。大数据应<span class="_ _c"></span></span></div><div class="t m0 x5 h7 y2acf ff1 fs3 fc0 sc0 lsa8 wsf13">用程序可以使用 <span class="ff4 ls0 wsf14">REST </span><span class="ws3de">来构建一个数据查询或提取系统。<span class="ff4 ls0 wsf15">REST </span>还能用来控制硬件设<span class="_ _c"></span></span></div><div class="t m0 x5 h7 y2ad0 ff1 fs3 fc0 sc0 ls1e ws111">备比如机器人<span class="_ _1"></span>、传感器、工厂或灯泡<span class="_ _c"></span>。更重要的是，<span class="ff4 ls0 wsf12">REST API </span>已经被大量客户端编<span class="_ _1"></span></div><div class="t m0 x5 h7 y2ad1 ff1 fs3 fc0 sc0 ls6b wsf16">程环境所支持，比如 <span class="ff4 ls0 wsf17">Ja<span class="_ _c"></span>v<span class="_ _c"></span>ascript, Android, iOS <span class="ff1 ls6b ws28f">等。因此<span class="_ _c"></span>，利用这种接口可以让你开发</span></span></div><div class="t m0 x5 h9 y2ad2 ff1 fs3 fc0 sc0 ls0">出更加复杂的应用程序。</div><div class="t m0 x0 h7 y2ad3 ff1 fs3 fc0 sc0 ls56 wsf18">为了实现一个简单的 <span class="ff4 ls0 wsf19">REST </span><span class="wsf1a">接口<span class="_ _c"></span>，你只需让你的程序代码满足 <span class="ff4 ls0 wsf1b">Python </span><span class="ls1e0">的<span class="ff4 ls0">WSGI</span></span></span></div><div class="t m0 x5 h7 y2ad4 ff1 fs3 fc0 sc0 ls17 wsf6">标准即可。<span class="ff4 ls0 wsf1c">WSGI </span><span class="wsf1d">被标准库支持<span class="_ _1"></span>，同时也被绝大部分第三方 <span class="ff4 ls0 wsf1e">w<span class="_ _1"></span>eb <span class="ff1 wsa0">框<span class="_ _6"></span>架支<span class="_ _6"></span>持。因<span class="_ _6"></span>此，如</span></span></span></div><div class="t m0 x5 h9 y2ad5 ff1 fs3 fc0 sc0 ls0">果你的代码遵循这个标准，在后面的使用过程中就会更加的灵活！</div><div class="t m0 x0 h7 y2ad6 ff1 fs3 fc0 sc0 ls132">在<span class="ff4 ls0 wsf1f">WSGI </span><span class="ls1e ws111">中<span class="_ _1"></span>，你可以像下面这样约定的方式以一个可调用对象形式来实现你的程</span></div><div class="t m0 x5 h9 y2ad7 ff1 fs3 fc0 sc0 ls0">序。</div><div class="t m0 x5 h10 y2ad8 ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc">cgi</span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">13.5.<span class="_ _5"> </span>11.5 <span class="ff1 ws36c">创建一个简单的 </span><span class="wsf07">REST <span class="ff1 wsf08">接口 </span>411</span></div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

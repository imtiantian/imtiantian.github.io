<div id="pf221" class="pf w0 h0" data-page-no="221"><div class="pc pc221 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg221.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y1ab ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">def <span class="ff8 fcb ws13a">sample<span class="fc0">(n):</span></span></span></div><div class="t m0 x5 hf y1ac ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws157">if <span class="ff8 fc0 ls32">n<span class="fc6 ls33">&gt;<span class="fc7 ls34">0</span></span><span class="ls0">:</span></span></span></div><div class="t m0 x5 hf y1ad ff7 fs5 fc5 sc0 ls0 ws8e2">... <span class="ff8 fc0 ws13a">sample(n<span class="fc6 ls34">-<span class="fc7">1</span></span>)</span></div><div class="t m0 x5 hf y1ae ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws156">else<span class="ff8 fc0">:</span></span></div><div class="t m0 x5 hf y1af ff7 fs5 fc5 sc0 ls0 ws8e2">... <span class="ff8 fc0 ws13a">traceback<span class="fc6 ls34">.</span>print_stack(<span class="fca">file<span class="fc6">=</span></span>sys<span class="fc6 ls34">.</span>stderr)</span></div><div class="t m0 x5 h10 y1b0 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf y355 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">sample(<span class="fc7 ls34">5</span>)</span></div><div class="t m0 x19 hf y410 ff8 fs5 fc8 sc0 ls0 ws4">File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</div><div class="t m0 x19 hf y411 ff8 fs5 fc8 sc0 ls0 ws4">File &quot;&lt;stdin&gt;&quot;, line 3, in sample</div><div class="t m0 x19 hf yba ff8 fs5 fc8 sc0 ls0 ws4">File &quot;&lt;stdin&gt;&quot;, line 3, in sample</div><div class="t m0 x19 hf y8c6 ff8 fs5 fc8 sc0 ls0 ws4">File &quot;&lt;stdin&gt;&quot;, line 3, in sample</div><div class="t m0 x19 hf ybed ff8 fs5 fc8 sc0 ls0 ws4">File &quot;&lt;stdin&gt;&quot;, line 3, in sample</div><div class="t m0 x19 hf ybee ff8 fs5 fc8 sc0 ls0 ws4">File &quot;&lt;stdin&gt;&quot;, line 3, in sample</div><div class="t m0 x19 hf ybef ff8 fs5 fc8 sc0 ls0 ws4">File &quot;&lt;stdin&gt;&quot;, line 5, in sample</div><div class="t m0 x5 hf ybf0 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y34ef ff1 fs3 fc0 sc0 ls0 ws14">另外，你还可以像下面这样使用 <span class="ff6 ws472">pdb.set<span class="_ _7"> </span>trace() </span>在任何地方手动的启动调试器：</div><div class="t m0 x5 h10 yc6d ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc">pdb</span></div><div class="t m0 x5 hf yc6f ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">func<span class="fc0">(arg):</span></span></div><div class="t m0 x15 hf yc70 ff8 fs5 fc6 sc0 ls0 ws13a">...</div><div class="t m0 x15 hf y1e35 ff8 fs5 fc0 sc0 ls0 ws13a">pdb<span class="fc6 ls34">.</span>set_trace()</div><div class="t m0 x15 hf y1e36 ff8 fs5 fc6 sc0 ls0 ws13a">...</div><div class="t m0 x0 h9 y34f0 ff1 fs3 fc0 sc0 ls22 ws119">当程序比较大二你想调试控制流程以及函数参数的时候这个就比较有用了。例如<span class="_ _1"></span>，</div><div class="t m0 x5 h9 y34f1 ff1 fs3 fc0 sc0 ls3d ws12fb">一旦调试器开始运行，你就能够使用 <span class="ff6 ls0 ws203">print </span><span class="ws12fc">来观测变量值或敲击某个命令比如 <span class="ff6 ls72">w</span><span class="ls0 wsa0">来获</span></span></div><div class="t m0 x5 h9 y34f2 ff1 fs3 fc0 sc0 ls0">取追踪信息。</div><div class="t m0 x5 he y133d ff2 fs2 fc4 sc0 ls0 wsadf">16.12.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 y34f3 ff1 fs3 fc0 sc0 ls63 ws21f">不要将调试弄的过于复杂化<span class="_ _c"></span>。一些简单的错误只需要观察程序堆栈信息就能知道<span class="_ _1"></span></div><div class="t m0 x5 h9 y34f4 ff1 fs3 fc0 sc0 ls1e ws111">了<span class="_ _1"></span>，实际的错误一般是堆栈的最后一行<span class="_ _1"></span>。你在开发的时候，也可以在你需要调试<span class="_ _1"></span>的地</div><div class="t m0 x5 h9 y236d ff1 fs3 fc0 sc0 lsfa ws12fd">方插入一下 <span class="ff6 ls0 wsa90">print() </span><span class="ws60c">函数来诊断信息（<span class="_ _c"></span>只需要最后发布的时候删除这些打印语句即<span class="_ _c"></span></span></div><div class="t m0 x5 h9 y34f5 ff1 fs3 fc0 sc0 ls0 wsa0">可）<span class="_ _f"></span>。</div><div class="t m0 x0 h9 y34f6 ff1 fs3 fc0 sc0 ls3a ws153">调试器的一个常见用法是观测某个已经奔溃的函数中的变量。知道怎样在函数奔溃</div><div class="t m0 x5 h9 y110c ff1 fs3 fc0 sc0 ls0">后进入调试器是一个很有用的技能。</div><div class="t m0 x0 h9 y1e8b ff1 fs3 fc0 sc0 ls14f ws91d">当你想解剖一个非常复杂的程序<span class="_ _d"></span>，底层的控制逻辑你不是很清楚的时候<span class="_ _d"></span>，插入<span class="_ _d"></span></div><div class="t m0 x5 h9 y34f7 ff6 fs3 fc0 sc0 ls0 ws23a">pdb.set<span class="_ _7"> </span>trace() <span class="ff1">这样的语句就很有用了。</span></div><div class="t m0 x0 h9 y34f8 ff1 fs3 fc0 sc0 ls0 wsde1">实际上，程序会一直运行到碰到 <span class="ff6 ws12fe">set<span class="_ _16"> </span>trace() </span><span class="wsa0">语句位置，然后立马进入调试器。然</span></div><div class="t m0 x5 h9 y34f9 ff1 fs3 fc0 sc0 ls0">后你就可以做更多的事了。</div><div class="t m0 x0 h7 y34fa ff1 fs3 fc0 sc0 ls0 ws4ad">如果你使用 <span class="ff4 ws12ff">IDE </span><span class="wsfd0">来做 <span class="ff4 ws1062">Python </span></span>开发，通常 <span class="ff4 ws12ff">IDE </span><span class="ws1300">都会提供自己的调试器来替代 <span class="ff4 wsa5">p<span class="_ _6"></span>db</span>。</span></div><div class="t m0 x5 h7 y34fb ff1 fs3 fc0 sc0 ls0 ws14">更多这方面的信息可以参考你使用的 <span class="ff4 ws1301">IDE </span>手册。</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 wsd97">16.12.<span class="_ _36"> </span>14.12 <span class="ff1 wse2d">调试基本的程序崩溃错误 </span>536</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

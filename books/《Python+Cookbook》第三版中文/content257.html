<div id="pf101" class="pf w0 h0" data-page-no="101"><div class="pc pc101 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg101.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x15 h10 y1e8 ff7 fs5 fc12 sc0 ls0">@name.deleter</div><div class="t m0 x15 hf y1e9 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">name<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1ea ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13b">Deleting name</span>&apos;</span><span class="ls0">)</span></span></div><div class="t m0 x16 hf y903 ff8 fs5 fca sc0 ls0 ws13a">super<span class="fc0 ws4">(SubPerson, SubPerson)<span class="fc6 ls34">.</span><span class="ws13a">name<span class="fc6 ls34">.</span>__delete__(</span></span>self<span class="fc0">)</span></div><div class="t m0 x0 h9 y1bd3 ff1 fs3 fc0 sc0 ls0">接下来使用这个新类：</div><div class="t m0 x5 hf y1bd4 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">s<span class="fc6 ls33">=</span><span class="ls0 ws13a">SubPerson(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">Guido<span class="ff9 ls34">&apos;</span></span>)</span></span></div><div class="t m0 x5 hf y1bd5 ff8 fs5 fc8 sc0 ls0 ws4">Setting name to Guido</div><div class="t m0 x5 hf y1bd6 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls34">s<span class="fc6 ls0 ws13a">.<span class="fc0">name</span></span></span></div><div class="t m0 x5 hf y1bd7 ff8 fs5 fc8 sc0 ls0 ws4">Getting name</div><div class="t m0 x5 hf y1bd8 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">Guido<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y1bd9 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls34">s<span class="fc6 ls0 ws13a">.<span class="fc0 ws13c">name </span><span class="ls32">=</span></span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Larry<span class="ff9">&apos;</span></span></span></span></div><div class="t m0 x5 hf y1bda ff8 fs5 fc8 sc0 ls0 ws4">Setting name to Larry</div><div class="t m0 x5 hf y1bdb ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls34">s<span class="fc6 ls0 ws13a">.<span class="fc0 ws13c">name </span><span class="ls32">=</span><span class="fc7">42</span></span></span></div><div class="t m0 x5 hf y1bdc ff8 fs5 fce sc0 ls0 ws4">Traceback (most recent call last):</div><div class="t m0 x15 hf y814 ff8 fs5 fc0 sc0 ls0 ws13c">File <span class="fc9 ws13a">&quot;&lt;stdin&gt;&quot;</span><span class="ws145">, line <span class="fc7 ls34">1</span><span class="ls32">,</span><span class="ff7 fca ws160">in </span><span class="fc6 ws13a">&lt;<span class="fc0">module</span>&gt;</span></span></div><div class="t m0 x15 hf y815 ff8 fs5 fc0 sc0 ls0 ws13c">File <span class="fc9 ws13a">&quot;example.py&quot;</span><span class="ws145">, line <span class="fc7 ws13a">16</span><span class="ls32">,</span><span class="ff7 fca ws157">in </span>name</span></div><div class="t m0 x16 hf y1bdd ff7 fs5 fca sc0 ls0 ws16a">raise <span class="ff8 ws13a">TypeError<span class="fc0">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Expected a string<span class="ff9 ws13b">&apos;</span></span>)</span></span></div><div class="t m0 x5 hf y1bde ff8 fs5 fc2 sc0 ls0 ws13a">TypeError<span class="fc0 ws4">: Expected a string</span></div><div class="t m0 x5 hf y1bdf ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y1b7 ff1 fs3 fc0 sc0 ls0 ws38">如果你仅仅只想扩展 <span class="ff4 wsaa2">prop<span class="_ _6"></span>ert<span class="_ _1"></span>y <span class="ff1">的某一个方法，那么可以像下面这样写：</span></span></div><div class="t m0 x5 hf y1be0 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">SubPerson<span class="ff8 fc0">(Person):</span></span></div><div class="t m0 x15 h10 y1be1 ff7 fs5 fc12 sc0 ls0">@Person.name.getter</div><div class="t m0 x15 hf y1be2 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">name<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1be3 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13b">Getting name<span class="ff9">&apos;</span><span class="fc0">)</span></span></span></span></div><div class="t m0 x16 hf y1be4 ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 ws13a">super<span class="fc0">()<span class="fc6 ls34">.</span>name</span></span></div><div class="t m0 x0 h7 y1be5 ff1 fs3 fc0 sc0 ls0 wsc">或者，你只想修改 <span class="ff4 ws963">setter </span>方法，就这么写：</div><div class="t m0 x5 hf y1be6 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">SubPerson<span class="ff8 fc0">(Person):</span></span></div><div class="t m0 x15 h10 y1be7 ff7 fs5 fc12 sc0 ls0">@Person.name.setter</div><div class="t m0 x15 hf y1be8 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">name<span class="fc0">(<span class="fca">self</span><span class="ws4">, value):</span></span></span></div><div class="t m0 x16 hf y1be9 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13b">Setting name to</span>&apos;</span><span class="ls0 ws13b">, value)</span></span></div><div class="t m0 x16 hf y1bea ff8 fs5 fca sc0 ls0 ws13a">super<span class="fc0 ws4">(SubPerson, SubPerson)<span class="fc6 ls34">.</span><span class="ws13a">name<span class="fc6 ls34">.</span>__set__(</span></span>self<span class="fc0 ws13b">, value)</span></div><div class="t m0 x5 he y1beb ff2 fs2 fc4 sc0 ls0 ws212">10.8.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h7 y1bec ff1 fs3 fc0 sc0 ls14 wsaa3">在子类中扩展一个 <span class="ff4 ls0 wsaa4">prop<span class="_ _6"></span>ert<span class="_ _1"></span>y <span class="ff1 ls14 wsaa5">可能会引起很多不易察觉的问题<span class="_ _1"></span>，因为一个 <span class="ff4 ls0 wsa5">prop<span class="_ _6"></span>erty</span></span></span></div><div class="t m0 x5 h9 y1bed ff1 fs3 fc0 sc0 ls40 ws195">其实是 <span class="ff6 ls0 ws303">getter</span><span class="ls172">、<span class="ff6 ls0 wsaa6">setter </span><span class="ls7f">和<span class="ff6 ls0 ws2ed">deleter <span class="ff1 wsa0">方<span class="_ _6"></span>法<span class="_ _6"></span>的集<span class="_ _6"></span>合，<span class="_ _6"></span>而<span class="_ _6"></span>不<span class="_ _6"></span>是<span class="_ _6"></span>单<span class="_ _6"></span>个<span class="_ _6"></span>方<span class="_ _6"></span>法。<span class="_ _6"></span>因<span class="_ _6"></span>此，<span class="_ _6"></span>但你<span class="_ _6"></span>扩<span class="_ _6"></span>展</span></span></span></span></div><div class="t m0 x5 h7 y1bee ff1 fs3 fc0 sc0 ls0 wsaa7">一个 <span class="ff4 wsaa8">prop<span class="_ _6"></span>erty </span><span class="ls42 ws186">的时候<span class="_ _1"></span>，你需要先确定你是否要重新定义所有的方法还是说只修改其中<span class="_ _1"></span></span></div><div class="t m0 x5 h9 y1bef ff1 fs3 fc0 sc0 ls0">某一个。</div><div class="t m0 x0 h7 y1bf0 ff1 fs3 fc0 sc0 ls0 wsaa9">在 第 一 个 例 子 中， 所 有 的<span class="_ _17"> </span><span class="ff4 wsaaa">prop<span class="_ _6"></span>ert<span class="_ _1"></span>y <span class="ff1 ls173 wsaab">方法都被重新定义<span class="_ _1d"></span>。在每一个方法中<span class="_ _1f"></span>，<span class="_ _1d"></span></span></span></div><div class="t m0 x5 h9 y1bf1 ff1 fs3 fc0 sc0 ls0 wsaac">使 用 了<span class="_ _23"> </span><span class="ff6 wsaad">super() </span><span class="wsaae">来 调 用 父 类 的 实 现。 在<span class="_ _1c"> </span><span class="ff6 wsaaf">setter </span></span>函 数 中 使 用<span class="_ _23"> </span><span class="ff6">super(SubPerson,</span></div><div class="t m0 x5 h9 y1bf2 ff6 fs3 fc0 sc0 ls0 wsab0">SubPerson).name.<span class="_ _e"> </span>set<span class="_ _e"> </span>(self,<span class="_ _2c"> </span>value) <span class="ff1 ls113 wsab1">的语句是没有错的<span class="_ _d"></span>。为了委托给之前定义<span class="_ _d"></span></span></div><div class="t m0 x5 h7 y1bf3 ff1 fs3 fc0 sc0 ls96">的<span class="ff4 ls0 wsab2">setter </span><span class="ls10 ws38c">方法，需要将控制权传递给之前定义的 </span><span class="ff4 ls0 wsab3">name </span><span class="ls10 wsab4">属性的 </span><span class="ff6 ls0 ws5f7">set<span class="_ _e"> </span>() </span><span class="ls0 wsa0">方法。<span class="_ _6"></span>不过，</span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws9da">10.8.<span class="_ _5"> </span>8.8 <span class="ff1 ws7da">子类中扩展 </span><span class="wsaa1">p<span class="_ _c"></span>rop<span class="_ _0"></span>ert<span class="_ _c"></span>y 248</span></div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

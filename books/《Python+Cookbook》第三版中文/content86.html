<div id="pf56" class="pf w0 h0" data-page-no="56"><div class="pc pc56 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg56.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x15 h14 y928 ffd fs5 fc9 sc0 lsbd">|<span class="ffa ls0 ws13b">term DIVIDE factor</span></div><div class="t m0 x15 h15 y929 ffb fs5 fc9 sc0 ls0">&apos;&apos;&apos;</div><div class="t m0 x15 hf y92a ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 fc0 ws13a">p[<span class="fc7">2</span><span class="ls33">]</span><span class="fc6 ws159">== <span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">*<span class="ff9 ls34">&apos;</span></span>:</span></div><div class="t m0 x16 hf y92b ff8 fs5 fc0 sc0 ls0 ws13a">p[<span class="fc7 ls34">0</span><span class="ls32">]<span class="fc6 ls33">=</span></span>p[<span class="fc7 ls34">1</span><span class="ls33">]<span class="fc6 ls32">*</span></span>p[<span class="fc7 ls34">3</span>]</div><div class="t m0 x15 hf y92c ff7 fs5 fca sc0 ls0 ws15a">elif <span class="ff8 fc0 ws13a">p[<span class="fc7 ls34">2</span><span class="ls32">]</span><span class="fc6 ws159">== <span class="ff9 fc9 ls34">&apos;<span class="ff8">/</span>&apos;</span></span>:</span></div><div class="t m0 x16 hf y92d ff8 fs5 fc0 sc0 ls0 ws13a">p[<span class="fc7 ls34">0</span><span class="ls32">]<span class="fc6 ls33">=</span></span>p[<span class="fc7 ls34">1</span><span class="ls33">]<span class="fc6 ls32">/</span></span>p[<span class="fc7 ls34">3</span>]</div><div class="t m0 x5 hf y92f ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">p_term_factor<span class="fc0">(p):</span></span></div><div class="t m0 x15 h15 y930 ffb fs5 fc9 sc0 ls0">&apos;&apos;&apos;</div><div class="t m0 x15 h11 y931 ffa fs5 fc9 sc0 ls0 ws13b">term : factor</div><div class="t m0 x15 h15 y9b1 ffb fs5 fc9 sc0 ls0">&apos;&apos;&apos;</div><div class="t m0 x15 hf y932 ff8 fs5 fc0 sc0 ls0 ws13a">p[<span class="fc7 ls34">0</span><span class="ls33">]<span class="fc6 ls32">=</span></span>p[<span class="fc7 ls34">1</span>]</div><div class="t m0 x5 hf y934 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">p_factor<span class="fc0">(p):</span></span></div><div class="t m0 x15 h15 y935 ffb fs5 fc9 sc0 ls0">&apos;&apos;&apos;</div><div class="t m0 x15 h11 y936 ffa fs5 fc9 sc0 ls0 ws13b">factor : NUM</div><div class="t m0 x15 h15 y937 ffb fs5 fc9 sc0 ls0">&apos;&apos;&apos;</div><div class="t m0 x15 hf y938 ff8 fs5 fc0 sc0 ls0 ws13a">p[<span class="fc7 ls34">0</span><span class="ls33">]<span class="fc6 ls32">=</span></span>p[<span class="fc7 ls34">1</span>]</div><div class="t m0 x5 hf y93a ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">p_factor_group<span class="fc0">(p):</span></span></div><div class="t m0 x15 h15 y93b ffb fs5 fc9 sc0 ls0">&apos;&apos;&apos;</div><div class="t m0 x15 h11 y93c ffa fs5 fc9 sc0 ls0 ws4">factor : LPAREN expr RPAREN</div><div class="t m0 x15 h15 y9b2 ffb fs5 fc9 sc0 ls0">&apos;&apos;&apos;</div><div class="t m0 x15 hf y93d ff8 fs5 fc0 sc0 ls0 ws13a">p[<span class="fc7 ls34">0</span><span class="ls33">]<span class="fc6 ls32">=</span></span>p[<span class="fc7 ls34">2</span>]</div><div class="t m0 x5 hf y93f ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">p_error<span class="fc0">(p):</span></span></div><div class="t m0 x15 hf y940 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ws13a">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Syntax error<span class="ff9 ws13b">&apos;</span></span>)</span></div><div class="t m0 x5 hf y942 ff8 fs5 fc0 sc0 ls0 ws145">parser <span class="fc6 ls33">=</span>yacc()</div><div class="t m0 x0 h9 y9b3 ff1 fs3 fc0 sc0 ls3a ws153">这个程序中，所有代码都位于一个比较高的层次。你只需要为令牌写正则表达式和</div><div class="t m0 x5 h9 y9b4 ff1 fs3 fc0 sc0 ls13 wse5">规则匹配时的高阶处理函数即可<span class="_ _1"></span>。而实际的运行解析器，接受令牌等等底层动作已经<span class="_ _c"></span></div><div class="t m0 x5 h9 y9b5 ff1 fs3 fc0 sc0 ls0">被库函数实现了。</div><div class="t m0 x0 h9 y9b6 ff1 fs3 fc0 sc0 ls0">下面是一个怎样使用得到的解析对象的例子：</div><div class="t m0 x5 hf y9b7 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">parser<span class="fc6 ls34">.</span>parse(<span class="ff9 fc9 ls34">&apos;<span class="ff8">2</span>&apos;</span>)</span></div><div class="t m0 x5 hf y9b8 ff8 fs5 fc8 sc0 ls0">2</div><div class="t m0 x5 hf y9b9 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">parser<span class="fc6 ls34">.</span>parse(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">2+3<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 hf y9ba ff8 fs5 fc8 sc0 ls0">5</div><div class="t m0 x5 hf y9bb ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">parser<span class="fc6 ls34">.</span>parse(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">2+(3+4)*5<span class="ff9 ws13b">&apos;</span></span>)</span></div><div class="t m0 x5 hf y9bc ff8 fs5 fc8 sc0 ls0">37</div><div class="t m0 x5 hf y9bd ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y9be ff1 fs3 fc0 sc0 ls63 ws21f">如果你想在你的编程过程中来点挑战和刺激<span class="_ _c"></span>，编写解析器和编译器是个不错的选<span class="_ _1"></span></div><div class="t m0 x5 h9 y234 ff1 fs3 fc0 sc0 ls1e ws111">择<span class="_ _1"></span>。再次，一本编译器的书籍会包含<span class="_ _1"></span>很多底层的理论知识。不过很多好的资源也<span class="_ _1"></span>可以</div><div class="t m0 x5 h7 y9bf ff1 fs3 fc0 sc0 ls0 wsa0">在网上找到。<span class="ff4 ws5c">Python </span><span class="ws38">自己的 <span class="ff4 ws464">ast </span>模块也值得去看一下。</span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">4.19.<span class="_ _5"> </span>2.19 <span class="ff1 ws42c">实现一个简单的递归下降分析器 </span>77</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

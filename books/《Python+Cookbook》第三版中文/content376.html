<div id="pf178" class="pf w0 h0" data-page-no="178"><div class="pc pc178 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg178.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 he y137 ff2 fs2 fc4 sc0 ls0 ws212">12.3.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 y236 ff1 fs3 fc0 sc0 ls0">在包内，既可以使用相对路径也可以使用绝对路径来导入。举个例子：</div><div class="t m0 x5 h11 y26ba ffa fs5 fcd sc0 ls0 ws4"># mypackage/A/spam.py</div><div class="t m0 x5 hf y26bb ff7 fs5 fca sc0 ls0 ws15a">from <span class="fcc ws168">mypackage.A </span><span class="ws146">import <span class="ff8 fc0 ws13c">grok <span class="ffa fcd ws4"># OK</span></span></span></div><div class="t m0 x5 hf y26bc ff7 fs5 fca sc0 ls0 ws15a">from <span class="fcc ls32">.</span><span class="ws146">import <span class="ff8 fc0 ws13c">grok <span class="ffa fcd ws13b"># OK</span></span></span></div><div class="t m0 x5 h11 y26bd ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc ws15a">grok <span class="ffa fcd ws4"># Error (not found)</span></span></div><div class="t m0 x0 h7 y26be ff1 fs3 fc0 sc0 ls81">像<span class="ff4 ls0 wsd22">m<span class="_ _1"></span>ypac<span class="_ _1"></span>kage.A <span class="ff1 ls40 ws180">这样使用绝对路径名的不利之处是这将顶层包名硬编码到你的源</span></span></div><div class="t m0 x5 h9 y26bf ff1 fs3 fc0 sc0 ls40 ws180">码中<span class="_ _1"></span>。如果你想重新组织它，你的代码将更脆<span class="_ _c"></span>，很难工作。举个例子<span class="_ _c"></span>，如果你改变了</div><div class="t m0 x5 h9 y26c0 ff1 fs3 fc0 sc0 ls0 wsa0">包<span class="_ _6"></span>名，你<span class="_ _6"></span>就<span class="_ _6"></span>必<span class="_ _6"></span>须<span class="_ _6"></span>检<span class="_ _6"></span>查所<span class="_ _6"></span>有<span class="_ _6"></span>文<span class="_ _6"></span>件<span class="_ _6"></span>来<span class="_ _6"></span>修正<span class="_ _6"></span>源<span class="_ _6"></span>码。<span class="_ _6"></span>同<span class="_ _6"></span>样，<span class="_ _6"></span>硬<span class="_ _6"></span>编码<span class="_ _6"></span>的<span class="_ _6"></span>名<span class="_ _6"></span>称<span class="_ _6"></span>会<span class="_ _6"></span>使移<span class="_ _6"></span>动<span class="_ _6"></span>代<span class="_ _6"></span>码<span class="_ _6"></span>变<span class="_ _6"></span>得困</div><div class="t m0 x5 h9 y26c1 ff1 fs3 fc0 sc0 ls1e ws111">难<span class="_ _1"></span>。举个例子，也许有人想安装两个不同版本的软件包<span class="_ _c"></span>，只通过名<span class="_ _6"></span>称区分它们<span class="_ _1"></span>。如果</div><div class="t m0 x5 h7 y26c2 ff1 fs3 fc0 sc0 ls0 ws38">使用相对导入，那一切都 <span class="ff4 wsa5">ok</span>，然而使用绝对路径名很可能会出问题。</div><div class="t m0 x0 h7 y26c3 ff4 fs3 fc0 sc0 ls0 wsd23">imp<span class="_ _6"></span>ort <span class="ff1 wsba5">语句的 <span class="ff6 ls1b4">.</span><span class="lsb">和</span><span class="ff5 fc2 ws75">‘‘</span></span><span class="wsa5">..‘‘<span class="ff1 ls3a ws153">看起来很滑稽</span><span class="ls1b5">,<span class="ff1 ls3a ws153">但它指定目录名</span><span class="ls1b6">.</span></span><span class="ff1 wsa0">为当前目录，</span><span class="wsd24">..B <span class="ff1 wsa0">为目录</span>../</span></span></div><div class="t m0 x5 h7 y26c4 ff4 fs3 fc0 sc0 ls0 wsa5">B<span class="ff1 ws63">。这种语法只适用于 </span>imp<span class="_ _6"></span>ort<span class="ff1">。举个例子：</span></div><div class="t m0 x5 hf y26c5 ff7 fs5 fca sc0 ls0 ws15a">from <span class="fcc ls32">.</span><span class="ws146">import <span class="ff8 fc0 ws13c">grok <span class="ffa fcd ws13b"># OK</span></span></span></div><div class="t m0 x5 hf y26c6 ff7 fs5 fca sc0 ls0 ws146">import <span class="ff8 fc6 ls34">.<span class="fc0 ls0 ws161">grok <span class="ffa fcd ws4"># ERROR</span></span></span></div><div class="t m0 x0 h9 y25bd ff1 fs3 fc0 sc0 ls3a ws153">尽管使用相对导入看起来像是浏览文件系统，但是不能到定义包的目录之外。也就</div><div class="t m0 x5 h9 y26c7 ff1 fs3 fc0 sc0 ls0">是说，使用点的这种模式从不是包的目录中导入将会引发错误。</div><div class="t m0 x0 h9 y26c8 ff1 fs3 fc0 sc0 ls56 ws1fa">最后<span class="_ _c"></span>，相对导入只适用于在合适的包中的模块<span class="_ _1"></span>。尤其是在顶层的脚本的简单模块<span class="_ _1"></span></div><div class="t m0 x5 h9 y26c9 ff1 fs3 fc0 sc0 ls0">中，它们将不起作用。如果包的部分被作为脚本直接执行，那它们将不起作用例如：</div><div class="t m0 x5 hf y26ca ff8 fs5 fc6 sc0 ls32">%<span class="fc0 ls0 ws4">python3 mypackage</span><span class="ls34">/<span class="fc0 ls0 ws13a">A</span>/<span class="fc0 ls0 ws13a">spam</span>.<span class="fc0 ls0 ws159">py <span class="ffa fcd ws4"># Relative imports fail</span></span></span></div><div class="t m0 x0 h7 y26cb ff1 fs3 fc0 sc0 ls0 wsd25">另一<span class="_ _6"></span>方面，<span class="_ _6"></span>如<span class="_ _6"></span>果你<span class="_ _6"></span>使用 <span class="ff4 wsd26">Python </span><span class="ls134">的</span><span class="ff4 wsd27">-m </span><span class="wsa0">选<span class="_ _6"></span>项来<span class="_ _6"></span>执<span class="_ _6"></span>行先<span class="_ _6"></span>前的<span class="_ _6"></span>脚本，<span class="_ _6"></span>相<span class="_ _6"></span>对导<span class="_ _6"></span>入将<span class="_ _6"></span>会<span class="_ _6"></span>正确</span></div><div class="t m0 x5 h9 y26cc ff1 fs3 fc0 sc0 ls0">运行。例如：</div><div class="t m0 x5 hf y26cd ff8 fs5 fc6 sc0 ls32">%<span class="fc0 ls0 ws155">python3 </span><span class="ls34">-<span class="fc0 ls0 ws4">m mypackage</span>.<span class="fc0 ls0 ws13a">A</span>.<span class="fc0 ls0 ws13c">spam <span class="ffa fcd ws4"># Relative imports work</span></span></span></div><div class="t m0 x0 h7 y26ce ff1 fs3 fc0 sc0 ls0 wsa0">更多的包的相对导入的背景知识<span class="ff4 ls83">,</span><span class="wsc">请看 <span class="ff4 fc3 ws9c">PEP 328 <span class="fc0">.</span></span></span></div><div class="t m0 x5 hd y26cf ff2 fs4 fc4 sc0 ls0 ws211">12.4<span class="_ _e"> </span>10.4 <span class="ff1">将模块分割成多个文件</span></div><div class="t m0 x5 he y26d0 ff2 fs2 fc4 sc0 ls0 ws212">12.4.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 y26d1 ff1 fs3 fc0 sc0 ls3a ws153">你想将一个模块分割成多个文件。但是你不想将分离的文件统一成一个逻辑模块时</div><div class="t m0 x5 h9 y26d2 ff1 fs3 fc0 sc0 ls0">使已有的代码遭到破坏。</div><div class="t m0 x5 he y26d3 ff2 fs2 fc4 sc0 ls0 ws212">12.4.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 ybd5 ff1 fs3 fc0 sc0 ls0">程序模块可以通过变成包来分割成多个独立的文件。考虑下下面简单的模块：</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">12.4.<span class="_ _5"> </span>10.4 <span class="ff1 ws509">将模块分割成多个文件 </span>367</div><a class="l" href="http://www.python.org/dev/peps/pep-0328"><div class="d m1" style="border-style:none;position:absolute;left:441.382500px;bottom:466.093500px;width:45.357000px;height:16.821000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

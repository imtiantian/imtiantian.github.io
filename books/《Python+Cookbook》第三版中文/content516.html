<div id="pf204" class="pf w0 h0" data-page-no="204"><div class="pc pc204 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg204.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 h11 y181 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Merge in user-specific configuration</span></div><div class="t m0 x5 h10 y182 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">os</span></span></div><div class="t m0 x5 hf y183 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">cfg<span class="fc6 ls34">.</span>read(os<span class="fc6 ls34">.</span>path<span class="fc6">.</span>expanduser(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">~/.config.ini<span class="ff9 ls34">&apos;</span></span>))</span></div><div class="t m0 x5 hf y184 ff8 fs5 fc8 sc0 ls34">[<span class="ff9 ls0 ws13b">&apos;</span><span class="ls0 ws13a">/Users/beazley/.config.ini</span><span class="ff9">&apos;</span><span class="ls0">]</span></div><div class="t m0 x5 hf y186 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">cfg<span class="fc6 ls34">.</span>get(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">installation<span class="ff9 ls34">&apos;</span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">prefix<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 hf y187 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">/Users/beazley/test<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y188 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">cfg<span class="fc6 ls34">.</span>get(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">installation<span class="ff9 ls34">&apos;</span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">library<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 hf y98e ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">/Users/beazley/test/lib<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y98f ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">cfg<span class="fc6 ls34">.</span>getboolean(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">debug<span class="ff9 ls34">&apos;</span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">log_errors<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 hf y990 ff8 fs5 fc8 sc0 ls0">False</div><div class="t m0 x5 hf y991 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y1194 ff1 fs3 fc0 sc0 ls0 ws123e">仔细观察下 <span class="ff6 wsac2">prefix </span><span class="ls35 ws123f">变量是怎样覆盖其他相关变量的，比如 </span><span class="ff6 ws207">library </span><span class="wsa0">的设定值。产</span></div><div class="t m0 x5 h9 y1195 ff1 fs3 fc0 sc0 ls13 wse5">生这种结果的原因是变量的改写采取的是后发制人策略<span class="_ _1"></span>，以最后一个为准。你可以像<span class="_ _c"></span></div><div class="t m0 x5 h9 y327b ff1 fs3 fc0 sc0 ls0">下面这样做试验：</div><div class="t m0 x5 hf y1c5d ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">cfg<span class="fc6 ls34">.</span>get(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">installation<span class="ff9 ls34">&apos;</span></span><span class="ls34">,</span><span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">library<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 hf y1c5e ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">/Users/beazley/test/lib<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y1c5f ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">cfg<span class="fc6 ls34">.</span>set(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">installation<span class="ff9 ls34">&apos;</span></span><span class="ls34">,</span><span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">prefix<span class="ff9 ws13b">&apos;</span></span><span class="ls34">,<span class="ff9 fc9">&apos;</span></span><span class="fc9">/tmp/dir<span class="ff9 ws13b">&apos;</span></span>)</span></div><div class="t m0 x5 hf y1c60 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">cfg<span class="fc6 ls34">.</span>get(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">installation<span class="ff9 ls34">&apos;</span></span><span class="ls34">,</span><span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">library<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 hf y327c ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">/tmp/dir/lib<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y1c61 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y327d ff1 fs3 fc0 sc0 ls139 ws1240">最后还有很重要一点要注意的是 <span class="ff4 ls0 wsd7f">Python <span class="ff1 wsa0">并<span class="_ _0"></span>不<span class="_ _6"></span>能<span class="_ _0"></span>支<span class="_ _0"></span>持</span><span class="ws1241">.ini </span></span><span class="ws859">文件在其他程序（<span class="_ _d"></span>比如<span class="_ _c"></span></span></div><div class="t m0 x5 h7 y327e ff4 fs3 fc0 sc0 ls0 ws1242">windo<span class="_ _1"></span>ws <span class="ff1 ls1f ws1243">应用程序）中的所有特性。确保你已经参阅了 </span><span class="ws1244">conﬁgparser <span class="ff1 ls1f ws113">文档中的语法详情</span></span></div><div class="t m0 x5 h9 y327f ff1 fs3 fc0 sc0 ls0">以及支持特性。</div><div class="t m0 x5 hd y3280 ff2 fs4 fc4 sc0 ls0 wsd91">15.11<span class="_ _e"> </span>13.11 <span class="ff1">给简单脚本增加日志功能</span></div><div class="t m0 x5 he y3281 ff2 fs2 fc4 sc0 ls0 wsadf">15.11.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 y3282 ff1 fs3 fc0 sc0 ls0">你希望在脚本和程序中将诊断信息写入日志文件。</div><div class="t m0 x5 he y3283 ff2 fs2 fc4 sc0 ls0 wsadf">15.11.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h7 y294c ff4 fs3 fc0 sc0 ls0 wsb92">The easiest w<span class="_ _1"></span>a<span class="_ _1"></span>y to add logging to simple programs is to use the logging mo<span class="_ _6"></span>dule.<span class="_ _b"> </span>F<span class="_ _d"></span>or</div><div class="t m0 x5 h7 y3284 ff4 fs3 fc0 sc0 ls0 ws1245">example: <span class="ff1 ws14">打印日志最简单方式是使用 <span class="ff6 ws472">logging </span>模块。例如：</span></div><div class="t m0 x5 h10 y3285 ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc">logging</span></div><div class="t m0 x5 hf y18ba ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">main<span class="fc0">():</span></span></div><div class="t m0 x15 h11 y26ec ffa fs5 fcd sc0 ls0 ws4"># Configure the logging system</div><div class="t m0 x15 hf y3286 ff8 fs5 fc0 sc0 ls0 ws13a">logging<span class="fc6 ls34">.</span>basicConfig(</div><div class="t m0 x16 hf y3287 ff8 fs5 fc0 sc0 ls0 ws13a">filename<span class="fc6">=<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">app.log<span class="ff9 ls34">&apos;</span></span></span>,</div><div class="t m0 x16 hf y3288 ff8 fs5 fc0 sc0 ls0 ws13a">level<span class="fc6 ls34">=</span>logging<span class="fc6 ls34">.</span>ERROR</div><div class="t m0 x15 hf y3289 ff8 fs5 fc0 sc0 ls0">)</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 wsd97">15.11.<span class="_ _36"> </span>13.11 <span class="ff1 wse2d">给简单脚本增加日志功能 </span>507</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

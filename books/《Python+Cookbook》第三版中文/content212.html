<div id="pfd4" class="pf w0 h0" data-page-no="d4"><div class="pc pcd4 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bgd4.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y1ab ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">f<span class="fc6 ls33">=<span class="fca ls0 ws13a">open<span class="fc0">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">polys.bin<span class="ff9 ws13b">&apos;</span></span><span class="ls33">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">rb<span class="ff9 ls34">&apos;</span></span>)</span></span></span></span></div><div class="t m0 x5 hf y1ac ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws15f">phead <span class="fc6 ls33">=</span><span class="ws13a">PolyHeader<span class="fc6 ls34">.</span>from_file(f)</span></span></div><div class="t m0 x5 hf y1ad ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">phead<span class="fc6">.</span>num_polys</span></div><div class="t m0 x5 hf y1ae ff8 fs5 fc8 sc0 ls0">3</div><div class="t m0 x5 hf y1af ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws1f5">polydata <span class="fc6 ls33">=</span><span class="ws13b">[ SizedRecord<span class="fc6 ls34">.</span><span class="ws3c7">from_file(f, </span><span class="ff9 fc9">&apos;<span class="ff8 ws13a">&lt;i</span>&apos;</span>)</span></span></div><div class="t m0 x5 hf y1b0 ff7 fs5 fc5 sc0 ls0 ws8e2">... <span class="fca ws139">for <span class="ff8 fc0 ls32">n</span><span class="ws157">in <span class="ff8 ws13a">range<span class="fc0">(phead<span class="fc6 ls34">.</span><span class="ws13b">num_polys) ]</span></span></span></span></span></div><div class="t m0 x5 hf y355 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">polydata</span></div><div class="t m0 x5 hf y410 ff8 fs5 fc8 sc0 ls0 ws4">[&lt;__main__.SizedRecord object at 0x1006a4d50&gt;,</div><div class="t m0 x5 hf y411 ff8 fs5 fc8 sc0 ls0 ws4">&lt;__main__.SizedRecord object at 0x1006a4f50&gt;,</div><div class="t m0 x5 hf yba ff8 fs5 fc8 sc0 ls0 ws4">&lt;__main__.SizedRecord object at 0x10070da90&gt;]</div><div class="t m0 x5 hf y8c6 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y33a ff1 fs3 fc0 sc0 ls0 wsa0">可以看出，<span class="ff6 ws8e3">SizedRecord </span><span class="ws3d8">实例的内容还没有被解析出来。可以使用 <span class="ff6 ws7f9">iter<span class="_ _16"> </span>as() </span>方法</span></div><div class="t m0 x5 h9 y171c ff1 fs3 fc0 sc0 lsa8 ws8e4">来达到目的，这个方法接受一个结构格<span class="_ _1"></span>式化编码或者是 <span class="ff6 ls0 ws8e5">Structure <span class="ff1 wsa0">类<span class="_ _6"></span>作为<span class="_ _6"></span>输入。<span class="_ _6"></span>这样</span></span></div><div class="t m0 x5 h9 y171d ff1 fs3 fc0 sc0 ls0">子可以很灵活的去解析数据，例如：</div><div class="t m0 x5 hf y171e ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">for <span class="ff8 fc0 ws13b">n, poly </span><span class="ws157">in <span class="ff8 ws13a">enumerate<span class="fc0">(polydata):</span></span></span></span></div><div class="t m0 x5 hf y171f ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Polygon</span>&apos;</span><span class="ls0 ws13b">, n)</span></span></span></div><div class="t m0 x5 hf y1720 ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws139">for <span class="ff8 fc0 ls32">p</span><span class="ws157">in <span class="ff8 fc0 ws13a">poly<span class="fc6 ls34">.</span>iter_as(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">&lt;dd<span class="ff9 ws13b">&apos;</span></span>):</span></span></span></div><div class="t m0 x5 hf y1721 ff7 fs5 fc5 sc0 ls0 ws1a3">... <span class="fca ws156">print<span class="ff8 fc0">(p)</span></span></div><div class="t m0 x5 h10 y1722 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf y1723 ff8 fs5 fc8 sc0 ls0 ws4">Polygon 0</div><div class="t m0 x5 hf y1724 ff8 fs5 fc8 sc0 ls0 ws4">(1.0, 2.5)</div><div class="t m0 x5 hf y1725 ff8 fs5 fc8 sc0 ls0 ws4">(3.5, 4.0)</div><div class="t m0 x5 hf y1726 ff8 fs5 fc8 sc0 ls0 ws4">(2.5, 1.5)</div><div class="t m0 x5 hf y1727 ff8 fs5 fc8 sc0 ls0 ws4">Polygon 1</div><div class="t m0 x5 hf y1728 ff8 fs5 fc8 sc0 ls0 ws4">(7.0, 1.2)</div><div class="t m0 x5 hf y1729 ff8 fs5 fc8 sc0 ls0 ws4">(5.1, 3.0)</div><div class="t m0 x5 hf y172a ff8 fs5 fc8 sc0 ls0 ws4">(0.5, 7.5)</div><div class="t m0 x5 hf y172b ff8 fs5 fc8 sc0 ls0 ws4">(0.8, 9.0)</div><div class="t m0 x5 hf y172c ff8 fs5 fc8 sc0 ls0 ws4">Polygon 2</div><div class="t m0 x5 hf y172d ff8 fs5 fc8 sc0 ls0 ws4">(3.4, 6.3)</div><div class="t m0 x5 hf y172e ff8 fs5 fc8 sc0 ls0 ws4">(1.2, 0.5)</div><div class="t m0 x5 hf y172f ff8 fs5 fc8 sc0 ls0 ws4">(4.6, 9.2)</div><div class="t m0 x5 hf y1730 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x5 hf y1731 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">for <span class="ff8 fc0 ws13b">n, poly </span><span class="ws157">in <span class="ff8 ws13a">enumerate<span class="fc0">(polydata):</span></span></span></span></div><div class="t m0 x5 hf y1732 ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Polygon</span>&apos;</span><span class="ls0 ws13b">, n)</span></span></span></div><div class="t m0 x5 hf y1733 ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws139">for <span class="ff8 fc0 ls32">p</span><span class="ws157">in <span class="ff8 fc0 ws13a">poly<span class="fc6 ls34">.</span>iter_as(Point):</span></span></span></div><div class="t m0 x5 hf y1734 ff7 fs5 fc5 sc0 ls0 ws1a3">... <span class="fca ws156">print<span class="ff8 fc0 ws13a">(p<span class="fc6 ls34">.</span><span class="ws13b">x, p<span class="fc6 ls34">.</span>y)</span></span></span></div><div class="t m0 x5 h10 y1735 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf y1736 ff8 fs5 fc8 sc0 ls0 ws4">Polygon 0</div><div class="t m0 x5 hf y1737 ff8 fs5 fc8 sc0 ls0 ws4">1.0 2.5</div><div class="t m0 x5 hf y1738 ff8 fs5 fc8 sc0 ls0 ws4">3.5 4.0</div><div class="t m0 x5 hf y1739 ff8 fs5 fc8 sc0 ls0 ws4">2.5 1.5</div><div class="t m0 x5 hf y173a ff8 fs5 fc8 sc0 ls0 ws4">Polygon 1</div><div class="t m0 x5 hf y173b ff8 fs5 fc8 sc0 ls0 ws4">7.0 1.2</div><div class="t m0 x5 hf y173c ff8 fs5 fc8 sc0 ls0 ws4">5.1 3.0</div><div class="t m0 x5 hf yb1c ff8 fs5 fc8 sc0 ls0 ws4">0.5 7.5</div><div class="t m0 x5 hf y173d ff8 fs5 fc8 sc0 ls0 ws4">0.8 9.0</div><div class="t m0 x5 hf y173e ff8 fs5 fc8 sc0 ls0 ws4">Polygon 2</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">8.12.<span class="_ _5"> </span>6.12 <span class="ff1 ws6e7">读取嵌套和可变长二进制数据 </span>203</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

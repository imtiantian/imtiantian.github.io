<div id="pfa2" class="pf w0 h0" data-page-no="a2"><div class="pc pca2 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bga2.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 he y137 ff2 fs2 fc4 sc0 ls0 ws212">7.13.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 y11a8 ff1 fs3 fc0 sc0 ls0 wsc">使用 <span class="ff6 ws1dc">os.listdir() </span>函数来获取某个目录中的文件列表：</div><div class="t m0 x5 h10 y11a9 ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc">os</span></div><div class="t m0 x5 hf yc27 ff8 fs5 fc0 sc0 ls0 ws15f">names <span class="fc6 ls33">=</span><span class="ws13a">os<span class="fc6 ls34">.</span>listdir(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">somedir<span class="ff9 ws13b">&apos;</span></span>)</span></div><div class="t m0 x0 h9 y11aa ff1 fs3 fc0 sc0 ls0 wsa0">结果会返回目录中所<span class="_ _6"></span>有文件列表，包括所有文<span class="_ _6"></span>件，子目录，符号链接等等。<span class="_ _6"></span>如果你</div><div class="t m0 x5 h9 y11ab ff1 fs3 fc0 sc0 ls1f ws6be">需要通过某种方式过滤数据，可以考虑结合 <span class="ff6 ls0 ws6bf">os.path </span><span class="ws113">库中的一些函数来使用列表推导。</span></div><div class="t m0 x5 h9 y11ac ff1 fs3 fc0 sc0 ls0">比如：</div><div class="t m0 x5 h10 y11ad ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc">os.path</span></div><div class="t m0 x5 h11 y11ae ffa fs5 fcd sc0 ls0 ws4"># Get all regular files</div><div class="t m0 x5 hf y11af ff8 fs5 fc0 sc0 ls0 ws15f">names <span class="fc6 ls33">=</span>[name <span class="ff7 fca ws139">for </span><span class="ws13c">name <span class="ff7 fca ws157">in </span><span class="ws13a">os<span class="fc6 ls34">.</span>listdir(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">somedir<span class="ff9 ws13b">&apos;</span></span>)</span></span></div><div class="t m0 x16 hf y11b0 ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 fc0 ws13a">os<span class="fc6 ls34">.</span>path<span class="fc6 ls34">.</span>isfile(os<span class="fc6 ls34">.</span>path<span class="fc6 ls34">.</span>join(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">somedir<span class="ff9 ls34">&apos;</span></span><span class="ws13b">, name))]</span></span></div><div class="t m0 x5 h11 y11b1 ffa fs5 fcd sc0 ls0 ws4"># Get all dirs</div><div class="t m0 x5 hf y11b2 ff8 fs5 fc0 sc0 ls0 ws16d">dirnames <span class="fc6 ls32">=</span><span class="ws15f">[name <span class="ff7 fca ws139">for </span><span class="ws13c">name <span class="ff7 fca ws157">in </span><span class="ws13a">os<span class="fc6">.</span>listdir(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">somedir<span class="ff9 ls34">&apos;</span></span>)</span></span></span></div><div class="t m0 x16 hf y11b3 ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 fc0 ws13a">os<span class="fc6 ls34">.</span>path<span class="fc6 ls34">.</span>isdir(os<span class="fc6">.</span>path<span class="fc6 ls34">.</span>join(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">somedir<span class="ff9 ls34">&apos;</span></span><span class="ws4">, name))]</span></span></div><div class="t m0 x0 h9 y11b4 ff1 fs3 fc0 sc0 ls0 ws6c0">字符<span class="_ _6"></span>串<span class="_ _6"></span>的 <span class="ff6 ws6c1">startswith() </span><span class="ls115">和</span><span class="ff6 ws6c2">endswith() </span><span class="ls6b ws28f">方法对于过滤一个目录的内容也是很有用<span class="_ _1"></span></span></div><div class="t m0 x5 h9 y11b5 ff1 fs3 fc0 sc0 ls0">的。比如：</div><div class="t m0 x5 hf y11b6 ff8 fs5 fc0 sc0 ls0 ws155">pyfiles <span class="fc6 ls32">=</span><span class="ws458">[name <span class="ff7 fca ws139">for </span><span class="ws161">name <span class="ff7 fca ws157">in </span><span class="ws13a">os<span class="fc6 ls34">.</span>listdir(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">somedir<span class="ff9 ls34">&apos;</span></span>)</span></span></span></div><div class="t m0 x17 hf y11b7 ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 fc0 ws13a">name<span class="fc6 ls34">.</span>endswith(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">.py<span class="ff9 ls34">&apos;</span></span>)]</span></div><div class="t m0 x0 h9 y11b8 ff1 fs3 fc0 sc0 ls0 ws38">对于文件名的匹配，你可能会考虑使用 <span class="ff6 ws27b">glob </span><span class="ls4">或</span><span class="ff6 ws472">fnmatch </span>模块。比如：</div><div class="t m0 x5 h10 y11b9 ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc">glob</span></div><div class="t m0 x5 hf y11ba ff8 fs5 fc0 sc0 ls0 ws155">pyfiles <span class="fc6 ls32">=</span><span class="ws13a">glob<span class="fc6 ls34">.</span>glob(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">somedir/*.py<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 hf y11bb ff7 fs5 fca sc0 ls0 ws15a">from <span class="fcc ws2f0">fnmatch </span><span class="ws1ff">import <span class="ff8 fc0">fnmatch</span></span></div><div class="t m0 x5 hf y11bc ff8 fs5 fc0 sc0 ls0 ws155">pyfiles <span class="fc6 ls32">=</span><span class="ws458">[name <span class="ff7 fca ws139">for </span><span class="ws161">name <span class="ff7 fca ws157">in </span><span class="ws13a">os<span class="fc6 ls34">.</span>listdir(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">somedir<span class="ff9 ls34">&apos;</span></span>)</span></span></span></div><div class="t m0 x17 hf y11bd ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 fc0 ws147">fnmatch(name, <span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws13a">*.py<span class="ff9 ws13b">&apos;</span></span>)]</span></div><div class="t m0 x5 he y11be ff2 fs2 fc4 sc0 ls0 ws212">7.13.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 y11bf ff1 fs3 fc0 sc0 ls56 ws1fa">获取目录中的列表是很容易的<span class="_ _c"></span>，但是其返回结果只是目录中实体名列表而已<span class="_ _1"></span>。如<span class="_ _1"></span></div><div class="t m0 x5 h9 y11c0 ff1 fs3 fc0 sc0 ls0 wsa0">果<span class="_ _0"></span>你<span class="_ _6"></span>还<span class="_ _0"></span>想<span class="_ _0"></span>获<span class="_ _0"></span>取<span class="_ _6"></span>其<span class="_ _0"></span>他<span class="_ _0"></span>的<span class="_ _0"></span>元<span class="_ _6"></span>信<span class="_ _0"></span>息，<span class="_ _0"></span>比<span class="_ _0"></span>如<span class="_ _6"></span>文<span class="_ _0"></span>件<span class="_ _0"></span>大<span class="_ _0"></span>小，<span class="_ _6"></span>修<span class="_ _0"></span>改<span class="_ _0"></span>时<span class="_ _0"></span>间<span class="_ _6"></span>等<span class="_ _0"></span>等，<span class="_ _0"></span>你<span class="_ _0"></span>或<span class="_ _0"></span>许<span class="_ _6"></span>还<span class="_ _0"></span>需<span class="_ _0"></span>要<span class="_ _6"></span>使<span class="_ _0"></span>用<span class="_ _0"></span>到</div><div class="t m0 x5 h9 y11c1 ff6 fs3 fc0 sc0 ls0 ws23a">os.path <span class="ff1 wsc">模块中的函数或着 </span><span class="ws1d1">os.stat() <span class="ff1">函数来收集数据。比如：</span></span></div><div class="t m0 x5 h11 y83a ffa fs5 fcd sc0 ls0 ws4"># Example of getting a directory listing</div><div class="t m0 x5 h10 y83c ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc">os</span></div><div class="t m0 x5 h10 y83d ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc">os.path</span></div><div class="t m0 x5 h10 y83e ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc">glob</span></div><div class="t m0 x5 hf y83f ff8 fs5 fc0 sc0 ls0 ws155">pyfiles <span class="fc6 ls32">=</span><span class="ws13a">glob<span class="fc6 ls34">.</span>glob(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">*.py<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 h11 y841 ffa fs5 fcd sc0 ls0 ws4"># Get file sizes and modification dates</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">7.13.<span class="_ _5"> </span>5.13 <span class="ff1 ws512">获取文件夹中的文件列表 </span>153</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

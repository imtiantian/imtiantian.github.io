<div id="pf91" class="pf w0 h0" data-page-no="91"><div class="pc pc91 w0 h0"><img class="bi x13 y5 w2 hb" alt="" src="bg91.png"/><div class="t m0 xe h8 y76 ff2 fs3 fc0 sc0 ls0">CHAPTER</div><div class="t m0 x27 hc y77 ff2 fs4 fc0 sc0 ls0">SEVEN</div><div class="t m0 x28 hd y78 ff1 fs4 fc0 sc0 ls0 ws357">第五章：文件与 <span class="ff2">IO</span></div><div class="t m0 x0 h9 y79 ff1 fs3 fc0 sc0 ls3a ws153">所有程序都要处理输入和输出。这一章将涵盖处理不同类型的文件，包括文本和二</div><div class="t m0 x5 h9 ycf ff1 fs3 fc0 sc0 ls0">进制文件，文件编码和其他相关的内容。对文件名和目录的操作也会涉及到。</div><div class="t m0 x0 h7 yfe4 ff4 fs3 fc0 sc0 ls0 wsa5">Con<span class="_ _1"></span>ten<span class="_ _1"></span>ts:</div><div class="t m0 x5 hd yfe5 ff2 fs4 fc4 sc0 ls0 ws134">7.1<span class="_ _e"> </span>5.1 <span class="ff1">读写文本数据</span></div><div class="t m0 x5 he yfe6 ff2 fs2 fc4 sc0 ls0 ws135">7.1.1 <span class="ff1">问题</span></div><div class="t m0 x0 h7 yfe7 ff1 fs3 fc0 sc0 ls0 ws38">你需要读写各种不同编码的文本数据，比如 <span class="ff4 wsa5">ASCI<span class="_ _6"></span>I</span><span class="wsa0">，<span class="ff4 ws61f">UTF-8 </span><span class="ls4">或</span><span class="ff4 ws620">UTF-16 </span>编码等。</span></div><div class="t m0 x5 he yfe8 ff2 fs2 fc4 sc0 ls0 ws135">7.1.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 yfe9 ff1 fs3 fc0 sc0 ls0 wsc">使用带有 <span class="ff6 ws308">rt </span><span class="ws63">模式的 <span class="ff6 ws25d">open() </span>函数读取文本文件。如下所示：</span></div><div class="t m0 x5 h11 yfea ffa fs5 fcd sc0 ls0 ws4"># Read the entire file as a single string</div><div class="t m0 x5 hf yfeb ff7 fs5 fca sc0 ls0 ws15a">with <span class="ff8 ws13a">open<span class="fc0">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">somefile.txt<span class="ff9 ws13b">&apos;</span></span><span class="ls33">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">rt<span class="ff9 ls34">&apos;</span></span><span class="ls32">)</span></span></span><span class="ws157">as <span class="ff8 fc0">f:</span></span></div><div class="t m0 x15 hf yfec ff8 fs5 fc0 sc0 ls0 ws13c">data <span class="fc6 ls32">=</span><span class="ls34">f</span><span class="fc6 ws13a">.</span>read()</div><div class="t m0 x5 h11 yfed ffa fs5 fcd sc0 ls0 ws4"># Iterate over the lines of the file</div><div class="t m0 x5 hf yfee ff7 fs5 fca sc0 ls0 ws15a">with <span class="ff8 ws13a">open<span class="fc0">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">somefile.txt<span class="ff9 ws13b">&apos;</span></span><span class="ls33">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">rt<span class="ff9 ls34">&apos;</span></span><span class="ls32">)</span></span></span><span class="ws157">as <span class="ff8 fc0">f:</span></span></div><div class="t m0 x15 hf yfef ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws161">line </span><span class="ws160">in <span class="ff8 fc0">f:</span></span></div><div class="t m0 x16 h11 yff0 ffa fs5 fcd sc0 ls0 ws13b"># process line</div><div class="t m0 x16 hf yff1 ff8 fs5 fc6 sc0 ls0 ws13a">...</div><div class="t m0 x0 h9 yff2 ff1 fs3 fc0 sc0 ls0 ws621">类似<span class="_ _6"></span>的，<span class="_ _6"></span>为<span class="_ _6"></span>了<span class="_ _6"></span>写入<span class="_ _6"></span>一<span class="_ _6"></span>个<span class="_ _6"></span>文<span class="_ _6"></span>本文<span class="_ _6"></span>件，<span class="_ _6"></span>使<span class="_ _6"></span>用<span class="_ _6"></span>带有 <span class="ff6 ws622">wt </span><span class="ls2d ws623">模式的 </span><span class="ff6 ws4f6">open() </span><span class="wsa0">函<span class="_ _6"></span>数，<span class="_ _6"></span>如<span class="_ _6"></span>果<span class="_ _6"></span>之前<span class="_ _6"></span>文</span></div><div class="t m0 x5 h9 yff3 ff1 fs3 fc0 sc0 ls0">件内容存在则清除并覆盖掉。如下所示：</div><div class="t m0 x5 h11 yff4 ffa fs5 fcd sc0 ls0 ws4"># Write chunks of text data</div><div class="t m0 x5 hf yff5 ff7 fs5 fca sc0 ls0 ws15a">with <span class="ff8 ws13a">open<span class="fc0">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">somefile.txt<span class="ff9 ws13b">&apos;</span></span><span class="ls33">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">wt<span class="ff9 ls34">&apos;</span></span><span class="ls32">)</span></span></span><span class="ws157">as <span class="ff8 fc0">f:</span></span></div><div class="t m0 x15 hf yff6 ff8 fs5 fc0 sc0 ls34">f<span class="fc6 ls0 ws13a">.<span class="fc0">write(text1)</span></span></div><div class="t m0 x15 hf yff7 ff8 fs5 fc0 sc0 ls34">f<span class="fc6 ls0 ws13a">.<span class="fc0">write(text2)</span></span></div><div class="t m0 x15 hf yff8 ff8 fs5 fc6 sc0 ls0 ws13a">...</div><div class="t m0 x5 h11 yff9 ffa fs5 fcd sc0 ls0 ws4"># Redirected print statement</div><div class="t m0 x26 h8 y29 ff2 fs3 fc0 sc0 ls0">136</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

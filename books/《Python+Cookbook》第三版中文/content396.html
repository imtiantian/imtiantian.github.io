<div id="pf18c" class="pf w0 h0" data-page-no="18c"><div class="pc pc18c w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg18c.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 h10 yb1e ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">sys</span></span></div><div class="t m0 x5 hf yb1f ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">sys<span class="fc6 ls34">.</span>meta_path<span class="fc6 ls34">.</span>insert(<span class="fc7 ls34">0</span><span class="ws13b">, Finder()) <span class="ffa fcd ws4"># Insert as first entry</span></span></span></div><div class="t m0 x5 h10 yb20 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">math</span></span></div><div class="t m0 x5 hf yb21 ff8 fs5 fc8 sc0 ls0 ws4">Looking for math None</div><div class="t m0 x5 h10 yb22 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">types</span></span></div><div class="t m0 x5 hf yb23 ff8 fs5 fc8 sc0 ls0 ws4">Looking for types None</div><div class="t m0 x5 h10 yb24 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">threading</span></span></div><div class="t m0 x5 hf yb25 ff8 fs5 fc8 sc0 ls0 ws4">Looking for threading None</div><div class="t m0 x5 hf yb26 ff8 fs5 fc8 sc0 ls0 ws4">Looking for time None</div><div class="t m0 x5 hf yb27 ff8 fs5 fc8 sc0 ls0 ws4">Looking for traceback None</div><div class="t m0 x5 hf yfda ff8 fs5 fc8 sc0 ls0 ws4">Looking for linecache None</div><div class="t m0 x5 hf y1e41 ff8 fs5 fc8 sc0 ls0 ws4">Looking for tokenize None</div><div class="t m0 x5 hf y1e42 ff8 fs5 fc8 sc0 ls0 ws4">Looking for token None</div><div class="t m0 x5 hf y1e43 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y2875 ff1 fs3 fc0 sc0 ls0 wsdcb">注<span class="_ _12"></span>意<span class="_ _24"></span>看 <span class="ff6 ws3e1">find module()<span class="_ _26"> </span></span><span class="ls1c4 wsdcc">方法是<span class="_ _6"></span>怎样在每一个导入就被触发的<span class="_ _19"></span>。这个方法中的<span class="_ _19"></span></span></div><div class="t m0 x5 h7 y2876 ff4 fs3 fc0 sc0 ls0 wsdcd">path <span class="ff1 ls19c wsdce">参数的作用是处理包<span class="_ _8"></span>。多个包被导入<span class="_ _d"></span>，就是一个可在包的 <span class="ff6 ls0 wsdcf">path <span class="ff1 wsa0">属<span class="_ _12"></span>性<span class="_ _0"></span>中<span class="_ _0"></span>找</span></span></span></div><div class="t m0 x5 h9 y2877 ff1 fs3 fc0 sc0 ls1c5 wsdd0">到的路径列表<span class="_ _c"></span>。要找到包的子组件就要检查这些路径<span class="_ _c"></span>。比如注意对于 <span class="ff6 ls0 wsdd1">xml.etree <span class="ff1">和</span></span></div><div class="t m0 x5 h9 y2878 ff6 fs3 fc0 sc0 ls0 ws270">xml.etree.ElementTree <span class="ff1">的路径配置：</span></div><div class="t m0 x5 h10 y2525 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">xml.etree.ElementTree</span></span></div><div class="t m0 x5 hf y2879 ff8 fs5 fc8 sc0 ls0 ws4">Looking for xml None</div><div class="t m0 x5 hf y287a ff8 fs5 fc8 sc0 ls0 ws4">Looking for xml.etree [<span class="ff9 ws13b">&apos;</span><span class="ws13a">/usr/local/lib/python3.3/xml<span class="ff9 ls34">&apos;</span>]</span></div><div class="t m0 x5 hf y287b ff8 fs5 fc8 sc0 ls0 ws4">Looking for xml.etree.ElementTree [<span class="ff9 ls34">&apos;</span><span class="ws13a">/usr/local/lib/python3.3/xml/etree<span class="ff9 ls34">&apos;</span>]</span></div><div class="t m0 x5 hf y287c ff8 fs5 fc8 sc0 ls0 ws4">Looking for warnings None</div><div class="t m0 x5 hf yb0a ff8 fs5 fc8 sc0 ls0 ws4">Looking for contextlib None</div><div class="t m0 x5 hf yb0b ff8 fs5 fc8 sc0 ls0 ws4">Looking for xml.etree.ElementPath [<span class="ff9 ls34">&apos;</span><span class="ws13a">/usr/local/lib/python3.3/xml/etree<span class="ff9 ls34">&apos;</span>]</span></div><div class="t m0 x5 hf yb0c ff8 fs5 fc8 sc0 ls0 ws4">Looking for _elementtree None</div><div class="t m0 x5 hf yb0d ff8 fs5 fc8 sc0 ls0 ws4">Looking for copy None</div><div class="t m0 x5 hf yb0e ff8 fs5 fc8 sc0 ls0 ws4">Looking for org None</div><div class="t m0 x5 hf yb0f ff8 fs5 fc8 sc0 ls0 ws4">Looking for pyexpat None</div><div class="t m0 x5 hf yb10 ff8 fs5 fc8 sc0 ls0 ws4">Looking for ElementC14N None</div><div class="t m0 x5 hf yb11 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y287d ff1 fs3 fc0 sc0 ls18b">在<span class="ff6 ls0 wsdd2">sys.meta<span class="_ _7"> </span>path </span><span class="ls0 wsa0">上查找器的位置很重要，<span class="_ _c"></span>将它从队头移到队尾，然后再试试导入</span></div><div class="t m0 x5 h9 y287e ff1 fs3 fc0 sc0 ls0">看：</div><div class="t m0 x5 hf y287f ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">del <span class="ff8 fc0 ws13a">sys<span class="fc6 ls34">.</span>meta_path[<span class="fc7 ls34">0</span>]</span></span></div><div class="t m0 x5 hf y2880 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">sys<span class="fc6 ls34">.</span>meta_path<span class="fc6 ls34">.</span>append(Finder())</span></div><div class="t m0 x5 h10 y2881 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">urllib.request</span></span></div><div class="t m0 x5 h10 y704 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">datetime</span></span></div><div class="t m0 x0 h7 y2882 ff1 fs3 fc0 sc0 ls0 wsdd3">现在你看不到任何输出了，因为导入被 <span class="ff4 wsdd4">sys.meta<span class="_ _16"> </span>path </span><span class="wsa0">中的其他实体处理。这时候，</span></div><div class="t m0 x5 h9 y2883 ff1 fs3 fc0 sc0 ls0">你只有在导入不存在模块的时候才能看到它被触发：</div><div class="t m0 x5 h10 y2884 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">fib</span></span></div><div class="t m0 x5 hf y2885 ff8 fs5 fc8 sc0 ls0 ws4">Looking for fib None</div><div class="t m0 x5 hf y2886 ff8 fs5 fce sc0 ls0 ws4">Traceback (most recent call last):</div><div class="t m0 x15 hf y2887 ff8 fs5 fc0 sc0 ls0 ws13c">File <span class="fc9 ws13a">&quot;&lt;stdin&gt;&quot;</span><span class="ws145">, line <span class="fc7 ls34">1</span><span class="ls32">,</span><span class="ff7 fca ws160">in </span><span class="fc6 ws13a">&lt;<span class="fc0">module</span>&gt;</span></span></div><div class="t m0 x5 hf y2888 ff8 fs5 fc2 sc0 ls0 ws13a">ImportError<span class="fc0 ws4">: No module named <span class="ff9 ls34">&apos;</span><span class="ws13a">fib<span class="ff9">&apos;</span></span></span></div><div class="t m0 x5 h10 y2889 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">xml.superfast</span></span></div><div class="t m0 x5 hf y288a ff8 fs5 fc8 sc0 ls0 ws4">Looking for xml.superfast [<span class="ff9 ws13b">&apos;</span><span class="ws13a">/usr/local/lib/python3.3/xml<span class="ff9 ws13b">&apos;</span>]</span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 wsd97">12.11.<span class="_ _5"> </span>10.11 <span class="ff1 wsd98">通过钩子远程加载模块 </span>387</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

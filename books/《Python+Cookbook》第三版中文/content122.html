<div id="pf7a" class="pf w0 h0" data-page-no="7a"><div class="pc pc7a w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg7a.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y1ab ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">frange<span class="fc0 ws4">(start, stop, increment):</span></span></div><div class="t m0 x15 hf y1ac ff8 fs5 fc0 sc0 ls32">x<span class="fc6 ls33">=</span><span class="ls0">start</span></div><div class="t m0 x15 hf y1ad ff7 fs5 fca sc0 ls0 ws16a">while <span class="ff8 fc0 ls33">x<span class="fc6 ls32">&lt;</span><span class="ls0">stop:</span></span></div><div class="t m0 x16 hf y1ae ff7 fs5 fca sc0 ls0 ws16a">yield <span class="ff8 fc0">x</span></div><div class="t m0 x16 hf y1af ff8 fs5 fc0 sc0 ls32">x<span class="fc6 ls0 ws23d">+= <span class="fc0">increment</span></span></div><div class="t m0 x0 h7 yd8e ff1 fs3 fc0 sc0 ls0 ws578">为了使<span class="_ _6"></span>用这个函<span class="_ _6"></span>数，你可<span class="_ _6"></span>以用 <span class="ff4 ws579">for </span><span class="wsa0">循环迭<span class="_ _6"></span>代它或者<span class="_ _6"></span>使用其<span class="_ _6"></span>他接受一<span class="_ _6"></span>个可迭代<span class="_ _6"></span>对象的</span></div><div class="t m0 x5 h7 yd8f ff1 fs3 fc0 sc0 ls0 ws14">函数 <span class="ff4 wsa5">(</span>比如 <span class="ff6 ws17d">sum() <span class="ff4 ls83">,</span><span class="ws25d">list() </span></span><span class="lsb">等</span><span class="ff4 wsa5">)</span>。示例如下：</div><div class="t m0 x5 hf yd90 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">for <span class="ff8 fc0 ls32">n</span><span class="ws157">in <span class="ff8 fc0 ws13a">frange(<span class="fc7">0</span><span class="ls33">,</span><span class="fc7">4</span><span class="ls33">,</span><span class="fc7">0.5</span>):</span></span></span></div><div class="t m0 x5 hf yd91 ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws156">print<span class="ff8 fc0">(n)</span></span></div><div class="t m0 x5 h10 yd92 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf yd93 ff8 fs5 fc8 sc0 ls0">0</div><div class="t m0 x5 hf yd94 ff8 fs5 fc8 sc0 ls0">0.5</div><div class="t m0 x5 hf yd95 ff8 fs5 fc8 sc0 ls0">1.0</div><div class="t m0 x5 hf yd96 ff8 fs5 fc8 sc0 ls0">1.5</div><div class="t m0 x5 hf yd97 ff8 fs5 fc8 sc0 ls0">2.0</div><div class="t m0 x5 hf yd98 ff8 fs5 fc8 sc0 ls0">2.5</div><div class="t m0 x5 hf yd99 ff8 fs5 fc8 sc0 ls0">3.0</div><div class="t m0 x5 hf yd9a ff8 fs5 fc8 sc0 ls0">3.5</div><div class="t m0 x5 hf yd9b ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fca ws13a">list<span class="fc0">(frange(<span class="fc7">0</span><span class="ls33">,<span class="fc7 ls34">1</span><span class="ls32">,</span></span><span class="fc7">0.125</span>))</span></span></div><div class="t m0 x5 hf yd9c ff8 fs5 fc8 sc0 ls0 ws4">[0, 0.125, 0.25, 0.375, 0.5, 0.625, 0.75, 0.875]</div><div class="t m0 x5 hf yd9d ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x5 he yd9e ff2 fs2 fc4 sc0 ls0 ws135">6.3.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 yd9f ff1 fs3 fc0 sc0 ls0 ws57a">一<span class="_ _6"></span>个<span class="_ _6"></span>函<span class="_ _6"></span>数<span class="_ _6"></span>中<span class="_ _6"></span>需<span class="_ _6"></span>要<span class="_ _6"></span>有<span class="_ _6"></span>一个 <span class="ff6 ws177">yield </span><span class="ls14 ws174">语句即<span class="_ _6"></span>可将其转换为一个生成器<span class="_ _1"></span>。跟普通函数不同<span class="_ _1"></span></span></div><div class="t m0 x5 h9 yda0 ff1 fs3 fc0 sc0 ls1e ws111">的是<span class="_ _1"></span>，生成器只能用于迭代操作<span class="_ _1"></span>。下面是一个实验，向你展示这样的函数底层工<span class="_ _1"></span>作机</div><div class="t m0 x5 h9 yda1 ff1 fs3 fc0 sc0 ls0">制：</div><div class="t m0 x5 hf yda2 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">def <span class="ff8 fcb ws13a">countdown<span class="fc0">(n):</span></span></span></div><div class="t m0 x5 hf yda3 ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws4">Starting to count from</span>&apos;</span><span class="ls0 ws13b">, n)</span></span></span></div><div class="t m0 x5 hf yda4 ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws16a">while <span class="ff8 fc0 ls33">n<span class="fc6 ls32">&gt;<span class="fc7 ls34">0</span></span><span class="ls0">:</span></span></span></div><div class="t m0 x5 hf yda5 ff7 fs5 fc5 sc0 ls0 ws1a3">... <span class="fca ws16a">yield <span class="ff8 fc0">n</span></span></div><div class="t m0 x5 hf yda6 ff7 fs5 fc5 sc0 ls0 ws1a3">... <span class="ff8 fc0 ls32">n<span class="fc6 ls0 ws23d">-= <span class="fc7">1</span></span></span></div><div class="t m0 x5 hf yda7 ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Done!<span class="ff9 ws13b">&apos;</span><span class="fc0">)</span></span></span></span></span></div><div class="t m0 x5 h10 yda8 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 h11 yda9 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Create the generator, notice no output appears</span></div><div class="t m0 x5 hf ydaa ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">c<span class="fc6 ls33">=</span><span class="ls0 ws13a">countdown(<span class="fc7 ls34">3</span>)</span></span></div><div class="t m0 x5 hf ydab ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">c</span></div><div class="t m0 x5 hf ydac ff8 fs5 fc8 sc0 ls0 ws4">&lt;generator object countdown at 0x1006a0af0&gt;</div><div class="t m0 x5 h11 y7c6 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Run to first yield and emit a value</span></div><div class="t m0 x5 hf y7c7 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fca ws13a">next<span class="fc0">(c)</span></span></div><div class="t m0 x5 hf y7c8 ff8 fs5 fc8 sc0 ls0 ws4">Starting to count from 3</div><div class="t m0 x5 hf ydad ff8 fs5 fc8 sc0 ls0">3</div><div class="t m0 x5 h11 ydae ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Run to the next yield</span></div><div class="t m0 x5 hf ydaf ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fca ws13a">next<span class="fc0">(c)</span></span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">6.3.<span class="_ _5"> </span>4.3 <span class="ff1 ws577">使用生成器创建新的迭代模式 </span>113</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

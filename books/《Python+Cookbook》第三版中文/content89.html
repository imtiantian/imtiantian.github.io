<div id="pf59" class="pf w0 h0" data-page-no="59"><div class="pc pc59 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg59.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 h11 y15f ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Write a UTF-8 filename</span></div><div class="t m0 x5 hf y160 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws15a">with <span class="ff8 ws13a">open<span class="fc0 ls34">(<span class="ff9 fc9">&apos;</span></span><span class="fc9">jalape<span class="ff7 ws156">\xf1</span>o.txt<span class="ff9 ls34">&apos;</span><span class="fc0 ls32">,</span><span class="ff9 ls34">&apos;</span>w<span class="ff9 ls34">&apos;</span><span class="fc0 ls33">)</span></span></span><span class="ws157">as <span class="ff8 fc0">f:</span></span></span></div><div class="t m0 x5 hf y956 ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="ff8 fc0 ls34">f<span class="fc6 ls0 ws13a">.<span class="fc0">write(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">spicy<span class="ff9 ls34">&apos;</span></span>)</span></span></span></div><div class="t m0 x5 h10 y957 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 h11 y958 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Get a directory listing</span></div><div class="t m0 x5 h10 y959 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">os</span></span></div><div class="t m0 x5 hf y95a ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">os<span class="fc6 ls34">.</span>listdir(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">.<span class="ff9 ls34">&apos;</span></span><span class="ls33">)</span><span class="ffa fcd ws4"># Text string (names are decoded)</span></span></div><div class="t m0 x5 hf y95b ff8 fs5 fc8 sc0 ls34">[<span class="ff9 ls0 ws13b">&apos;</span><span class="ls0 ws13a">jalapeño.txt</span><span class="ff9">&apos;</span><span class="ls0">]</span></div><div class="t m0 x5 hf y95c ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">os<span class="fc6 ls34">.</span>listdir(b<span class="ff9 fc9 ws13b">&apos;<span class="ff8 ls34">.<span class="ff9">&apos;</span></span></span><span class="ls32">)</span><span class="ffa fcd ws4"># Byte string (names left as bytes)</span></span></div><div class="t m0 x5 hf y9f3 ff8 fs5 fc8 sc0 ls0 ws13a">[b<span class="ff9 ls34">&apos;</span>jalapen\xcc\x83o.txt<span class="ff9 ws13b">&apos;</span>]</div><div class="t m0 x5 hf y9f4 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y9f5 ff1 fs3 fc0 sc0 ls3a ws153">注意例子中的最后部分给目录名传递一个字节字符串是怎样导致结果中文件名以未</div><div class="t m0 x5 h7 y9f6 ff1 fs3 fc0 sc0 ls48 ws465">解码字节返回的<span class="_ _1"></span>。在目录中的文件名包含原始的 <span class="ff4 ls0 ws466">UTF-8 <span class="ff1 ws467">编<span class="_ _6"></span>码。参<span class="_ _6"></span>考 </span><span class="ws468">5.15 </span></span><span class="ls40 ws180">小节获取更</span></div><div class="t m0 x5 h9 y9f7 ff1 fs3 fc0 sc0 ls0">多文件名相关的内容。</div><div class="t m0 x0 h9 y9f8 ff1 fs3 fc0 sc0 ls63 ws21f">最后提一点<span class="_ _c"></span>，一些程序员为了提升程序执行的速度会倾向于使用字节字符串而不<span class="_ _1"></span></div><div class="t m0 x5 h7 y9f9 ff1 fs3 fc0 sc0 ls0 ws469">是<span class="_ _0"></span>文<span class="_ _0"></span>本<span class="_ _0"></span>字<span class="_ _0"></span>符<span class="_ _6"></span>串。<span class="_ _0"></span>尽<span class="_ _0"></span>管<span class="_ _0"></span>操<span class="_ _0"></span>作<span class="_ _0"></span>字<span class="_ _0"></span>节<span class="_ _0"></span>字<span class="_ _0"></span>符<span class="_ _0"></span>串<span class="_ _0"></span>确<span class="_ _0"></span>实<span class="_ _6"></span>会<span class="_ _0"></span>比<span class="_ _0"></span>文<span class="_ _0"></span>本<span class="_ _0"></span>更<span class="_ _0"></span>加<span class="_ _0"></span>高<span class="_ _0"></span>效 <span class="ff4 wsa5">(</span><span class="wsa0">因<span class="_ _0"></span>为<span class="_ _0"></span>处<span class="_ _0"></span>理<span class="_ _0"></span>文<span class="_ _6"></span>本<span class="_ _0"></span>固<span class="_ _0"></span>有<span class="_ _0"></span>的</span></div><div class="t m0 x5 h7 y9fa ff4 fs3 fc0 sc0 ls0 ws46a">Unico<span class="_ _6"></span>de <span class="ff1 wsa0">相关<span class="_ _6"></span>开<span class="_ _6"></span>销</span><span class="ls1b">)<span class="ff1 ls22 ws119">。这样做通常会导致非常杂乱的代码<span class="_ _1"></span>。你会经常发现字节字符串并</span></span></div><div class="t m0 x5 h7 y9fb ff1 fs3 fc0 sc0 lsf ws46b">不能和 <span class="ff4 ls0 ws46c">Python </span><span class="wsdb">的其他部分工作的很好<span class="_ _c"></span>，<span class="_ _6"></span>并且你还得手动处理所有的编码<span class="_ _c"></span><span class="ff4 ls6">/<span class="ff1 lsf">解码操作。<span class="_ _c"></span></span></span></span></div><div class="t m0 x5 h9 y9fc ff1 fs3 fc0 sc0 ls13 wse5">坦白讲<span class="_ _1"></span>，如果你在处理文本的话，就直接在程序中使用普通的文本字符串而不是字节<span class="_ _c"></span></div><div class="t m0 x5 h9 y9fd ff1 fs3 fc0 sc0 ls0">字符串。不做死就不会死！</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">4.20.<span class="_ _5"> </span>2.20 <span class="ff1 ws23b">字节字符串上的字符串操作 </span>80</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

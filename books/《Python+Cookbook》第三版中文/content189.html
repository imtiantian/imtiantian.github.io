<div id="pfbd" class="pf w0 h0" data-page-no="bd"><div class="pc pcbd w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bgbd.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x15 hf y1ab ff8 fs5 fca sc0 ls0 ws13a">next<span class="fc0">(doc)</span></div><div class="t m0 x15 hf y1ad ff8 fs5 fc0 sc0 ls0 ws16e">tag_stack <span class="fc6 ls33">=</span>[]</div><div class="t m0 x15 hf y1ae ff8 fs5 fc0 sc0 ls0 ws2a3">elem_stack <span class="fc6 ls32">=</span>[]</div><div class="t m0 x15 hf y1af ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws13b">event, elem </span><span class="ws157">in <span class="ff8 fc0">doc:</span></span></div><div class="t m0 x16 hf y1b0 ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 fc0 ws15f">event <span class="fc6 ws15c">== <span class="ff9 fc9 ws13b">&apos;<span class="ff8 ws13a">start</span><span class="ls34">&apos;</span></span></span>:</span></div><div class="t m0 x17 hf y355 ff8 fs5 fc0 sc0 ls0 ws13a">tag_stack<span class="fc6 ls34">.</span>append(elem<span class="fc6 ls34">.</span>tag)</div><div class="t m0 x17 hf y410 ff8 fs5 fc0 sc0 ls0 ws13a">elem_stack<span class="fc6 ls34">.</span>append(elem)</div><div class="t m0 x16 hf y411 ff7 fs5 fca sc0 ls0 ws218">elif <span class="ff8 fc0 ws458">event <span class="fc6 ws159">== <span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws13a">end<span class="ff9 ls34">&apos;</span></span></span>:</span></div><div class="t m0 x17 hf yba ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 fc0 ws16e">tag_stack <span class="fc6 ws159">== </span>path_parts:</span></div><div class="t m0 x18 hf y8c6 ff7 fs5 fca sc0 ls0 ws16a">yield <span class="ff8 fc0">elem</span></div><div class="t m0 x18 hf ybed ff8 fs5 fc0 sc0 ls0 ws13a">elem_stack[<span class="fc6">-<span class="fc7 ls34">2<span class="fc0">]<span class="fc6">.</span></span></span></span>remove(elem)</div><div class="t m0 x17 hf ybee ff7 fs5 fca sc0 ls0 ws156">try<span class="ff8 fc0">:</span></div><div class="t m0 x18 hf ybef ff8 fs5 fc0 sc0 ls0 ws13a">tag_stack<span class="fc6 ls34">.</span>pop()</div><div class="t m0 x18 hf ybf0 ff8 fs5 fc0 sc0 ls0 ws13a">elem_stack<span class="fc6 ls34">.</span>pop()</div><div class="t m0 x17 hf yd7d ff7 fs5 fca sc0 ls0 ws146">except <span class="ff8 ws13a">IndexError<span class="fc0">:</span></span></div><div class="t m0 x18 h10 ybf1 ff7 fs5 fca sc0 ls0">pass</div><div class="t m0 x0 h7 y149e ff1 fs3 fc0 sc0 ls51 ws80c">为了测试这个函数，你需要先有一个大型的 <span class="ff4 ls0 ws7e5">XML </span><span class="ws1c8">文件。通常你可以在政府网站<span class="_ _1"></span>或</span></div><div class="t m0 x5 h7 y149f ff1 fs3 fc0 sc0 ls0 ws80d">公<span class="_ _6"></span>共<span class="_ _6"></span>数<span class="_ _6"></span>据网<span class="_ _6"></span>站<span class="_ _6"></span>上<span class="_ _6"></span>找<span class="_ _6"></span>到<span class="_ _6"></span>这<span class="_ _6"></span>样<span class="_ _6"></span>的<span class="_ _6"></span>文<span class="_ _6"></span>件。<span class="_ _6"></span>例<span class="_ _6"></span>如，<span class="_ _6"></span>你<span class="_ _6"></span>可<span class="_ _6"></span>以<span class="_ _6"></span>下<span class="_ _6"></span>载 <span class="ff4 ws80e">XML </span><span class="wsa0">格<span class="_ _6"></span>式<span class="_ _6"></span>的芝<span class="_ _6"></span>加<span class="_ _6"></span>哥<span class="_ _6"></span>城<span class="_ _6"></span>市<span class="_ _6"></span>道<span class="_ _6"></span>路<span class="_ _6"></span>坑</span></div><div class="t m0 x5 h7 y14a0 ff1 fs3 fc0 sc0 ls0 ws80f">洼数据库。<span class="_ _1"></span>在写这本书的时候，下载文件已经包含超过 <span class="ff4 ws810">100,000 </span><span class="wsa0">行数据，<span class="_ _c"></span>编码格式类似</span></div><div class="t m0 x5 h9 y14a1 ff1 fs3 fc0 sc0 ls0">于下面这样：</div><div class="t m0 x5 hf y14a2 ff8 fs5 fc0 sc0 ls0">&lt;response&gt;</div><div class="t m0 x15 hf y14a3 ff8 fs5 fc0 sc0 ls0">&lt;row&gt;</div><div class="t m0 x16 hf y14a4 ff8 fs5 fc0 sc0 ls0 ws13b">&lt;row ...&gt;</div><div class="t m0 x17 hf y63f ff8 fs5 fc0 sc0 ls0">&lt;creation_date&gt;2012-11-18T00:00:00&lt;/creation_date&gt;</div><div class="t m0 x17 hf y13 ff8 fs5 fc0 sc0 ls0">&lt;status&gt;Completed&lt;/status&gt;</div><div class="t m0 x17 hf y14a5 ff8 fs5 fc0 sc0 ls0">&lt;completion_date&gt;2012-11-18T00:00:00&lt;/completion_date&gt;</div><div class="t m0 x17 hf y14a6 ff8 fs5 fc0 sc0 ls0">&lt;service_request_number&gt;12-01906549&lt;/service_request_number&gt;</div><div class="t m0 x17 hf y14a7 ff8 fs5 fc0 sc0 ls0 ws4">&lt;type_of_service_request&gt;Pot Hole in Street&lt;/type_of_service_request&gt;</div><div class="t m0 x17 hf y14a8 ff8 fs5 fc0 sc0 ls0 ws13b">&lt;current_activity&gt;Final Outcome&lt;/current_activity&gt;</div><div class="t m0 x17 hf y14a9 ff8 fs5 fc0 sc0 ls0 ws4">&lt;most_recent_action&gt;CDOT Street Cut ... Outcome&lt;/most_recent_action&gt;</div><div class="t m0 x17 hf y14aa ff8 fs5 fc0 sc0 ls0 ws4">&lt;street_address&gt;4714 S TALMAN AVE&lt;/street_address&gt;</div><div class="t m0 x17 hf y14ab ff8 fs5 fc0 sc0 ls0">&lt;zip&gt;60632&lt;/zip&gt;</div><div class="t m0 x17 hf y14ac ff8 fs5 fc0 sc0 ls0">&lt;x_coordinate&gt;1159494.68618856&lt;/x_coordinate&gt;</div><div class="t m0 x17 hf y14ad ff8 fs5 fc0 sc0 ls0">&lt;y_coordinate&gt;1873313.83503384&lt;/y_coordinate&gt;</div><div class="t m0 x17 hf y14ae ff8 fs5 fc0 sc0 ls0">&lt;ward&gt;14&lt;/ward&gt;</div><div class="t m0 x17 hf y14af ff8 fs5 fc0 sc0 ls0">&lt;police_district&gt;9&lt;/police_district&gt;</div><div class="t m0 x17 hf y14b0 ff8 fs5 fc0 sc0 ls0">&lt;community_area&gt;58&lt;/community_area&gt;</div><div class="t m0 x17 hf y14b1 ff8 fs5 fc0 sc0 ls0">&lt;latitude&gt;41.808090232127896&lt;/latitude&gt;</div><div class="t m0 x17 hf y14b2 ff8 fs5 fc0 sc0 ls0">&lt;longitude&gt;-87.69053684711305&lt;/longitude&gt;</div><div class="t m0 x17 hf y14b3 ff8 fs5 fc0 sc0 ls0 ws13b">&lt;location latitude=&quot;41.808090232127896&quot;</div><div class="t m0 x17 hf y14b4 ff8 fs5 fc0 sc0 ls0 ws13b">longitude=&quot;-87.69053684711305&quot; /&gt;</div><div class="t m0 x16 hf y14b5 ff8 fs5 fc0 sc0 ls0">&lt;/row&gt;</div><div class="t m0 x16 hf y14b6 ff8 fs5 fc0 sc0 ls0 ws13b">&lt;row ...&gt;</div><div class="t m0 x17 hf y14b7 ff8 fs5 fc0 sc0 ls0">&lt;creation_date&gt;2012-11-18T00:00:00&lt;/creation_date&gt;</div><div class="t m0 x17 hf y14b8 ff8 fs5 fc0 sc0 ls0">&lt;status&gt;Completed&lt;/status&gt;</div><div class="t m0 x17 hf y14b9 ff8 fs5 fc0 sc0 ls0">&lt;completion_date&gt;2012-11-18T00:00:00&lt;/completion_date&gt;</div><div class="t m0 x17 hf y14ba ff8 fs5 fc0 sc0 ls0">&lt;service_request_number&gt;12-01906695&lt;/service_request_number&gt;</div><div class="t m0 x17 hf y14bb ff8 fs5 fc0 sc0 ls0 ws4">&lt;type_of_service_request&gt;Pot Hole in Street&lt;/type_of_service_request&gt;</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">8.4.<span class="_ _5"> </span>6.4 <span class="ff1 ws36c">增量式解析大型 </span><span class="ws80a">XML <span class="ff1 ws80b">文件 </span>180</span></div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

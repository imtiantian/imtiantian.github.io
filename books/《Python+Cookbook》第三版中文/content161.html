<div id="pfa1" class="pf w0 h0" data-page-no="a1"><div class="pc pca1 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bga1.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 h11 y181 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Is a directory</span></div><div class="t m0 x5 hf y182 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">os<span class="fc6 ls34">.</span>path<span class="fc6 ls34">.</span>isdir(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">/etc/passwd<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 hf y183 ff8 fs5 fc8 sc0 ls0">False</div><div class="t m0 x5 h11 y185 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Is a symbolic link</span></div><div class="t m0 x5 hf y186 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">os<span class="fc6 ls34">.</span>path<span class="fc6 ls34">.</span>islink(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">/usr/local/bin/python3<span class="ff9 ws13b">&apos;</span></span>)</span></div><div class="t m0 x5 hf y187 ff8 fs5 fc8 sc0 ls0">True</div><div class="t m0 x5 h11 y98e ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Get the file linked to</span></div><div class="t m0 x5 hf y98f ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">os<span class="fc6 ls34">.</span>path<span class="fc6 ls34">.</span>realpath(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">/usr/local/bin/python3<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 hf y990 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">/usr/local/bin/python3.3<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y991 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y1194 ff1 fs3 fc0 sc0 ls0 ws6ba">如<span class="_ _6"></span>果你<span class="_ _6"></span>还<span class="_ _6"></span>想<span class="_ _6"></span>获<span class="_ _6"></span>取<span class="_ _6"></span>元<span class="_ _6"></span>数<span class="_ _6"></span>据 <span class="ff4 wsa5">(</span><span class="ls40 ws180">比如文件大小或者是修改日期<span class="_ _c"></span><span class="ff4 ls1b">)<span class="ff1 ls0 ws6bb">，<span class="_ _6"></span>也<span class="_ _6"></span>可<span class="_ _6"></span>以<span class="_ _6"></span>使<span class="_ _6"></span>用 <span class="ff6 ws6bc">os.path </span>模</span></span></span></div><div class="t m0 x5 h9 y1195 ff1 fs3 fc0 sc0 ls0">块来解决：</div><div class="t m0 x5 hf y101e ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">os<span class="fc6 ls34">.</span>path<span class="fc6 ls34">.</span>getsize(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">/etc/passwd<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 hf y62 ff8 fs5 fc8 sc0 ls0">3669</div><div class="t m0 x5 hf y1196 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">os<span class="fc6 ls34">.</span>path<span class="fc6 ls34">.</span>getmtime(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">/etc/passwd<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 hf y1197 ff8 fs5 fc8 sc0 ls0">1272478234.0</div><div class="t m0 x5 h10 y1198 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">time</span></span></div><div class="t m0 x5 hf y1199 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">time<span class="fc6 ls34">.</span>ctime(os<span class="fc6 ls34">.</span>path<span class="fc6 ls34">.</span>getmtime(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">/etc/passwd<span class="ff9 ls34">&apos;</span></span>))</span></div><div class="t m0 x5 hf y119a ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws4">Wed Apr 28 13:10:34 2010<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y119b ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x5 he y119c ff2 fs2 fc4 sc0 ls0 ws212">7.12.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 y119d ff1 fs3 fc0 sc0 ls0 ws6bd">使<span class="_ _6"></span>用 <span class="ff6 ws6b1">os.path </span><span class="ls49 ws1a6">来进行文件测试是很简单的<span class="_ _1"></span>。在写这些脚本时<span class="_ _1"></span>，可能唯一需要注意</span></div><div class="t m0 x5 h9 y119e ff1 fs3 fc0 sc0 ls0">的就是你需要考虑文件权限的问题，特别是在获取元数据时候。比如：</div><div class="t m0 x5 hf y119f ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">os<span class="fc6 ls34">.</span>path<span class="fc6 ls34">.</span>getsize(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">/Users/guido/Desktop/foo.txt<span class="ff9 ws13b">&apos;</span></span>)</span></div><div class="t m0 x5 hf y11a0 ff8 fs5 fce sc0 ls0 ws4">Traceback (most recent call last):</div><div class="t m0 x15 hf y11a1 ff8 fs5 fc0 sc0 ls0 ws13c">File <span class="fc9 ws13a">&quot;&lt;stdin&gt;&quot;</span><span class="ws145">, line <span class="fc7 ls34">1</span><span class="ls32">,</span><span class="ff7 fca ws160">in </span><span class="fc6 ws13a">&lt;<span class="fc0">module</span>&gt;</span></span></div><div class="t m0 x15 hf y11a2 ff8 fs5 fc0 sc0 ls0 ws13c">File <span class="fc9 ws13a">&quot;/usr/local/lib/python3.3/genericpath.py&quot;</span><span class="ws145">, line <span class="fc7 ws13a">49</span><span class="ls32">,</span><span class="ff7 fca ws160">in </span>getsize</span></div><div class="t m0 x16 hf y11a3 ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 fc0 ws13a">os<span class="fc6 ls34">.</span>stat(filename)<span class="fc6 ls34">.</span>st_size</span></div><div class="t m0 x5 hf y11a4 ff8 fs5 fc2 sc0 ls0 ws13a">PermissionError<span class="fc0 ws4">: [Errno 13] Permission denied: <span class="ff9 ls34">&apos;</span><span class="ws13a">/Users/guido/Desktop/foo.txt<span class="ff9">&apos;</span></span></span></div><div class="t m0 x5 hf y11a5 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x5 hd y11a6 ff2 fs4 fc4 sc0 ls0 ws211">7.13<span class="_ _e"> </span>5.13 <span class="ff1">获取文件夹中的文件列表</span></div><div class="t m0 x5 he y11a7 ff2 fs2 fc4 sc0 ls0 ws212">7.13.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 yd7a ff1 fs3 fc0 sc0 ls0">你想获取文件系统中某个目录下的所有文件列表。</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">7.13.<span class="_ _5"> </span>5.13 <span class="ff1 ws512">获取文件夹中的文件列表 </span>152</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

<div id="pf1f" class="pf w0 h0" data-page-no="1f"><div class="pc pc1f w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg1f.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y1ab ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fca ws13a">list<span class="fc0 ws13b">(dedupe(a, key<span class="fc6 ls34">=</span></span><span class="ff7 ws146">lambda </span><span class="fc0 ws13b">d: d[<span class="ff9 fc9 ls34">&apos;<span class="ff8">x</span>&apos;</span>]))</span></span></div><div class="t m0 x5 hf y1ac ff8 fs5 fc8 sc0 ls0 ws13a">[{<span class="ff9 ls34">&apos;<span class="ff8">x</span>&apos;</span><span class="ws13b">: 1, <span class="ff9 ls34">&apos;<span class="ff8">y</span><span class="ls0">&apos;</span></span><span class="ws4">: 2}, {</span><span class="ff9">&apos;</span><span class="ls34">x<span class="ff9">&apos;</span></span>: 2, <span class="ff9 ls34">&apos;<span class="ff8">y</span>&apos;</span>: 4}]</span></div><div class="t m0 x5 hf y1ad ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y2f1 ff1 fs3 fc0 sc0 ls3a ws153">如果你想基于单个字段、属性或者某个更大的数据结构来消除重复元素，第二种方</div><div class="t m0 x5 h9 y2f2 ff1 fs3 fc0 sc0 ls0">案同样可以胜任。</div><div class="t m0 x5 he y2f3 ff2 fs2 fc4 sc0 ls0 ws212">3.10.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 y2f4 ff1 fs3 fc0 sc0 ls0">如果你仅仅就是想消除重复元素，通常可以简单的构造一个集合。比如：</div><div class="t m0 x5 hf y2f5 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">a</span></div><div class="t m0 x5 hf y2f6 ff8 fs5 fc8 sc0 ls0 ws4">[1, 5, 2, 1, 9, 1, 5, 10]</div><div class="t m0 x5 hf y2f7 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fca ws13a">set<span class="fc0">(a)</span></span></div><div class="t m0 x5 hf y2f8 ff8 fs5 fc8 sc0 ls0 ws4">{1, 2, 10, 5, 9}</div><div class="t m0 x5 hf y2f9 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y2fa ff1 fs3 fc0 sc0 ls0 wsa0">然而，这种方法不能维<span class="_ _6"></span>护元素的顺序，生成的结果<span class="_ _6"></span>中的元素位置被打乱。而<span class="_ _6"></span>上面的</div><div class="t m0 x5 h9 y2fb ff1 fs3 fc0 sc0 ls0">方法可以避免这种情况。</div><div class="t m0 x0 h9 y2fc ff1 fs3 fc0 sc0 ls63 ws21f">在本节中我们使用了生成器函数让我们的函数更加通用<span class="_ _c"></span>，不仅仅是局限于列表处<span class="_ _1"></span></div><div class="t m0 x5 h9 y2fd ff1 fs3 fc0 sc0 ls0">理。比如，如果如果你想读取一个文件，消除重复行，你可以很容易像这样做：</div><div class="t m0 x5 hf y2fe ff7 fs5 fca sc0 ls0 ws15a">with <span class="ff8 ws13a">open<span class="fc0">(somefile,<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">r<span class="ff9 ls34">&apos;</span></span><span class="ls32">)</span></span></span><span class="ws160">as <span class="ff8 fc0">f:</span></span></div><div class="t m0 x5 hf y2ff ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws13c">line </span><span class="ws157">in <span class="ff8 fc0">dedupe(f):</span></span></div><div class="t m0 x15 hf y300 ff8 fs5 fc6 sc0 ls0 ws13a">...</div><div class="t m0 x0 h7 y301 ff1 fs3 fc0 sc0 ls0 ws220">上述 <span class="ff4 ws221">key </span><span class="ls12 ws222">函数参数模仿了 </span><span class="ff6 ws223">sorted() <span class="ff4 ls64">,</span><span class="ws224">min() </span></span><span class="ls65">和</span><span class="ff6 ws224">max() </span><span class="ls12 wse4">等内置函数的相似功能<span class="_ _c"></span>。可</span></div><div class="t m0 x5 h7 y302 ff1 fs3 fc0 sc0 ls0 ws38">以参考 <span class="ff4 ws171">1.8 </span><span class="ls4">和</span><span class="ff4 ws1d0">1.13 </span>小节了解更多。</div><div class="t m0 x5 hd y303 ff2 fs4 fc4 sc0 ls0 ws211">3.11<span class="_ _e"> </span>1.11 <span class="ff1">命名切片</span></div><div class="t m0 x5 he y304 ff2 fs2 fc4 sc0 ls0 ws212">3.11.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 y305 ff1 fs3 fc0 sc0 ls0">你的程序已经出现一大堆已无法直视的硬编码切片下标，然后你想清理下代码。</div><div class="t m0 x5 he y306 ff2 fs2 fc4 sc0 ls0 ws212">3.11.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h7 y307 ff1 fs3 fc0 sc0 lse ws225">假定你有一段代码要从一个记录字符串中几个固定位置提取出特定的数据字段 <span class="ff4 ls0 wsa5">(<span class="ff1">比</span></span></div><div class="t m0 x5 h7 y308 ff1 fs3 fc0 sc0 ls0 wsa0">如文件或类似格式<span class="ff4 ls1b">)</span>：</div><div class="t m0 x5 h11 y309 ffa fs5 fcd sc0 ls0 ws4">###### 0123456789012345678901234567890123456789012345678901234567890<span class="ffb">&apos;</span></div><div class="t m0 x5 hf y30a ff8 fs5 fc0 sc0 ls0 ws145">record <span class="fc6 ls33">=</span><span class="ff9 fc9 ws13b">&apos;<span class="ff8 ws4">....................100 .......513.25 ..........</span>&apos;</span></div><div class="t m0 x5 hf y30b ff8 fs5 fc0 sc0 ls0 ws13c">cost <span class="fc6 ls32">=</span><span class="fca ws13a">int<span class="fc0">(record[<span class="fc7">20</span>:<span class="fc7">23</span><span class="ws159">]) <span class="fc6 ls32">*</span></span></span>float<span class="fc0">(record[<span class="fc7">31</span><span class="ls34">:</span><span class="fc7">37</span>])</span></span></div><div class="t m0 x0 h9 y30c ff1 fs3 fc0 sc0 ls0">与其那样写，为什么不想这样命名切片呢：</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">3.11.<span class="_ _5"> </span>1.11 <span class="ff1 ws226">命名切片 </span>22</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

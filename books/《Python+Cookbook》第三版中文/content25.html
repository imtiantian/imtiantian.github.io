<div id="pf19" class="pf w0 h0" data-page-no="19"><div class="pc pc19 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg19.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 he y137 ff2 fs2 fc4 sc0 ls0 ws135">3.6.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 y236 ff1 fs3 fc0 sc0 ls3a ws153">一个字典就是一个键对应一个单值的映射。如果你想要一个键映射多个值，那么你</div><div class="t m0 x5 h9 y237 ff1 fs3 fc0 sc0 ls1e ws111">就需要将这多个值放到另外的容器中<span class="_ _1"></span>，比如列表或者集合里面<span class="_ _1"></span>。比如，你可以像<span class="_ _1"></span>下面</div><div class="t m0 x5 h9 y238 ff1 fs3 fc0 sc0 ls0">这样构造这样的字典：</div><div class="t m0 x5 hf y239 ff8 fs5 fc0 sc0 ls32">d<span class="fc6 ls33">=</span><span class="ls0">{</span></div><div class="t m0 x15 hf y23a ff9 fs5 fc9 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">a</span><span class="ls33">&apos;<span class="ff8 fc0 ls0 ws13b">: [<span class="fc7 ls34">1</span><span class="ls32">,<span class="fc7 ls34">2</span>,<span class="fc7 ls34">3</span></span>],</span></span></div><div class="t m0 x15 hf y23b ff9 fs5 fc9 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">b</span><span class="ls33">&apos;<span class="ff8 fc0 ls0 ws13b">: [<span class="fc7 ls34">4</span><span class="ls32">,<span class="fc7 ls34">5</span></span>]</span></span></div><div class="t m0 x5 hf y23c ff8 fs5 fc0 sc0 ls0">}</div><div class="t m0 x5 hf y23d ff8 fs5 fc0 sc0 ls32">e<span class="fc6 ls33">=</span><span class="ls0">{</span></div><div class="t m0 x15 hf y23e ff9 fs5 fc9 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">a</span><span class="ls33">&apos;<span class="ff8 fc0 ls0 ws13b">: {<span class="fc7 ls34">1</span><span class="ls32">,<span class="fc7 ls34">2</span>,<span class="fc7 ls34">3</span></span>},</span></span></div><div class="t m0 x15 hf y23f ff9 fs5 fc9 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">b</span><span class="ls33">&apos;<span class="ff8 fc0 ls0 ws13b">: {<span class="fc7 ls34">4</span><span class="ls32">,<span class="fc7 ls34">5</span></span>}</span></span></div><div class="t m0 x5 hf y240 ff8 fs5 fc0 sc0 ls0">}</div><div class="t m0 x0 h9 y241 ff1 fs3 fc0 sc0 ls3a ws153">选择使用列表还是集合取决于你的实际需求。如果你想保持元素的插入顺序就应该</div><div class="t m0 x5 h9 y242 ff1 fs3 fc0 sc0 ls0 wsa0">使用列表，如果想去掉重复元素就使用集合（并且不关心元素的顺序问题）<span class="_ _f"></span>。</div><div class="t m0 x0 h9 y243 ff1 fs3 fc0 sc0 ls52 ws1d3">你可以很方便的使用 <span class="ff6 ls0 ws1d4">collections <span class="ff1 ws1d5">模<span class="_ _0"></span>块<span class="_ _12"></span>中<span class="_ _0"></span>的 </span>defaultdict <span class="ff1 wsa0">来<span class="_ _12"></span>构<span class="_ _0"></span>造<span class="_ _12"></span>这<span class="_ _12"></span>样<span class="_ _0"></span>的<span class="_ _12"></span>字<span class="_ _0"></span>典。</span></span></div><div class="t m0 x5 h9 y244 ff6 fs3 fc0 sc0 ls0 ws1d6">defaultdict <span class="ff1 ls22 ws1d7">的一个特征是它会自动初始化每个 </span><span class="ws1d8">key <span class="ff1 ls22 ws119">刚开始对应的值，所以你只需要<span class="_ _c"></span></span></span></div><div class="t m0 x5 h9 y245 ff1 fs3 fc0 sc0 ls0">关注添加元素操作了。比如：</div><div class="t m0 x5 hf y246 ff7 fs5 fca sc0 ls0 ws15a">from <span class="fcc ws168">collections </span><span class="ws146">import <span class="ff8 fc0">defaultdict</span></span></div><div class="t m0 x5 hf y247 ff8 fs5 fc0 sc0 ls32">d<span class="fc6 ls33">=</span><span class="ls0 ws13a">defaultdict(<span class="fca">list</span>)</span></div><div class="t m0 x5 hf y248 ff8 fs5 fc0 sc0 ls0 ws13a">d[<span class="ff9 fc9 ls34">&apos;<span class="ff8">a</span>&apos;</span>]<span class="fc6 ls34">.</span>append(<span class="fc7 ls34">1</span>)</div><div class="t m0 x5 hf y249 ff8 fs5 fc0 sc0 ls0 ws13a">d[<span class="ff9 fc9 ls34">&apos;<span class="ff8">a</span>&apos;</span>]<span class="fc6 ls34">.</span>append(<span class="fc7 ls34">2</span>)</div><div class="t m0 x5 hf y24a ff8 fs5 fc0 sc0 ls0 ws13a">d[<span class="ff9 fc9 ls34">&apos;<span class="ff8">b</span>&apos;</span>]<span class="fc6 ls34">.</span>append(<span class="fc7 ls34">4</span>)</div><div class="t m0 x5 hf y24b ff8 fs5 fc0 sc0 ls32">d<span class="fc6 ls33">=</span><span class="ls0 ws13a">defaultdict(<span class="fca">set</span>)</span></div><div class="t m0 x5 hf y24c ff8 fs5 fc0 sc0 ls0 ws13a">d[<span class="ff9 fc9 ls34">&apos;<span class="ff8">a</span>&apos;</span>]<span class="fc6 ls34">.</span>add(<span class="fc7 ls34">1</span>)</div><div class="t m0 x5 hf y24d ff8 fs5 fc0 sc0 ls0 ws13a">d[<span class="ff9 fc9 ls34">&apos;<span class="ff8">a</span>&apos;</span>]<span class="fc6 ls34">.</span>add(<span class="fc7 ls34">2</span>)</div><div class="t m0 x5 hf y24e ff8 fs5 fc0 sc0 ls0 ws13a">d[<span class="ff9 fc9 ls34">&apos;<span class="ff8">b</span>&apos;</span>]<span class="fc6 ls34">.</span>add(<span class="fc7 ls34">4</span>)</div><div class="t m0 x0 h7 y24f ff1 fs3 fc0 sc0 ls0 ws1d9">需要注意的是， <span class="ff6 ws1da">defaultdict </span><span class="ls3a ws1db">会自动为将要访问的键 </span><span class="ff4 wsa5">(</span><span class="ls3a ws153">就算目前字典中并不存在这</span></div><div class="t m0 x5 h7 y250 ff1 fs3 fc0 sc0 ls1f ws113">样的键<span class="ff4 ls53">)</span>创建映射实体。如果你并不需要这样的特性，你可以在一个普通的字典上使用</div><div class="t m0 x5 h9 y251 ff6 fs3 fc0 sc0 ls0 ws1dc">setdefault() <span class="ff1">方法来代替。比如：</span></div><div class="t m0 x5 hf y252 ff8 fs5 fc0 sc0 ls32">d<span class="fc6 ls33">=</span><span class="ls0 ws159">{} <span class="ffa fcd ws4"># A regular dictionary</span></span></div><div class="t m0 x5 hf y253 ff8 fs5 fc0 sc0 ls34">d<span class="fc6 ls0 ws13a">.<span class="fc0">setdefault(</span></span><span class="ff9 fc9">&apos;<span class="ff8">a</span>&apos;</span><span class="ls0 ws13b">, [])</span><span class="fc6">.</span><span class="ls0 ws13a">append(</span><span class="fc7">1</span><span class="ls0">)</span></div><div class="t m0 x5 hf y254 ff8 fs5 fc0 sc0 ls34">d<span class="fc6 ls0 ws13a">.<span class="fc0">setdefault(</span></span><span class="ff9 fc9">&apos;<span class="ff8">a</span>&apos;</span><span class="ls0 ws13b">, [])</span><span class="fc6">.</span><span class="ls0 ws13a">append(</span><span class="fc7">2</span><span class="ls0">)</span></div><div class="t m0 x5 hf y255 ff8 fs5 fc0 sc0 ls34">d<span class="fc6 ls0 ws13a">.<span class="fc0">setdefault(</span></span><span class="ff9 fc9">&apos;<span class="ff8">b</span>&apos;</span><span class="ls0 ws13b">, [])</span><span class="fc6">.</span><span class="ls0 ws13a">append(</span><span class="fc7">4</span><span class="ls0">)</span></div><div class="t m0 x0 h9 y256 ff1 fs3 fc0 sc0 ls2c ws1dd">但是很多程序员觉得 <span class="ff6 ls0 ws1de">setdefault() <span class="ff1 wsa0">用起来<span class="_ _6"></span>有点别<span class="_ _6"></span>扭。因为<span class="_ _6"></span>每次调<span class="_ _6"></span>用都得<span class="_ _6"></span>创建一个</span></span></div><div class="t m0 x5 h7 y257 ff1 fs3 fc0 sc0 ls0 ws14">新的初始值的实例 <span class="ff4 wsa5">(</span><span class="ws63">例子程序中的空列表 <span class="ff4 wsa5">[])</span>。</span></div><div class="t m0 x5 he y258 ff2 fs2 fc4 sc0 ls0 ws135">3.6.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 y259 ff1 fs3 fc0 sc0 ls0 wsa0">一般<span class="_ _6"></span>来<span class="_ _6"></span>讲，<span class="_ _6"></span>创建<span class="_ _6"></span>一<span class="_ _6"></span>个多<span class="_ _6"></span>值<span class="_ _6"></span>映<span class="_ _6"></span>射字<span class="_ _6"></span>典<span class="_ _6"></span>是很<span class="_ _6"></span>简<span class="_ _6"></span>单<span class="_ _6"></span>的。但<span class="_ _6"></span>是，<span class="_ _6"></span>如<span class="_ _6"></span>果你<span class="_ _6"></span>选<span class="_ _6"></span>择自<span class="_ _6"></span>己<span class="_ _6"></span>实<span class="_ _6"></span>现的<span class="_ _6"></span>话，</div><div class="t m0 x5 h9 y25a ff1 fs3 fc0 sc0 ls0">那么对于值的初始化可能会有点麻烦，你可能会像下面这样来实现：</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">3.6.<span class="_ _5"> </span>1.6 <span class="ff1 ws1d2">字典中的键映射多个值 </span>16</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

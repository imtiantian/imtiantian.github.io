<div id="pf81" class="pf w0 h0" data-page-no="81"><div class="pc pc81 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg81.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y15f ff8 fs5 fc8 sc0 ls0">16</div><div class="t m0 x5 hf y160 ff8 fs5 fc8 sc0 ls0">17</div><div class="t m0 x5 hf y956 ff8 fs5 fc8 sc0 ls0">18</div><div class="t m0 x5 hf y957 ff8 fs5 fc8 sc0 ls0">19</div><div class="t m0 x5 hf y958 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x5 he ye38 ff2 fs2 fc4 sc0 ls0 ws135">6.7.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h7 ye39 ff1 fs3 fc0 sc0 lse ws513">迭代器和生成器不能使用标准的切片操作，因为它们的长度事先我们并不知道 <span class="ff4 ls0 wsa5">(<span class="ff1">并</span></span></div><div class="t m0 x5 h7 ye3a ff1 fs3 fc0 sc0 ls30 ws138">且也没有实现索引<span class="ff4 ls1b">)</span><span class="ws59c">。函数 <span class="ff6 ls0 ws24c">islice() </span></span>返回一个可以生<span class="_ _1"></span>成指定元素的迭代器，它通过遍<span class="_ _1"></span></div><div class="t m0 x5 h9 ye3b ff1 fs3 fc0 sc0 ls13 wse5">历并丢弃直到切片开始索引位置的所有元素<span class="_ _1"></span>。然后才开始一个个的返回元素，并直到<span class="_ _c"></span></div><div class="t m0 x5 h9 ye3c ff1 fs3 fc0 sc0 ls0">切片结束索引位置。</div><div class="t m0 x0 h9 ye3d ff1 fs3 fc0 sc0 ls3d ws59d">这里要着重强调的一点是 <span class="ff6 ls0 ws214">islice() </span><span class="ws164">会消耗掉传入的迭代器中的数据。必须考虑到<span class="_ _1"></span></span></div><div class="t m0 x5 h9 ye3e ff1 fs3 fc0 sc0 ls13 wse5">迭代器是不可逆的这个事实<span class="_ _1"></span>。所以如果你需要之后再次访问这个迭代器的话，那你就<span class="_ _c"></span></div><div class="t m0 x5 h9 ye3f ff1 fs3 fc0 sc0 ls0">得先将它里面的数据放入一个列表中。</div><div class="t m0 x5 hd ye40 ff2 fs4 fc4 sc0 ls0 ws134">6.8<span class="_ _e"> </span>4.8 <span class="ff1">跳过可迭代对象的开始部分</span></div><div class="t m0 x5 he ye41 ff2 fs2 fc4 sc0 ls0 ws135">6.8.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 y300 ff1 fs3 fc0 sc0 ls0">你想遍历一个可迭代对象，但是它开始的某些元素你并不感兴趣，想跳过它们。</div><div class="t m0 x5 he ye42 ff2 fs2 fc4 sc0 ls0 ws135">6.8.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 ye43 ff6 fs3 fc0 sc0 ls0 ws59e">itertools <span class="ff1 lsec ws59f">模块中有一些函数可以完成这个任务<span class="_ _20"></span>。<span class="_ _6"></span>首先介绍的是<span class="_ _20"></span></span></div><div class="t m0 x5 h9 ye44 ff6 fs3 fc0 sc0 ls0 ws5a0">itertools.dropwhile() <span class="ff1 wsa0">函<span class="_ _0"></span>数。<span class="_ _0"></span>使<span class="_ _0"></span>用<span class="_ _0"></span>时，<span class="_ _12"></span>你<span class="_ _0"></span>给<span class="_ _0"></span>它<span class="_ _0"></span>传<span class="_ _0"></span>递<span class="_ _0"></span>一<span class="_ _0"></span>个<span class="_ _0"></span>函<span class="_ _12"></span>数<span class="_ _0"></span>对<span class="_ _0"></span>象<span class="_ _0"></span>和<span class="_ _0"></span>一<span class="_ _0"></span>个<span class="_ _0"></span>可<span class="_ _12"></span>迭<span class="_ _0"></span>代<span class="_ _0"></span>对</span></div><div class="t m0 x5 h7 ye45 ff1 fs3 fc0 sc0 ls30 ws5a1">象。它会返回一个迭代器对<span class="_ _1"></span>象，丢弃原有序列中直到函数返回 <span class="ff4 ls0 ws5a2">T<span class="_ _8"></span>rue <span class="ff1 ls30 ws138">之前的所有元素，<span class="_ _c"></span></span></span></div><div class="t m0 x5 h9 ye46 ff1 fs3 fc0 sc0 ls0">然后返回后面所有元素。</div><div class="t m0 x0 h9 ye47 ff1 fs3 fc0 sc0 ls0">为了演示，假定你在读取一个开始部分是几行注释的源文件。比如：</div><div class="t m0 x5 hf y836 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws15a">with <span class="ff8 ws13a">open<span class="fc0 ls34">(<span class="ff9 fc9">&apos;</span></span><span class="fc9">/etc/passwd<span class="ff9 ls34">&apos;</span><span class="fc0 ls32">)</span></span></span><span class="ws157">as <span class="ff8 fc0">f:</span></span></span></div><div class="t m0 x5 hf y837 ff7 fs5 fc5 sc0 ls0 ws139">... <span class="fca">for <span class="ff8 fc0 ws161">line </span><span class="ws160">in <span class="ff8 fc0">f:</span></span></span></div><div class="t m0 x5 hf y838 ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws156">print<span class="ff8 fc0 ws4">(line, end<span class="fc6 ws13a">=<span class="ff9 fc9 ls34">&apos;&apos;</span></span>)</span></span></div><div class="t m0 x5 h10 y839 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf ye48 ff8 fs5 fc8 sc0 ls0">##</div><div class="t m0 x5 hf y83a ff8 fs5 fc8 sc0 ls0 ws4"># User Database</div><div class="t m0 x5 hf y83b ff8 fs5 fc8 sc0 ls0">#</div><div class="t m0 x5 hf y83c ff8 fs5 fc8 sc0 ls0 ws4"># Note that this file is consulted directly only when the system is running</div><div class="t m0 x5 hf y83d ff8 fs5 fc8 sc0 ls0 ws4"># in single-user mode. At other times, this information is provided by</div><div class="t m0 x5 hf y83e ff8 fs5 fc8 sc0 ls0 ws4"># Open Directory.</div><div class="t m0 x5 h10 ycf5 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf y83f ff8 fs5 fc8 sc0 ls0">##</div><div class="t m0 x5 hf y840 ff8 fs5 fc8 sc0 ls0 ws4">nobody:*:-2:-2:Unprivileged User:/var/empty:/usr/bin/false</div><div class="t m0 x5 hf y841 ff8 fs5 fc8 sc0 ls0 ws4">root:*:0:0:System Administrator:/var/root:/bin/sh</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">6.8.<span class="_ _5"> </span>4.8 <span class="ff1 ws599">跳过可迭代对象的开始部分 </span>120</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

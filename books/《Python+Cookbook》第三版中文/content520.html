<div id="pf208" class="pf w0 h0" data-page-no="208"><div class="pc pc208 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg208.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x0 h9 y2a ff1 fs3 fc0 sc0 ls3a ws153">还有一点就是对于各个函数库的日志配置可以是相互独立的，不影响其他库的日志</div><div class="t m0 x5 h9 y2b ff1 fs3 fc0 sc0 ls0">配置。例如，对于如下的代码：</div><div class="t m0 x5 h10 y1b7f ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">logging</span></span></div><div class="t m0 x5 hf y1b80 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">logging<span class="fc6 ls34">.</span>basicConfig(level<span class="fc6 ls34">=</span>logging<span class="fc6 ls34">.</span>ERROR)</span></div><div class="t m0 x5 h10 y3048 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">somelib</span></span></div><div class="t m0 x5 hf y1b82 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">somelib<span class="fc6 ls34">.</span>func()</span></div><div class="t m0 x5 hf y1b83 ff8 fs5 fc8 sc0 ls0 ws4">CRITICAL:somelib:A Critical Error!</div><div class="t m0 x5 h11 y16b1 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Change the logging level for <span class="ffb ls34">&apos;</span><span class="ws13a">somelib<span class="ffb ls33">&apos;</span>only</span></span></div><div class="t m0 x5 hf y3049 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">logging<span class="fc6 ls34">.</span>getLogger(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">somelib<span class="ff9 ls34">&apos;</span></span>)<span class="fc6 ls34">.</span>level<span class="fc6">=</span>logging<span class="fc6 ls34">.</span>DEBUG</span></div><div class="t m0 x5 hf y1b84 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">somelib<span class="fc6 ls34">.</span>func()</span></div><div class="t m0 x5 hf y1b85 ff8 fs5 fc8 sc0 ls0 ws4">CRITICAL:somelib:A Critical Error!</div><div class="t m0 x5 hf y1b86 ff8 fs5 fc8 sc0 ls0 ws4">DEBUG:somelib:A debug message</div><div class="t m0 x5 hf y1b87 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y32c4 ff1 fs3 fc0 sc0 ls0 ws11cc">在这里，根日志被配置成仅仅输出 <span class="ff4 ws1259">ERR<span class="_ _c"></span>OR <span class="ff1 wsa0">或更高级别的消息。不过，<span class="ff6 ws125a">somelib </span>的</span></span></div><div class="t m0 x5 h7 y32c5 ff1 fs3 fc0 sc0 ls12 ws125b">日志级别被单独配置成可以输出 <span class="ff4 ls0 ws125c">debug </span><span class="wse4">级别的消息，它的优先级比全局配置高<span class="_ _1"></span>。像这</span></div><div class="t m0 x5 h9 y32c6 ff1 fs3 fc0 sc0 ls2d ws132">样更改单独模块的日志配置对于调试来讲是很方便的，因为你无需去更改任何的全局<span class="_ _1"></span></div><div class="t m0 x5 h9 y32c7 ff1 fs3 fc0 sc0 ls0 wsa0">日志配置—<span class="_ _8"></span>—只需要修改你想要更多输出的模块的日志等级。</div><div class="t m0 x0 h7 y1788 ff4 fs3 fc3 sc0 ls0 wsd0">Logging HO<span class="_ _1"></span>WTO <span class="ff1 fc0">详细介绍了如何配置日志模块和其他有用技巧，可以参阅下。</span></div><div class="t m0 x5 hd y32c8 ff2 fs4 fc4 sc0 ls0 wsd91">15.13<span class="_ _e"> </span>13.13 <span class="ff1">实现一个计时器</span></div><div class="t m0 x5 he y32c9 ff2 fs2 fc4 sc0 ls0 wsadf">15.13.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 y32ca ff1 fs3 fc0 sc0 ls0">你想记录程序执行多个任务所花费的时间</div><div class="t m0 x5 he y1f4a ff2 fs2 fc4 sc0 ls0 wsadf">15.13.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 y32cb ff6 fs3 fc0 sc0 ls0 wsfb0">time <span class="ff1 ls13 wse5">模块包含很多函数来执行跟时间有关的函数<span class="_ _1"></span>。尽管如此，通常我们会在此基<span class="_ _c"></span></span></div><div class="t m0 x5 h9 y32cc ff1 fs3 fc0 sc0 ls0">础之上构造一个更高级的接口来模拟一个计时器。例如：</div><div class="t m0 x5 h10 y32cd ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc">time</span></div><div class="t m0 x5 hf y30c4 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">Timer<span class="ff8 fc0">:</span></span></div><div class="t m0 x15 hf y32ce ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span><span class="ws4">, func</span><span class="fc6">=</span>time<span class="fc6 ls34">.</span>perf_counter):</span></span></div><div class="t m0 x16 hf y32cf ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws155">elapsed </span><span class="ls33">=</span><span class="fc7">0.0</span></span></div><div class="t m0 x16 hf y32d0 ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws458">_func </span><span class="ls32">=</span><span class="fc0">func</span></span></div><div class="t m0 x16 hf y32d1 ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws19f">_start </span><span class="ls32">=</span></span>None</div><div class="t m0 x15 hf y17d ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">start<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0">):</span></span></span></div><div class="t m0 x16 hf y17e ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 ws13a">self<span class="fc6 ls34">.</span><span class="fc0 ws145">_start </span></span>is not <span class="ff8 ws13a">None<span class="fc0">:</span></span></div><div class="t m0 x17 hf y17f ff7 fs5 fca sc0 ls0 ws16a">raise <span class="ff8 ws13a">RuntimeError<span class="fc0 ls34">(</span><span class="ff9 fc9 ws13b">&apos;<span class="ff8 ws4">Already started</span><span class="ls34">&apos;</span></span><span class="fc0">)</span></span></div><div class="t m0 x16 hf y180 ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws19f">_start </span><span class="ls32">=</span></span>self<span class="fc6 ls34">.</span><span class="fc0">_func()</span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 wsd97">15.13.<span class="_ _36"> </span>13.13 <span class="ff1 ws125d">实现一个计时器 </span>511</div><a class="l" href="https://docs.python.org/3/howto/logging.html"><div class="d m1" style="border-style:none;position:absolute;left:137.887500px;bottom:698.968500px;width:91.553000px;height:16.821000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

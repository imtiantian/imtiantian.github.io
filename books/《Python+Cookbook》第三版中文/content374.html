<div id="pf176" class="pf w0 h0" data-page-no="176"><div class="pc pc176 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg176.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 he y137 ff2 fs2 fc4 sc0 ls0 ws212">12.1.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h7 y236 ff1 fs3 fc0 sc0 ls22 wscf4">定义模块的层次结构就像在文件系统上建立目录结构一样容易。文件 <span class="ff4 ls0 wscf5">init<span class="_ _e"> </span>.p<span class="_ _c"></span>y <span class="ff1">的</span></span></div><div class="t m0 x5 h9 y237 ff1 fs3 fc0 sc0 ls13 wse5">目的是要包含不同运行级别的包的可选的初始化代码<span class="_ _1"></span>。举个例子，如果你执行了语句<span class="_ _c"></span></div><div class="t m0 x5 h7 y238 ff4 fs3 fc0 sc0 ls0 wscf6">imp<span class="_ _6"></span>ort graphics<span class="ff1 wscf7">，<span class="_ _6"></span>文<span class="_ _0"></span>件 </span><span class="wscf8">graphics/<span class="_ _e"> </span>init<span class="_ _e"> </span>.p<span class="_ _c"></span>y <span class="ff1 wsa0">将<span class="_ _6"></span>被<span class="_ _0"></span>导<span class="_ _6"></span>入</span><span class="ls1ad">,</span><span class="ff1 wscf9">建<span class="_ _6"></span>立 </span><span class="wscfa">graphics <span class="ff1 wsa0">命<span class="_ _0"></span>名<span class="_ _6"></span>空<span class="_ _6"></span>间<span class="_ _6"></span>的<span class="_ _0"></span>内<span class="_ _6"></span>容。</span></span></span></div><div class="t m0 x5 h7 yea6 ff1 fs3 fc0 sc0 ls1ae">像<span class="ff4 ls0 wscfb">imp<span class="_ _6"></span>ort graphics.format.jpg </span><span class="ls0 wscfc">这<span class="_ _0"></span>样<span class="_ _12"></span>导<span class="_ _0"></span>入，<span class="_ _12"></span>文<span class="_ _0"></span>件 <span class="ff4 wscfd">graphics/<span class="_ _e"> </span>init<span class="_ _e"> </span>.py </span></span><span class="ls19c wscfe">和文件 <span class="ff4 ls0">graphics/</span></span></div><div class="t m0 x5 h7 y1a97 ff4 fs3 fc0 sc0 ls0 wsa47">graphics/formats/<span class="_ _e"> </span>init<span class="_ _e"> </span>.p<span class="_ _1"></span>y <span class="ff1 ws14">将在文件 </span><span class="wscff">graphics/formats/jpg.p<span class="_ _1"></span>y <span class="ff1">导入之前导入。</span></span></div><div class="t m0 x0 h7 y27a ff1 fs3 fc0 sc0 lsd3 wsd00">绝大部分时候让 <span class="ff4 ls0 wsd01">init<span class="_ _e"> </span>.p<span class="_ _1"></span>y <span class="ff1 lsd3 ws4b2">空着就好<span class="_ _c"></span>。但是有些情况下可能包含代码。举个例子<span class="_ _d"></span>，</span></span></div><div class="t m0 x32 h7 y27b ff4 fs3 fc0 sc0 ls0 wscf0">init<span class="_ _e"> </span>.p<span class="_ _1"></span>y <span class="ff1 wsa0">能够用来自动加载子模块</span>:</div><div class="t m0 x5 h11 y2690 ffa fs5 fcd sc0 ls0 ws4"># graphics/formats/__init__.py</div><div class="t m0 x5 hf y2691 ff7 fs5 fca sc0 ls0 ws15a">from <span class="fcc ls32">.</span><span class="ws146">import <span class="ff8 fc0">jpg</span></span></div><div class="t m0 x5 hf y2692 ff7 fs5 fca sc0 ls0 ws15a">from <span class="fcc ls32">.</span><span class="ws146">import <span class="ff8 fc0">png</span></span></div><div class="t m0 x0 h7 y2693 ff1 fs3 fc0 sc0 ls2c ws12f">像这样一个文件<span class="ff4 ls1af">,</span><span class="wsd02">用户可以仅仅通过 <span class="ff4 ls0 wsd03">import grahpics.formats <span class="ff1 ws4d8">来<span class="_ _6"></span>代替 </span><span class="ws77f">imp<span class="_ _6"></span>ort graph-</span></span></span></div><div class="t m0 x5 h7 y2694 ff4 fs3 fc0 sc0 ls0 wsd04">ics.formats.jpg <span class="ff1 ws14">以及 </span><span class="ws9c">imp<span class="_ _6"></span>ort graphics.formats.png<span class="ff1">。</span></span></div><div class="t m0 x31 h7 y2695 ff4 fs3 fc0 sc0 ls0 wsd05">init<span class="_ _e"> </span>.p<span class="_ _1"></span>y <span class="ff1 wsd06">的其<span class="_ _6"></span>他<span class="_ _6"></span>常用<span class="_ _6"></span>用法<span class="_ _6"></span>包括<span class="_ _6"></span>将<span class="_ _6"></span>多个<span class="_ _6"></span>文件<span class="_ _6"></span>合并<span class="_ _6"></span>到<span class="_ _6"></span>一个<span class="_ _6"></span>逻辑<span class="_ _6"></span>命名<span class="_ _6"></span>空<span class="_ _6"></span>间，这<span class="_ _6"></span>将在 </span>10.4</div><div class="t m0 x5 h9 y2696 ff1 fs3 fc0 sc0 ls0">小节讨论。</div><div class="t m0 x0 h7 y2697 ff1 fs3 fc0 sc0 ls0 wsd07">敏锐的<span class="_ _6"></span>程序员<span class="_ _6"></span>会发现，即<span class="_ _6"></span>使没有 <span class="ff4 wsd08">init<span class="_ _e"> </span>.py </span><span class="wsa0">文件存在，<span class="_ _6"></span><span class="ff4 wsd09">p<span class="_ _1"></span>ython <span class="ff1 ls2c ws12f">仍然会导入包。如果</span></span></span></div><div class="t m0 x5 h7 y2698 ff1 fs3 fc0 sc0 ls2c wsd0a">你没有定义 <span class="ff4 ls0 wsd08">init<span class="_ _e"> </span>.p<span class="_ _1"></span>y <span class="ff1 ls2c wsd0b">时，实际上创建了一个所谓的“命名空间包<span class="_ _1"></span>”<span class="_ _31"></span>，这将在 <span class="ff4 ls0 ws3c4">10.5 <span class="ff1 wsa0">小节</span></span></span></span></div><div class="t m0 x5 h7 y2699 ff1 fs3 fc0 sc0 ls0 wsd0c">讨论。万物平等，如果你着手创建一个新的包的话，包含一个 <span class="ff4 wsa47">init<span class="_ _e"> </span>.p<span class="_ _1"></span>y <span class="ff1">文件吧。</span></span></div><div class="t m0 x5 hd y269a ff2 fs4 fc4 sc0 ls0 ws211">12.2<span class="_ _e"> </span>10.2 <span class="ff1">控制模块被全部导入的内容</span></div><div class="t m0 x5 he y269b ff2 fs2 fc4 sc0 ls0 ws212">12.2.1 <span class="ff1">问题</span></div><div class="t m0 x0 h7 y269c ff1 fs3 fc0 sc0 ls13 wse5">当使用<span class="_ _1"></span><span class="ff4 ls0 wsd0d">’from mo<span class="_ _6"></span>dule imp<span class="_ _6"></span>ort <span class="ff5 fc2 ws75">*</span><span class="ls1b0">‘<span class="ff1 ls13 wse5">语句时，希望对从模块或包导出的符号进行精确控<span class="_ _1"></span></span></span></span></div><div class="t m0 x5 h9 y1d01 ff1 fs3 fc0 sc0 ls0">制。</div><div class="t m0 x5 he y18ec ff2 fs2 fc4 sc0 ls0 ws212">12.2.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h7 y269d ff1 fs3 fc0 sc0 ls0 ws9d6">在你的模块中定义一个变量 <span class="ff4 wsd0e">all </span>来明确地列出需要导出的内容。</div><div class="t m0 x0 h7 y269e ff1 fs3 fc0 sc0 ls0 wsa0">举个例子<span class="ff4">:</span></div><div class="t m0 x5 h11 y269f ffa fs5 fcd sc0 ls0 ws4"># somemodule.py</div><div class="t m0 x5 hf y26a0 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">spam<span class="fc0">():</span></span></div><div class="t m0 x15 h10 y26a1 ff7 fs5 fca sc0 ls0">pass</div><div class="t m0 x5 hf y26a2 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">grok<span class="fc0">():</span></span></div><div class="t m0 x15 h10 y26a3 ff7 fs5 fca sc0 ls0">pass</div><div class="t m0 x5 hf y26a4 ff8 fs5 fc0 sc0 ls0 ws13c">blah <span class="fc6 ls32">=</span><span class="fc7">42</span></div><div class="t m0 x5 h11 y26a5 ffa fs5 fcd sc0 ls0 ws4"># Only export <span class="ffb ls34">&apos;</span><span class="ws13a">spam<span class="ffb ls32">&apos;</span><span class="ws158">and <span class="ffb ls34">&apos;</span></span>grok<span class="ffb">&apos;</span></span></div><div class="t m0 x5 hf y26a6 ff8 fs5 fc0 sc0 ls0 ws155">__all__ <span class="fc6 ls32">=</span><span class="ls34">[<span class="ff9 fc9">&apos;</span></span><span class="fc9 ws13a">spam<span class="ff9 ws13b">&apos;</span></span><span class="ls33">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9 ws13a">grok<span class="ff9 ls34">&apos;</span></span>]</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">12.2.<span class="_ _5"> </span>10.2 <span class="ff1 ws98a">控制模块被全部导入的内容 </span>365</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

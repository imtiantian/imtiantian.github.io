<div id="pf66" class="pf w0 h0" data-page-no="66"><div class="pc pc66 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg66.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y1ab ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">c<span class="fc6 ls33">=<span class="fca ls0 ws13a">float</span></span><span class="ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">nan</span>&apos;</span><span class="ls0">)</span></span></span></div><div class="t m0 x5 hf y1ac ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">d<span class="fc6 ls33">=<span class="fca ls0 ws13a">float</span></span><span class="ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">nan</span>&apos;</span><span class="ls0">)</span></span></span></div><div class="t m0 x5 hf y1ad ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">c<span class="fc6 ls0 ws15c">== <span class="fc0">d</span></span></span></div><div class="t m0 x5 hf y1ae ff8 fs5 fc8 sc0 ls0">False</div><div class="t m0 x5 hf y1af ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">c</span><span class="fca ws160">is <span class="ff8 fc0">d</span></span></div><div class="t m0 x5 hf y1b0 ff8 fs5 fc8 sc0 ls0">False</div><div class="t m0 x5 hf y355 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y356 ff1 fs3 fc0 sc0 ls13 ws4c3">由于这个原因<span class="_ _1"></span>，测试一个 <span class="ff4 ls0 ws4c4">NaN </span><span class="ws4c5">值得唯一安全的方法就是使用 <span class="ff6 ls0 ws4c6">math.isnan() <span class="ff1 wsa0">，<span class="_ _6"></span>也</span></span></span></div><div class="t m0 x5 h9 y597 ff1 fs3 fc0 sc0 ls0">就是上面演示的那样。</div><div class="t m0 x0 h7 yb6a ff1 fs3 fc0 sc0 ls2d ws4c7">有时候程序员想改变 <span class="ff4 ls0 ws4c8">Python <span class="ff1 ws4c9">默<span class="_ _6"></span>认行<span class="_ _6"></span>为，<span class="_ _6"></span>在<span class="_ _6"></span>返<span class="_ _6"></span>回无<span class="_ _6"></span>穷<span class="_ _6"></span>大<span class="_ _6"></span>或 </span><span class="ws4ca">NaN </span></span><span class="ws132">结果的操作中抛出</span></div><div class="t m0 x5 h7 yb6b ff1 fs3 fc0 sc0 ls0 ws4cb">异常。 <span class="ff6 ws4cc">fpectl </span><span class="ls51 ws4cd">模块可以用来改变这种行为，但是它在标准的 </span><span class="ff4 ws4ce">Python </span><span class="ls51 ws1c8">构建中并没有被</span></div><div class="t m0 x5 h7 yb6c ff1 fs3 fc0 sc0 ls0 ws4cf">启用，它是平台相关的，并且针对的是专家级程序员。<span class="_ _1"></span>可以参考在线的 <span class="ff4 ws108">Python </span>文档获</div><div class="t m0 x5 h9 yb6d ff1 fs3 fc0 sc0 ls0">取更多的细节。</div><div class="t m0 x5 hd yb6e ff2 fs4 fc4 sc0 ls0 ws134">5.8<span class="_ _e"> </span>3.8 <span class="ff1">分数运算</span></div><div class="t m0 x5 he yb6f ff2 fs2 fc4 sc0 ls0 ws135">5.8.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 yb70 ff1 fs3 fc0 sc0 ls0 wsa0">你进入时间机器，突然<span class="_ _6"></span>发现你正在做小学家庭作<span class="_ _6"></span>业，并涉及到分数计算问<span class="_ _6"></span>题。或者</div><div class="t m0 x5 h9 y441 ff1 fs3 fc0 sc0 ls0">你可能需要写代码去计算在你的木工工厂中的测量值。</div><div class="t m0 x5 he yb71 ff2 fs2 fc4 sc0 ls0 ws135">5.8.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 yb72 ff6 fs3 fc0 sc0 ls0 ws4d0">fractions <span class="ff1">模块可以被用来执行包含分数的数学运算。比如：</span></div><div class="t m0 x5 hf yb73 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws15a">from <span class="fcc ws285">fractions </span><span class="ws146">import <span class="ff8 fc0">Fraction</span></span></span></div><div class="t m0 x5 hf yb74 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">a<span class="fc6 ls33">=</span><span class="ls0 ws13a">Fraction(<span class="fc7 ls34">5</span><span class="ls33">,</span><span class="fc7">4</span>)</span></span></div><div class="t m0 x5 hf yb75 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">b<span class="fc6 ls33">=</span><span class="ls0 ws13a">Fraction(<span class="fc7 ls34">7</span><span class="ls33">,</span><span class="fc7">16</span>)</span></span></div><div class="t m0 x5 hf yb76 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws156">print<span class="ff8 fc0 ws159">(a <span class="fc6 ls32">+</span>b)</span></span></div><div class="t m0 x5 hf yb77 ff8 fs5 fc8 sc0 ls0">27/16</div><div class="t m0 x5 hf yb78 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws156">print<span class="ff8 fc0 ws159">(a <span class="fc6 ls32">*</span>b)</span></span></div><div class="t m0 x5 hf yb79 ff8 fs5 fc8 sc0 ls0">35/64</div><div class="t m0 x5 h11 yb7a ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws13b"># Getting numerator/denominator</span></div><div class="t m0 x5 hf yb7b ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">c<span class="fc6 ls33">=</span>a<span class="fc6 ls33">*</span><span class="ls0">b</span></span></div><div class="t m0 x5 hf yb7c ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls34">c<span class="fc6 ls0 ws13a">.<span class="fc0">numerator</span></span></span></div><div class="t m0 x5 hf yb7d ff8 fs5 fc8 sc0 ls0">35</div><div class="t m0 x5 hf yb7e ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls34">c<span class="fc6 ls0 ws13a">.<span class="fc0">denominator</span></span></span></div><div class="t m0 x5 hf yb7f ff8 fs5 fc8 sc0 ls0">64</div><div class="t m0 x5 h11 yb80 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Converting to a float</span></div><div class="t m0 x5 hf yb81 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fca ws13a">float<span class="fc0">(c)</span></span></div><div class="t m0 x5 hf yb82 ff8 fs5 fc8 sc0 ls0">0.546875</div><div class="t m0 x5 h11 yb83 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Limiting the denominator of a value</span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">5.8.<span class="_ _5"> </span>3.8 <span class="ff1 ws1e7">分数运算 </span>93</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

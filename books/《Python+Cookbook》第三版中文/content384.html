<div id="pf180" class="pf w0 h0" data-page-no="180"><div class="pc pc180 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg180.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x0 h7 y2a ff1 fs3 fc0 sc0 ls0 wsd6b">首先，<span class="_ _c"></span>一个包对解释器的当前工作目录几乎没有控制权。因此，<span class="_ _c"></span>编程时任何 <span class="ff4 wsd6c">I/O </span>操</div><div class="t m0 x5 h7 y2b ff1 fs3 fc0 sc0 ls3a wsd6d">作都必须使用绝对文件名。由于每个模块包含有完整路径的 <span class="ff4 ls0 wsd4b">ﬁle </span><span class="ws153">变量，这弄清楚它的</span></div><div class="t m0 x5 h9 y2c ff1 fs3 fc0 sc0 ls0">路径不是不可能，但它很凌乱。</div><div class="t m0 x0 h7 y99 ff1 fs3 fc0 sc0 ls0 wsa0">第二，包<span class="_ _6"></span>通常安装<span class="_ _6"></span>作为<span class="ff4 wsd6e">.zip </span>或<span class="ff4 wsd6f">.egg </span><span class="ls2b ws12e">文件，这些文件并不像在文件系统上的一个普通</span></div><div class="t m0 x5 h7 y9a ff1 fs3 fc0 sc0 lsc8 wsd70">目录里那样被保存<span class="_ _c"></span>。因此<span class="_ _1"></span>，你试图用 <span class="ff4 ls0 wsd71">op<span class="_ _6"></span>en() </span><span class="wsa6f">对一个包含数据文件的归档文件进行操<span class="_ _c"></span></span></div><div class="t m0 x5 h9 y9b ff1 fs3 fc0 sc0 ls0">作，它根本不会工作。</div><div class="t m0 x0 h7 y31 ff4 fs3 fc0 sc0 ls0 wsd72">pkgutil.get<span class="_ _7"> </span>data() <span class="ff1 ls68 ws23f">函数是一个读取数据文件的高级工具，不用管包是<span class="_ _1"></span>如何安装以及</span></div><div class="t m0 x5 h9 y32 ff1 fs3 fc0 sc0 ls0">安装在哪。它只是工作并将文件内容以字节字符串返回给你</div><div class="t m0 x0 h7 y278c ff4 fs3 fc0 sc0 ls0 wsd73">get data() <span class="ff1 ls17 wsf6">的第一个参数是包含包名的字符串。你可以直接使用包名，也可以使用<span class="_ _1"></span></span></div><div class="t m0 x5 h7 y278d ff1 fs3 fc0 sc0 ls0 wsd74">特殊的变量，比如 <span class="ff4 wsd75">pac<span class="_ _c"></span>kage <span class="ff1 wsa0">。第二个参数是包内文件的相对名称。<span class="_ _1"></span>如果有必要，可以</span></span></div><div class="t m0 x5 h7 y278e ff1 fs3 fc0 sc0 ls0 ws38">使用标准的 <span class="ff4 ws30">Unix </span>命名规范到不同的目录，只有最后的目录仍然位于包中。</div><div class="t m0 x5 hd y278f ff2 fs4 fc4 sc0 ls0 ws211">12.9<span class="_ _e"> </span>10.9 <span class="ff1 ws357">将文件夹加入到 </span>sys.path</div><div class="t m0 x5 he y2790 ff2 fs2 fc4 sc0 ls0 ws212">12.9.1 <span class="ff1">问题</span></div><div class="t m0 x0 h7 y2791 ff1 fs3 fc0 sc0 ls0 wsd76">你无法导入你<span class="_ _6"></span>的 <span class="ff4 wsd77">Python </span><span class="ls82 wsd78">代码因为它所在的目录不在 </span><span class="ff4 wsd79">sys.path </span><span class="wsa0">里。你想将添加新目</span></div><div class="t m0 x5 h7 y1e01 ff1 fs3 fc0 sc0 ls0 ws14">录到 <span class="ff4 ws5c">Python </span>路径，但是不想硬链接到你的代码。</div><div class="t m0 x5 he y18a9 ff2 fs2 fc4 sc0 ls0 ws212">12.9.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h7 y2792 ff1 fs3 fc0 sc0 ls0 ws2fc">有两种常用的方式将新目录添加到 <span class="ff4 wsa5">sys.path</span><span class="wsd7a">。<span class="_ _1"></span>第一种，你可以使用 <span class="ff4 wsa5">PYTHONP<span class="_ _19"></span>A<span class="_ _d"></span>TH</span></span></div><div class="t m0 x5 h9 y2793 ff1 fs3 fc0 sc0 ls0">环境变量来添加。例如：</div><div class="t m0 x5 hf y2794 ff8 fs5 fc0 sc0 ls0 ws13c">bash <span class="fc6 ls32">%</span><span class="ws4">env PYTHONPATH<span class="fc6 ls34">=/</span><span class="ws13a">some<span class="fc6">/<span class="fca">dir</span></span>:<span class="fc6 ls34">/</span>other<span class="fc6">/<span class="fca ws158">dir </span></span>python3</span></span></div><div class="t m0 x5 hf y2795 ff8 fs5 fc0 sc0 ls0 ws145">Python <span class="fc7 ws13a">3.3<span class="fc6 ls34">.</span><span class="ls32">0</span></span><span class="ws4">(default, Oct <span class="fc7 ws23d">4 2012</span><span class="ls32">,</span><span class="fc7 ws13a">10</span><span class="ls34">:</span><span class="fc7 ws13a">17</span><span class="ls34">:</span><span class="fc7 ws13a">33</span>)</span></div><div class="t m0 x5 hf y2796 ff8 fs5 fc0 sc0 ls0 ws13c">[GCC <span class="fc7 ws13a">4.2<span class="fc6 ls34">.</span><span class="ls32">1</span></span><span class="ws4">(Apple Inc<span class="fc6 ls33">.</span><span class="ws15f">build <span class="fc7 ws13a">5666</span><span class="ws13b">) (dot <span class="fc7 ls34">3</span>)] on darwin</span></span></span></div><div class="t m0 x5 hf y2797 ff8 fs5 fc0 sc0 ls0 ws13c">Type <span class="fc9 ws13a">&quot;help&quot;</span><span class="ls32">,</span><span class="fc9 ws13a">&quot;copyright&quot;</span><span class="ls33">,</span><span class="fc9 ws23d">&quot;credits&quot; <span class="ff7 fca ws157">or </span><span class="ws1a1">&quot;license&quot; <span class="ff7 fca ws139">for </span></span></span><span class="ws13b">more information<span class="fc6">.</span></span></div><div class="t m0 x5 hf y2798 ff8 fs5 fc6 sc0 ls0 ws1a1">&gt;&gt;&gt; <span class="ff7 fca ws146">import <span class="fcc">sys</span></span></div><div class="t m0 x5 hf y2799 ff8 fs5 fc6 sc0 ls0 ws1a1">&gt;&gt;&gt; <span class="fc0 ws13a">sys</span><span class="ls34">.</span><span class="fc0">path</span></div><div class="t m0 x5 hf y279a ff8 fs5 fc0 sc0 ls34">[<span class="ff9 fc9 ls0 ws13b">&apos;&apos;</span><span class="ls33">,<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">/some/dir</span><span class="ls34">&apos;</span></span><span class="ls32">,</span></span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">/other/dir</span>&apos;</span><span class="ls32">,</span><span class="fc6 ws76a">...</span><span class="ls0">]</span></div><div class="t m0 x5 hf y279b ff8 fs5 fc6 sc0 ls0 ws13a">&gt;&gt;&gt;</div><div class="t m0 x0 h7 yfd3 ff1 fs3 fc0 sc0 ls0 ws38">在自定义应用程序中，这样的环境变量可在程序启动时设置或通过 <span class="ff4 wsd7b">shell </span>脚本。</div><div class="t m0 x0 h7 y279c ff1 fs3 fc0 sc0 ls0 wsa0">第二种方法是创建一个<span class="ff4 wsd7c">.pth </span>文件，将目录列举出来，像这样：</div><div class="t m0 x5 h11 y279d ffa fs5 fcd sc0 ls0 ws4"># myapplication.pth</div><div class="t m0 x5 hf ya80 ff8 fs5 fc6 sc0 ls34">/<span class="fc0 ls0 ws13a">some<span class="fc6">/<span class="fca">dir</span></span></span></div><div class="t m0 x5 hf y279e ff8 fs5 fc6 sc0 ls34">/<span class="fc0 ls0 ws13a">other</span>/<span class="fca ls0">dir</span></div><div class="t m0 x0 h7 y279f ff1 fs3 fc0 sc0 ls0 wsa0">这<span class="_ _0"></span>个<span class="ff4 wsd7d">.pth </span><span class="wsd7e">文<span class="_ _6"></span>件<span class="_ _0"></span>需<span class="_ _0"></span>要<span class="_ _0"></span>放<span class="_ _6"></span>在<span class="_ _0"></span>某<span class="_ _0"></span>个 <span class="ff4 wsd7f">Python </span><span class="ls1bf">的</span><span class="ff4 wsd80">site-pac<span class="_ _c"></span>kages <span class="ff1 wsa0">目<span class="_ _0"></span>录，<span class="_ _0"></span>通<span class="_ _0"></span>常<span class="_ _6"></span>位<span class="_ _0"></span>于</span><span class="wsa5">/<span class="_ _0"></span>usr/<span class="_ _6"></span>lo<span class="_ _6"></span>cal/</span></span></span></div><div class="t m0 x5 h7 yfc2 ff4 fs3 fc0 sc0 ls0 wsd81">lib/<span class="_ _0"></span>p<span class="_ _c"></span>ython3.3/<span class="_ _0"></span>site-packages <span class="ff1 wsd82">或<span class="_ _6"></span>者 <span class="fff ls1c0">˜</span></span><span class="wsa5">/.lo<span class="_ _6"></span>cal/<span class="_ _0"></span>lib/<span class="_ _0"></span>p<span class="_ _1"></span>ython3.3/<span class="_ _0"></span>sitepac<span class="_ _1"></span>kages<span class="ff1 wsa0">。<span class="_ _0"></span>当<span class="_ _0"></span>解<span class="_ _0"></span>释<span class="_ _0"></span>器<span class="_ _0"></span>启<span class="_ _0"></span>动</span></span></div><div class="t m0 x5 h7 y27a0 ff1 fs3 fc0 sc0 ls0 wsa0">时，<span class="ff4 wsd83">.pth </span><span class="ls35 wsd84">文件里列举出来的存在于文件系统的目录将被添加到 </span><span class="ff4 wsa5">sys.path</span>。安装一个<span class="ff4">.pth</span></div><div class="t m0 x5 h7 y27a1 ff1 fs3 fc0 sc0 ls0 ws63">文件可能需要管理员权限，如果它被添加到系统级的 <span class="ff4 ws5c">Python </span>解释器。</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">12.9.<span class="_ _5"> </span>10.9 <span class="ff1 ws36c">将文件夹加入到 </span><span class="wsd85">sys.path 375</span></div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

<div id="pf195" class="pf w0 h0" data-page-no="195"><div class="pc pc195 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg195.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x0 h7 y2a ff1 fs3 fc0 sc0 ls0 wse5d">有<span class="_ _6"></span>了<span class="_ _0"></span>一<span class="_ _6"></span>个<span class="_ _6"></span>新<span class="_ _0"></span>的<span class="_ _6"></span>虚<span class="_ _6"></span>拟<span class="_ _0"></span>环<span class="_ _6"></span>境，<span class="_ _6"></span>下<span class="_ _0"></span>一<span class="_ _6"></span>步<span class="_ _6"></span>就<span class="_ _0"></span>是<span class="_ _6"></span>安<span class="_ _6"></span>装<span class="_ _0"></span>一<span class="_ _6"></span>个<span class="_ _6"></span>包<span class="_ _0"></span>管<span class="_ _6"></span>理<span class="_ _6"></span>器，<span class="_ _0"></span>比<span class="_ _6"></span>如 <span class="ff4 wse5e">distribute </span><span class="ls1a6">或</span><span class="ff4 wsa5">pip</span>。</div><div class="t m0 x5 h9 y2b ff1 fs3 fc0 sc0 ls13 wse5">但安装这样的工具和包的时候<span class="_ _1"></span>，你需要确保你使用的是虚拟环境的解释器。它会将包<span class="_ _c"></span></div><div class="t m0 x5 h7 y2c ff1 fs3 fc0 sc0 ls0 ws38">安装到新创建的 <span class="ff4 wse5f">site-pac<span class="_ _1"></span>kages <span class="ff1">目录中去。</span></span></div><div class="t m0 x0 h7 y99 ff1 fs3 fc0 sc0 ls18 wse60">尽管一个虚拟环境看上去是 <span class="ff4 ls0 ws453">Python </span><span class="ws110">安装的一个复制，不过它实际上只包含了少量<span class="_ _1"></span></span></div><div class="t m0 x5 h7 y9a ff1 fs3 fc0 sc0 ls0 ws528">几个文件和一些符号链接。素有标准库函文件和可执行解释器都来自原来的 <span class="ff4 wse61">Python </span>安</div><div class="t m0 x5 h9 y9b ff1 fs3 fc0 sc0 ls0">装。因此，创建这样的环境是很容易的，并且几乎不会消耗机器资源。</div><div class="t m0 x0 h9 y31 ff1 fs3 fc0 sc0 ls0 wsa0">默认情况下，虚拟环境<span class="_ _6"></span>是空的，不包含任何额外的<span class="_ _6"></span>第三方库。如果你想将一<span class="_ _6"></span>个已经</div><div class="t m0 x5 h7 y32 ff1 fs3 fc0 sc0 ls6b ws28f">安装的包作为虚拟环境的一部分，可以使用“<span class="_ _1"></span><span class="ff4 ls0 wsa5">–system-site-packages<span class="ff1 ls6b ws28f">”选项来创建虚拟<span class="_ _1"></span></span></span></div><div class="t m0 x5 h9 y33 ff1 fs3 fc0 sc0 ls0">环境，例如：</div><div class="t m0 x5 hf y2953 ff8 fs5 fc0 sc0 ls0 ws13c">bash <span class="fc6 ls32">%</span><span class="ws145">pyvenv <span class="fc6 ls34">--</span><span class="ws13a">system<span class="fc6 ls34">-</span>site<span class="fc6">-</span><span class="ws4">packages Spam</span></span></span></div><div class="t m0 x5 hf y2954 ff8 fs5 fc0 sc0 ls0 ws13c">bash <span class="fc6">%</span></div><div class="t m0 x0 h7 y2955 ff1 fs3 fc0 sc0 ls0 wsc">跟多关于 <span class="ff6 ws25d">pyvenv </span><span class="ws14">和虚拟环境的信息可以参考 <span class="ff4 fc3 ws9c">PEP 405<span class="fc0">.</span></span></span></div><div class="t m0 x5 hd y2956 ff2 fs4 fc4 sc0 ls0 wsd91">12.15<span class="_ _e"> </span>10.15 <span class="ff1">分发包</span></div><div class="t m0 x5 he y2957 ff2 fs2 fc4 sc0 ls0 wsadf">12.15.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 y2958 ff1 fs3 fc0 sc0 ls0">你已经编写了一个有用的库，想将它分享给其他人。</div><div class="t m0 x5 he y2959 ff2 fs2 fc4 sc0 ls0 wsadf">12.15.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 ya02 ff1 fs3 fc0 sc0 ls3a ws153">如果你想分发你的代码，第一件事就是给它一个唯一的名字，并且清理它的目录结</div><div class="t m0 x5 h9 y295a ff1 fs3 fc0 sc0 ls0">构。例如，一个典型的函数库包会类似下面这样：</div><div class="t m0 x5 hf y295b ff8 fs5 fc0 sc0 ls0 ws13a">projectname<span class="fc6">/</span></div><div class="t m0 x15 hf y295c ff8 fs5 fc0 sc0 ls0 ws13a">README<span class="fc6 ls34">.</span>txt</div><div class="t m0 x15 hf y19bd ff8 fs5 fc0 sc0 ls0 ws13a">Doc<span class="fc6">/</span></div><div class="t m0 x16 hf y1242 ff8 fs5 fc0 sc0 ls0 ws13a">documentation<span class="fc6 ls34">.</span>txt</div><div class="t m0 x15 hf y295d ff8 fs5 fc0 sc0 ls0 ws13a">projectname<span class="fc6">/</span></div><div class="t m0 x16 hf y295e ff8 fs5 fc0 sc0 ls0 ws13a">__init__<span class="fc6">.</span>py</div><div class="t m0 x16 hf y295f ff8 fs5 fc0 sc0 ls0 ws13a">foo<span class="fc6 ls34">.</span>py</div><div class="t m0 x16 hf y2960 ff8 fs5 fc0 sc0 ls0 ws13a">bar<span class="fc6 ls34">.</span>py</div><div class="t m0 x16 hf y2961 ff8 fs5 fc0 sc0 ls0 ws13a">utils<span class="fc6">/</span></div><div class="t m0 x17 hf y2962 ff8 fs5 fc0 sc0 ls0 ws13a">__init__<span class="fc6">.</span>py</div><div class="t m0 x17 hf y2963 ff8 fs5 fc0 sc0 ls0 ws13a">spam<span class="fc6">.</span>py</div><div class="t m0 x17 hf y2964 ff8 fs5 fc0 sc0 ls0 ws13a">grok<span class="fc6">.</span>py</div><div class="t m0 x15 hf y2965 ff8 fs5 fc0 sc0 ls0 ws13a">examples<span class="fc6">/</span></div><div class="t m0 x16 hf y236f ff8 fs5 fc0 sc0 ls0 ws13a">helloworld<span class="fc6 ls34">.</span>py</div><div class="t m0 x16 hf y2966 ff8 fs5 fc6 sc0 ls0 ws13a">...</div><div class="t m0 x0 h9 y2967 ff1 fs3 fc0 sc0 ls0 ws14">要让你的包可以发布出去，首先你要编写一个 <span class="ff6 ws1f3">setup.py </span>，类似下面这样：</div><div class="t m0 x5 h11 y331 ffa fs5 fcd sc0 ls0 ws4"># setup.py</div><div class="t m0 x5 hf y332 ff7 fs5 fca sc0 ls0 ws15a">from <span class="fcc ws2dd">distutils.core </span><span class="ws146">import <span class="ff8 fc0">setup</span></span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 wsd97">12.15.<span class="_ _5"> </span>10.15 <span class="ff1 wse62">分发包 </span>396</div><a class="l" href="https://www.python.org/dev/peps/pep-0405/"><div class="d m1" style="border-style:none;position:absolute;left:497.763000px;bottom:844.000500px;width:45.357000px;height:16.821000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

<div id="pfb8" class="pf w0 h0" data-page-no="b8"><div class="pc pcb8 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bgb8.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y1401 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y1402 ff1 fs3 fc0 sc0 ls0 wsc">下面是如何将一个 <span class="ff4 ws5f">JSON </span><span class="ws63">字典转换为一个 <span class="ff4 ws5c">Python </span>对象例子：</span></div><div class="t m0 x5 hf y1403 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws16a">class <span class="fcc ws156">JSONObject<span class="ff8 fc0">:</span></span></span></div><div class="t m0 x5 hf y1404 ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span><span class="ws4">, d):</span></span></span></span></div><div class="t m0 x5 hf y1405 ff7 fs5 fc5 sc0 ls0 ws1a3">... <span class="ff8 fca ws13a">self<span class="fc6">.<span class="fc0 ws16d">__dict__ </span><span class="ls32">=</span><span class="fc0">d</span></span></span></div><div class="t m0 x5 h10 y1406 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf y1407 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x5 hf y1408 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13c">data <span class="fc6 ls32">=</span><span class="ws13a">json<span class="fc6 ls34">.</span><span class="ws13b">loads(s, object_hook<span class="fc6 ls34">=</span>JSONObject)</span></span></span></div><div class="t m0 x5 hf y1409 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">data<span class="fc6 ls34">.</span>name</span></div><div class="t m0 x5 hf y140a ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">ACME<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y140b ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">data<span class="fc6 ls34">.</span>shares</span></div><div class="t m0 x5 hf y140c ff8 fs5 fc8 sc0 ls0">50</div><div class="t m0 x5 hf y140d ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">data<span class="fc6 ls34">.</span>price</span></div><div class="t m0 x5 hf y140e ff8 fs5 fc8 sc0 ls0">490.1</div><div class="t m0 x5 hf y140f ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y1410 ff1 fs3 fc0 sc0 ls0 wsa0">最<span class="_ _6"></span>后<span class="_ _6"></span>一<span class="_ _0"></span>个<span class="_ _6"></span>例<span class="_ _6"></span>子<span class="_ _6"></span>中，<span class="_ _0"></span><span class="ff4 ws7c5">JSON </span><span class="ls24 ws7c6">解码后的字典作为一个单个参数传递给 </span><span class="ff6 ws7c7">init<span class="_ _e"> </span>() </span>。<span class="_ _6"></span>然</div><div class="t m0 x5 h9 y1411 ff1 fs3 fc0 sc0 ls0">后，你就可以随心所欲的使用它了，比如作为一个实例字典来直接使用它。</div><div class="t m0 x0 h7 y1412 ff1 fs3 fc0 sc0 ls0 ws7c8">在编码 <span class="ff4 ws7c9">JSON </span><span class="wsa0">的时候，<span class="_ _1"></span>还有一些选项很有用。<span class="_ _1"></span>如果你想获得漂亮的格式化字符串后</span></div><div class="t m0 x5 h7 y224 ff1 fs3 fc0 sc0 ls30 ws7ca">输出，可以使用 <span class="ff6 ls0 ws7cb">json.dumps() </span><span class="ls6e">的<span class="ff4 ls0 ws7cc">inden<span class="_ _c"></span>t <span class="ff1 ls30 ws7cd">参数。它会使得输出和 </span><span class="ws7ce">pprin<span class="_ _c"></span>t() <span class="ff1 ls30 ws138">函数效果类</span></span></span></span></div><div class="t m0 x5 h9 y1413 ff1 fs3 fc0 sc0 ls0">似。比如：</div><div class="t m0 x5 hf y45a ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws156">print<span class="ff8 fc0 ws13a">(json<span class="fc6 ls34">.</span>dumps(data))</span></span></div><div class="t m0 x5 hf y1414 ff8 fs5 fc8 sc0 ls0 ws4">{&quot;price&quot;: 542.23, &quot;name&quot;: &quot;ACME&quot;, &quot;shares&quot;: 100}</div><div class="t m0 x5 hf y1415 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws156">print<span class="ff8 fc0 ws13a">(json<span class="fc6 ls34">.</span><span class="ws13b">dumps(data, indent<span class="fc6 ls34">=</span></span><span class="fc7">4</span>))</span></span></div><div class="t m0 x5 hf y1416 ff8 fs5 fc8 sc0 ls0">{</div><div class="t m0 x15 hf y1417 ff8 fs5 fc8 sc0 ls0 ws13b">&quot;price&quot;: 542.23,</div><div class="t m0 x15 hf y1418 ff8 fs5 fc8 sc0 ls0 ws13b">&quot;name&quot;: &quot;ACME&quot;,</div><div class="t m0 x15 hf y1419 ff8 fs5 fc8 sc0 ls0 ws13b">&quot;shares&quot;: 100</div><div class="t m0 x5 hf y141a ff8 fs5 fc8 sc0 ls0">}</div><div class="t m0 x5 hf y141b ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y141c ff1 fs3 fc0 sc0 ls0 ws38">对象实例通常并不是 <span class="ff4 ws5f">JSON </span>可序列化的。例如：</div><div class="t m0 x5 hf y141d ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws16a">class <span class="fcc ws156">Point<span class="ff8 fc0">:</span></span></span></div><div class="t m0 x5 hf y141e ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span><span class="ws4">, x, y):</span></span></span></span></div><div class="t m0 x5 hf y141f ff7 fs5 fc5 sc0 ls0 ws1a3">... <span class="ff8 fca ws13a">self<span class="fc6">.<span class="fc0 ls33">x</span><span class="ls32">=</span><span class="fc0">x</span></span></span></div><div class="t m0 x5 hf y1420 ff7 fs5 fc5 sc0 ls0 ws1a3">... <span class="ff8 fca ws13a">self<span class="fc6">.<span class="fc0 ls33">y</span><span class="ls32">=</span><span class="fc0">y</span></span></span></div><div class="t m0 x5 h10 y1421 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf y1422 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">p<span class="fc6 ls33">=</span><span class="ls0 ws13a">Point(<span class="fc7 ls34">2</span></span>,<span class="fc7 ls34">3</span><span class="ls0">)</span></span></div><div class="t m0 x5 hf y1423 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">json<span class="fc6 ls34">.</span>dumps(p)</span></div><div class="t m0 x5 hf y1424 ff8 fs5 fce sc0 ls0 ws4">Traceback (most recent call last):</div><div class="t m0 x15 hf y1425 ff8 fs5 fc0 sc0 ls0 ws13c">File <span class="fc9 ws13a">&quot;&lt;stdin&gt;&quot;</span><span class="ws145">, line <span class="fc7 ls34">1</span><span class="ls32">,</span><span class="ff7 fca ws160">in </span><span class="fc6 ws13a">&lt;<span class="fc0">module</span>&gt;</span></span></div><div class="t m0 x15 hf y1426 ff8 fs5 fc0 sc0 ls0 ws13c">File <span class="fc9 ws13a">&quot;/usr/local/lib/python3.3/json/__init__.py&quot;</span><span class="ws13b">, line <span class="fc7 ws13a">226</span><span class="ls33">,</span><span class="ff7 fca ws157">in </span>dumps</span></div><div class="t m0 x16 hf y6b0 ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 fc0 ws13a">_default_encoder<span class="fc6">.</span>encode(obj)</span></div><div class="t m0 x15 hf y6b1 ff8 fs5 fc0 sc0 ls0 ws13c">File <span class="fc9 ws13a">&quot;/usr/local/lib/python3.3/json/encoder.py&quot;</span><span class="ws145">, line <span class="fc7 ws13a">187</span><span class="ls33">,</span><span class="ff7 fca ws157">in </span>encode</span></div><div class="t m0 x16 hf y6b2 ff8 fs5 fc0 sc0 ls0 ws145">chunks <span class="fc6 ls32">=</span><span class="fca ws13a">self<span class="fc6 ls34">.</span></span><span class="ws4">iterencode(o, _one_shot<span class="fc6 ws13a">=<span class="fca">True</span></span>)</span></div><div class="t m0 x15 hf y6b3 ff8 fs5 fc0 sc0 ls0 ws13c">File <span class="fc9 ws13a">&quot;/usr/local/lib/python3.3/json/encoder.py&quot;</span><span class="ws145">, line <span class="fc7 ws13a">245</span><span class="ls33">,</span><span class="ff7 fca ws157">in </span>iterencode</span></div><div class="t m0 x16 hf y6b4 ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 fc0 ws169">_iterencode(o, <span class="fc7 ls34">0</span>)</span></div><div class="t m0 x15 hf y6b5 ff8 fs5 fc0 sc0 ls0 ws13c">File <span class="fc9 ws13a">&quot;/usr/local/lib/python3.3/json/encoder.py&quot;</span><span class="ws145">, line <span class="fc7 ws13a">169</span><span class="ls33">,</span><span class="ff7 fca ws157">in </span>default</span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">8.2.<span class="_ _5"> </span>6.2 <span class="ff1 ws16b">读写 </span><span class="ws791">JSON <span class="ff1 ws792">数据 </span>175</span></div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

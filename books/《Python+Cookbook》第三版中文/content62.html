<div id="pf3e" class="pf w0 h0" data-page-no="3e"><div class="pc pc3e w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg3e.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y1ab ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws159">t4 <span class="fc6 ls33">=</span><span class="ws13a">unicodedata<span class="fc6">.</span>normalize(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">NFD<span class="ff9 ls34">&apos;</span></span><span class="ws4">, s2)</span></span></span></div><div class="t m0 x5 hf y1ac ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws159">t3 <span class="fc6">== </span>t4</span></div><div class="t m0 x5 hf y1ad ff8 fs5 fc8 sc0 ls0">True</div><div class="t m0 x5 hf y1ae ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws156">print<span class="ff8 fc0">(ascii(t3))</span></span></div><div class="t m0 x5 hf y1af ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13b">Spicy Jalapen\u0303o<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y1b0 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y1b1 ff6 fs3 fc0 sc0 ls0 ws344">normalize() <span class="ff1 ls48 ws242">第一个参数指定字符串标准化的方式<span class="_ _1"></span>。<span class="ff4 ls0 ws345">NFC </span>表示字符应该是整体组<span class="_ _c"></span></span></div><div class="t m0 x5 h7 y1b2 ff1 fs3 fc0 sc0 ls4">成<span class="ff4 ls1b">(</span><span class="ls0 wsa0">比如可能的话就使用单一编码<span class="ff4 ls1b">)</span><span class="ws14">，而 <span class="ff4 ws346">NFD </span>表示字符应该分解为多个组合字符表示。</span></span></div><div class="t m0 x0 h7 y6b6 ff4 fs3 fc0 sc0 ls0 ws347">Python <span class="ff1 ws348">同样支持扩展的标准化形式 </span><span class="ws349">NFK<span class="_ _1"></span>C <span class="ff1 ls8f">和</span><span class="wsa5">NFKD<span class="ff1 wsa0">，它们在处理某些字符的时候</span></span></span></div><div class="t m0 x5 h9 y6b7 ff1 fs3 fc0 sc0 ls0">增加了额外的兼容特性。比如：</div><div class="t m0 x5 hf y6b8 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">s<span class="fc6 ls33">=<span class="ff9 fc9 ls34">&apos;</span></span></span><span class="fc9 ws156">\ufb01<span class="ff9 ls32">&apos;</span><span class="ffa fcd ws4"># A single character</span></span></div><div class="t m0 x5 hf y6b9 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">s</span></div><div class="t m0 x5 h12 y6ba ff9 fs5 fc8 sc0 ls32">&apos;<span class="ffc fs6 ls90">ﬁ</span><span class="ls0">&apos;</span></div><div class="t m0 x5 hf y6bb ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">unicodedata<span class="fc6 ls34">.</span>normalize(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">NFD<span class="ff9 ls34">&apos;</span></span><span class="ws13b">, s)</span></span></div><div class="t m0 x5 h12 y6bc ff9 fs5 fc8 sc0 ls32">&apos;<span class="ffc fs6 ls90">ﬁ</span><span class="ls0">&apos;</span></div><div class="t m0 x5 hf y6bd ff8 fs5 fc8 sc0 ls0 ws4"># Notice how the combined letters are broken apart here</div><div class="t m0 x5 hf y6be ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">unicodedata<span class="fc6 ls34">.</span>normalize(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">NFKD<span class="ff9 ws13b">&apos;</span></span><span class="ws4">, s)</span></span></div><div class="t m0 x5 hf y6bf ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">fi<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y6c0 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">unicodedata<span class="fc6 ls34">.</span>normalize(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">NFKC<span class="ff9 ws13b">&apos;</span></span><span class="ws4">, s)</span></span></div><div class="t m0 x5 hf y6c1 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">fi<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y6c2 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x5 he y6c3 ff2 fs2 fc4 sc0 ls0 ws135">4.9.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h7 y6c4 ff1 fs3 fc0 sc0 ls0 ws34a">标准化对于任何需要以一致的方式处理 <span class="ff4 ws34b">Unico<span class="_ _6"></span>de </span><span class="wsa0">文本的程序都是非常重要的。当处</span></div><div class="t m0 x5 h9 y6c5 ff1 fs3 fc0 sc0 ls0">理来自用户输入的字符串而你很难去控制编码的时候尤其如此。</div><div class="t m0 x0 h9 y6c6 ff1 fs3 fc0 sc0 ls3a ws153">在清理和过滤文本的时候字符的标准化也是很重要的。比如，假设你想清除掉一些</div><div class="t m0 x5 h7 y6c7 ff1 fs3 fc0 sc0 ls0 ws38">文本上面的变音符的时候 <span class="ff4 ls1b">(</span><span class="wsa0">可能是为了搜索和匹配<span class="ff4 ls1b">)</span>：</span></div><div class="t m0 x5 hf y6c8 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws159">t1 <span class="fc6 ls33">=</span><span class="ws13a">unicodedata<span class="fc6">.</span>normalize(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">NFD<span class="ff9 ls34">&apos;</span></span><span class="ws4">, s1)</span></span></span></div><div class="t m0 x5 hf y6c9 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff9 fc9 ws13b">&apos;&apos;<span class="ff8 fc6 ls34">.<span class="fc0 ls0 ws145">join(c </span></span></span><span class="fca">for <span class="ff8 fc0 ls33">c</span><span class="ws157">in <span class="ff8 fc0 ws159">t1 </span>if not <span class="ff8 fc0 ws13a">unicodedata<span class="fc6 ls34">.</span>combining(c))</span></span></span></div><div class="t m0 x5 hf y6ca ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13b">Spicy Jalapeno<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y6cb ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y6cc ff1 fs3 fc0 sc0 ls14 ws34c">最后一个例子展示了 <span class="ff6 ls0 ws34d">unicodedata </span><span class="ws174">模块的另一个重要方面<span class="_ _1"></span>，也就是测试字符类的<span class="_ _1"></span></span></div><div class="t m0 x5 h9 y6cd ff1 fs3 fc0 sc0 ls0 ws34e">工具<span class="_ _6"></span>函数。 <span class="ff6 ws1ec">combining() </span><span class="ls17 wsf6">函数可以测试一个字符是否为和音字符。在这个模块中还有<span class="_ _1"></span></span></div><div class="t m0 x5 h9 y6ce ff1 fs3 fc0 sc0 ls0">其他函数用于查找字符类别，测试是否为数字字符等等。</div><div class="t m0 x0 h7 y6cf ff4 fs3 fc0 sc0 ls0 ws34f">Unico<span class="_ _6"></span>de <span class="ff1 ls18 ws110">显然是一个很大的主题。如果想更深入的了解关于标准化方面的信息<span class="_ _1"></span>，请</span></div><div class="t m0 x5 h7 y6d0 ff1 fs3 fc0 sc0 ls0 ws350">看<span class="_ _6"></span>考 <span class="ff4 fc3 ws351">Unico<span class="_ _6"></span>de <span class="ff1 ls6c ws352">官网中关于这部分的说明 </span><span class="fc0 ws353">Ned Batc<span class="_ _1"></span>helder <span class="ff1 ls7a">在<span class="fc3 ls0 ws354">他<span class="_ _6"></span>的<span class="_ _6"></span>网<span class="_ _6"></span>站 <span class="fc0 ws350">上<span class="_ _6"></span>对 </span></span></span><span class="ws355">Python <span class="ff1">的</span></span></span></span></div><div class="t m0 x5 h7 y6d1 ff4 fs3 fc0 sc0 ls0 ws356">Unico<span class="_ _6"></span>de <span class="ff1">处理问题也有一个很好的介绍。</span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">4.9.<span class="_ _5"> </span>2.9 <span class="ff1 ls81">将</span><span class="ws342">Unico<span class="_ _6"></span>de <span class="ff1 ws343">文本标准化 </span>53</span></div><a class="l" href="http://www.unicode.org/faq/normalization.html"><div class="d m1" style="border-style:none;position:absolute;left:151.140000px;bottom:252.561000px;width:181.161000px;height:16.821000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="http://nedbatchelder.com/text/unipain.html"><div class="d m1" style="border-style:none;position:absolute;left:580.687500px;bottom:253.353000px;width:48.884000px;height:14.015000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

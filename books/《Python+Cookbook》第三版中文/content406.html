<div id="pf196" class="pf w0 h0" data-page-no="196"><div class="pc pc196 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg196.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y1ab ff8 fs5 fc0 sc0 ls0 ws13a">setup(name<span class="fc6 ls34">=<span class="ff9 fc9">&apos;</span></span><span class="fc9">projectname<span class="ff9 ws13b">&apos;</span></span>,</div><div class="t m0 x15 hf y1ac ff8 fs5 fc0 sc0 ls0 ws13a">version<span class="fc6 ls34">=</span><span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">1.0<span class="ff9 ws13b">&apos;</span></span>,</div><div class="t m0 x15 hf y1ad ff8 fs5 fc0 sc0 ls0 ws13a">author<span class="fc6 ls34">=<span class="ff9 fc9">&apos;</span></span><span class="fc9 ws13b">Your Name<span class="ff9 ls34">&apos;</span></span>,</div><div class="t m0 x15 hf y1ae ff8 fs5 fc0 sc0 ls0 ws13a">author_email<span class="fc6">=<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">you@youraddress.com<span class="ff9 ls34">&apos;</span></span></span>,</div><div class="t m0 x15 hf y1af ff8 fs5 fc0 sc0 ls0 ws13a">url<span class="fc6 ls34">=<span class="ff9 fc9">&apos;</span></span><span class="fc9">http://www.you.com/projectname<span class="ff9 ls34">&apos;</span></span>,</div><div class="t m0 x15 hf y1b0 ff8 fs5 fc0 sc0 ls0 ws13a">packages<span class="fc6">=</span><span class="ls34">[<span class="ff9 fc9">&apos;</span></span><span class="fc9">projectname<span class="ff9 ls34">&apos;</span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">projectname.utils<span class="ff9 ls34">&apos;</span></span>],</div><div class="t m0 x5 hf y355 ff8 fs5 fc0 sc0 ls0">)</div><div class="t m0 x0 h9 y1b2 ff1 fs3 fc0 sc0 ls0 wse63">下<span class="_ _6"></span>一<span class="_ _6"></span>步，<span class="_ _6"></span>就<span class="_ _6"></span>是<span class="_ _6"></span>创<span class="_ _6"></span>建<span class="_ _6"></span>一<span class="_ _6"></span>个 <span class="ff6 wse64">MANIFEST.in </span><span class="ls49 ws1a6">文件<span class="_ _1"></span>，列出所有在你的包中需要包含进来的<span class="_ _1"></span></span></div><div class="t m0 x5 h9 y1cc ff1 fs3 fc0 sc0 ls0">非源码文件：</div><div class="t m0 x5 h11 y2968 ffa fs5 fcd sc0 ls0 ws4"># MANIFEST.in</div><div class="t m0 x5 hf y2969 ff8 fs5 fc0 sc0 ls0 ws155">include <span class="fc6 ws13a">*.</span>txt</div><div class="t m0 x5 hf y296a ff8 fs5 fc0 sc0 ls0 ws13a">recursive<span class="fc6">-</span><span class="ws4">include examples <span class="fc6">*</span></span></div><div class="t m0 x5 hf y844 ff8 fs5 fc0 sc0 ls0 ws13a">recursive<span class="fc6">-</span><span class="ws4">include Doc <span class="fc6">*</span></span></div><div class="t m0 x0 h9 y296b ff1 fs3 fc0 sc0 ls0 ws5ac">确保 <span class="ff6 ws49e">setup.py </span><span class="lsf0">和</span><span class="ff6 wse65">MANIFEST.in </span><span class="wsa0">文件放在你的包的最顶级目录中。一旦你已经做了</span></div><div class="t m0 x5 h9 y144 ff1 fs3 fc0 sc0 ls0">这些，你就可以像下面这样执行命令来创建一个源码分发包了：</div><div class="t m0 x5 hf y296c ff8 fs5 fc6 sc0 ls32">%<span class="fc0 ls0 ws4">bash python3 setup</span><span class="ls0 ws13a">.<span class="fc0 ws4">py sdist</span></span></div><div class="t m0 x0 h7 y296d ff1 fs3 fc0 sc0 ls0 wsa0">它<span class="_ _0"></span>会<span class="_ _12"></span>创<span class="_ _0"></span>建<span class="_ _12"></span>一<span class="_ _12"></span>个<span class="_ _0"></span>文<span class="_ _12"></span>件<span class="_ _0"></span>比<span class="_ _12"></span>如<span class="ff4 wse66">”pro<span class="_ _6"></span>jectname-1.0.zip” </span>或<span class="_ _0"></span>“<span class="ff4 wsa5">pro<span class="_ _6"></span>jectname-1.0.tar.gz</span><span class="ls1cf">”<span class="ff4 ls1d0">,</span></span>具<span class="_ _12"></span>体</div><div class="t m0 x5 h9 y296e ff1 fs3 fc0 sc0 ls139 ws859">依赖于你的系统平台<span class="_ _d"></span>。如果一切正常<span class="_ _c"></span>，这个文件就可以发送给别人使用或者上传至<span class="_ _c"></span></div><div class="t m0 x5 h7 y296f ff4 fs3 fc3 sc0 ls0 wsd0">Python P<span class="_ _1"></span>ac<span class="_ _1"></span>kage Index<span class="fc0">.</span></div><div class="t m0 x5 he y2970 ff2 fs2 fc4 sc0 ls0 wsadf">12.15.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h7 y2971 ff1 fs3 fc0 sc0 ls0 wsc6d">对于<span class="_ _6"></span>纯 <span class="ff4 wse67">Python </span><span class="ls22 wse68">代码，编写一个普通的 </span><span class="ff6 wsc6f">setup.py </span><span class="ls22 ws119">文件通常很简单<span class="_ _1"></span>。一个可能的问</span></div><div class="t m0 x5 h9 y2972 ff1 fs3 fc0 sc0 ls2d ws132">题是你必须手动列出所有构成包源码的子目录。一个常见错误就是仅仅只列出一个包<span class="_ _1"></span></div><div class="t m0 x5 h9 y2973 ff1 fs3 fc0 sc0 ls0 wse69">的最顶级目录，忘记了包含包的子组件。这也是为什么在 <span class="ff6 ws25b">setup.py </span>中对于包的说明包</div><div class="t m0 x5 h9 y1b53 ff1 fs3 fc0 sc0 ls0 ws14">含了列表 <span class="ff6 ws305">packages=[&apos;projectname&apos;, &apos;projectname.utils&apos;]</span></div><div class="t m0 x0 h7 y2974 ff1 fs3 fc0 sc0 ls19a wse6a">大部分 <span class="ff4 ls0 wse6b">Python <span class="ff1 wse6c">程<span class="_ _6"></span>序<span class="_ _0"></span>员<span class="_ _6"></span>都<span class="_ _0"></span>知<span class="_ _6"></span>道，<span class="_ _0"></span>有<span class="_ _6"></span>很<span class="_ _0"></span>多<span class="_ _6"></span>第<span class="_ _0"></span>三<span class="_ _6"></span>方<span class="_ _6"></span>包<span class="_ _0"></span>管<span class="_ _6"></span>理<span class="_ _0"></span>器<span class="_ _6"></span>供<span class="_ _0"></span>选<span class="_ _6"></span>择，<span class="_ _0"></span>包<span class="_ _6"></span>括 </span><span class="wsa5">setupto<span class="_ _6"></span>ols<span class="ff1">、</span></span></span></div><div class="t m0 x5 h7 y2975 ff4 fs3 fc0 sc0 ls0 wse6d">distribute <span class="ff1 ls22 wse6e">等等。有些是为了替代标准库中的 </span><span class="wsa5">distutils<span class="ff1 ls22 ws119">。注意如果你依赖这些包<span class="_ _c"></span>，用户</span></span></div><div class="t m0 x5 h9 y2976 ff1 fs3 fc0 sc0 ls0 wsa0">可<span class="_ _6"></span>能不<span class="_ _6"></span>能<span class="_ _6"></span>安<span class="_ _6"></span>装<span class="_ _6"></span>你<span class="_ _6"></span>的软<span class="_ _6"></span>件，<span class="_ _6"></span>除<span class="_ _6"></span>非<span class="_ _6"></span>他<span class="_ _6"></span>们已<span class="_ _6"></span>经<span class="_ _6"></span>事<span class="_ _6"></span>先<span class="_ _6"></span>安<span class="_ _6"></span>装过<span class="_ _6"></span>所<span class="_ _6"></span>需<span class="_ _6"></span>要<span class="_ _6"></span>的<span class="_ _6"></span>包管<span class="_ _6"></span>理<span class="_ _6"></span>器。<span class="_ _6"></span>正<span class="_ _6"></span>因<span class="_ _6"></span>如<span class="_ _6"></span>此，你</div><div class="t m0 x5 h7 y2977 ff1 fs3 fc0 sc0 ls82 wse6f">更应该时刻记住越简单越好的道理。最好让你的代码使用标准的 <span class="ff4 ls0 wse70">Python 3 </span><span class="ws2f9">安装。如果</span></div><div class="t m0 x5 h9 y2978 ff1 fs3 fc0 sc0 ls0">其他包也需要的话，可以通过一个可选项来支持。</div><div class="t m0 x0 h7 y2cb ff1 fs3 fc0 sc0 ls0 wse71">对于<span class="_ _6"></span>涉<span class="_ _6"></span>及<span class="_ _6"></span>到 <span class="ff4 ls1d1">C</span><span class="ls10 wse72">扩展的代码打包与分发就更复杂点了。第 </span><span class="ff4 wse73">15 </span><span class="ls10 wsd55">章对关于 <span class="ff4 ls1d1">C</span><span class="wsdf">扩展的这<span class="_ _c"></span></span></span></div><div class="t m0 x5 h7 y2979 ff1 fs3 fc0 sc0 ls0 ws14">方面知识有一些详细讲解，特别是在 <span class="ff4 ws1d0">15.2 </span>小节中。</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 wsd97">12.15.<span class="_ _5"> </span>10.15 <span class="ff1 wse62">分发包 </span>397</div><a class="l" href="http://pypi.python.org/"><div class="d m1" style="border-style:none;position:absolute;left:108.000000px;bottom:670.813500px;width:115.439000px;height:16.821000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

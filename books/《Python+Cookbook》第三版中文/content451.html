<div id="pf1c3" class="pf w0 h0" data-page-no="1c3"><div class="pc pc1c3 w0 h0"><img class="bi x13 y5 w2 hb" alt="" src="bg1c3.png"/><div class="t m0 xe h8 y76 ff2 fs3 fc0 sc0 ls0">CHAPTER</div><div class="t m0 x42 hc y77 ff2 fs4 fc0 sc0 ls0 wsd3">F<span class="_ _c"></span>OURTEEN</div><div class="t m0 x43 hd y78 ff1 fs4 fc0 sc0 ls0">第十二章：并发编程</div><div class="t m0 x0 h7 y79 ff1 fs3 fc0 sc0 ls0 wsa0">对于并发<span class="_ _6"></span>编程<span class="ff4 ws1054">, Python </span>有多种<span class="_ _6"></span>长期支持<span class="_ _6"></span>的方法<span class="ff4 ls1af">,</span><span class="ls51 ws1c8">包括多线程<span class="ff4 ls1af">,</span></span>调用子<span class="_ _6"></span>进程<span class="ff4 ls1af">,</span><span class="ls51 ws1c8">以及各种</span></div><div class="t m0 x5 h7 ycf ff1 fs3 fc0 sc0 lse wsd8">各样的关于生成器函数的技巧<span class="ff4 ls1f9">.</span>这一章将会给出并发编程各种方面的技巧<span class="ff4 ls1fa">,</span>包括通用的<span class="_ _c"></span></div><div class="t m0 x5 h7 yd0 ff1 fs3 fc0 sc0 ls0 wsa0">多线程技术以及并行计算的实现方法<span class="ff4">.</span></div><div class="t m0 x0 h7 y9fe ff1 fs3 fc0 sc0 ls0 wsa0">像经验丰富<span class="_ _6"></span>的程序员所知<span class="_ _6"></span>道的那样<span class="ff4 ls1fb">,</span>大家担<span class="_ _6"></span>心并发的程序<span class="_ _6"></span>有潜在的危险<span class="ff4 ls1fc">.</span>因<span class="_ _6"></span>此<span class="ff4 ls1fb">,</span>本章</div><div class="t m0 x5 h7 yd2 ff1 fs3 fc0 sc0 ls0 wsa0">的主要目标之一是给出更加可信赖和易调试的代码<span class="ff4">.</span></div><div class="t m0 x0 h7 y20ad ff4 fs3 fc0 sc0 ls0 wsa5">Con<span class="_ _1"></span>ten<span class="_ _1"></span>ts:</div><div class="t m0 x5 hd y2d76 ff2 fs4 fc4 sc0 ls0 ws211">14.1<span class="_ _e"> </span>12.1 <span class="ff1">启动与停止线程</span></div><div class="t m0 x5 he y2d77 ff2 fs2 fc4 sc0 ls0 ws212">14.1.1 <span class="ff1">问题</span></div><div class="t m0 x0 h7 y2d78 ff1 fs3 fc0 sc0 ls0 wsa0">你要为需要并发执行的代码创建<span class="ff4 ls6">/</span>销毁线程</div><div class="t m0 x5 he y2d79 ff2 fs2 fc4 sc0 ls0 ws212">14.1.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h7 y2d7a ff6 fs3 fc0 sc0 ls0 ws337">threading <span class="ff1 lse ws1055">库可以在单独的线程中执行任何的在 </span><span class="ff4 wsd7">Python <span class="ff1 lse wsd8">中可以调用的对象。你可</span></span></div><div class="t m0 x5 h7 y2d7b ff1 fs3 fc0 sc0 ls40 ws1056">以创建一个 <span class="ff6 ls0 wsaa6">Thread </span><span class="ws1057">对象并将你要执行的对象以 <span class="ff4 ls0 ws1058">target </span><span class="ws180">参数的形式提供给该对象。下<span class="_ _c"></span></span></span></div><div class="t m0 x5 h9 y29a3 ff1 fs3 fc0 sc0 ls0">面是一个简单的例子：</div><div class="t m0 x5 h11 y2d7c ffa fs5 fcd sc0 ls0 ws4"># Code to execute in an independent thread</div><div class="t m0 x5 h10 y2d7d ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc">time</span></div><div class="t m0 x5 hf y2d7e ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">countdown<span class="fc0">(n):</span></span></div><div class="t m0 x15 hf y2d7f ff7 fs5 fca sc0 ls0 ws16a">while <span class="ff8 fc0 ls33">n<span class="fc6 ls32">&gt;<span class="fc7 ls34">0</span></span><span class="ls0">:</span></span></div><div class="t m0 x16 hf y2d80 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">T-minus</span>&apos;</span><span class="ls0 ws13b">, n)</span></span></div><div class="t m0 x16 hf y2d81 ff8 fs5 fc0 sc0 ls32">n<span class="fc6 ls0 ws23d">-= <span class="fc7">1</span></span></div><div class="t m0 x16 hf y2d82 ff8 fs5 fc0 sc0 ls0 ws13a">time<span class="fc6">.</span>sleep(<span class="fc7 ls34">5</span>)</div><div class="t m0 x5 h11 y2d83 ffa fs5 fcd sc0 ls0 ws4"># Create and launch a thread</div><div class="t m0 x5 hf y2d84 ff7 fs5 fca sc0 ls0 ws15a">from <span class="fcc ws285">threading </span><span class="ws146">import <span class="ff8 fc0">Thread</span></span></div><div class="t m0 x5 hf y2d85 ff8 fs5 fc0 sc0 ls32">t<span class="fc6 ls33">=</span><span class="ls0 ws13a">Thread(target<span class="fc6 ls34">=</span><span class="ws4">countdown, args<span class="fc6 ls34">=</span></span>(<span class="fc7">10</span>,))</span></div><div class="t m0 x5 hf y2d86 ff8 fs5 fc0 sc0 ls34">t<span class="fc6 ls0 ws13a">.<span class="fc0">start()</span></span></div><div class="t m0 x26 h8 y29 ff2 fs3 fc0 sc0 ls0">442</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

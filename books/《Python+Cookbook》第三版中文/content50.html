<div id="pf32" class="pf w0 h0" data-page-no="32"><div class="pc pc32 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg32.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x0 h9 y2a ff1 fs3 fc0 sc0 ls0 ws2d5">当你使<span class="_ _6"></span>用 <span class="ff6 ws141">re.split() </span><span class="ls18 ws110">函数时候，需要特别注意的是正则表达式中是否包含一个括</span></div><div class="t m0 x5 h9 y2b ff1 fs3 fc0 sc0 ls2c ws12f">号捕获分组。如果使用了捕获分组，那么被匹配的文本也将出现在结果列表中<span class="_ _1"></span>。比如，</div><div class="t m0 x5 h9 y2c ff1 fs3 fc0 sc0 ls0">观察一下这段代码运行后的结果：</div><div class="t m0 x5 hf y531 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws145">fields <span class="fc6 ls32">=</span><span class="ws13a">re<span class="fc6 ls34">.</span>split(<span class="fc9 ls34">r<span class="ff9 ls0 ws13b">&apos;</span><span class="ls0">(;<span class="ffd ws13b">|</span></span>,<span class="ffd ls0 ws13b">|</span><span class="ls0">\s)\s*</span><span class="ff9">&apos;</span></span><span class="ws13b">, line)</span></span></span></div><div class="t m0 x5 hf y532 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">fields</span></div><div class="t m0 x5 hf y533 ff8 fs5 fc8 sc0 ls34">[<span class="ff9 ls0 ws13b">&apos;</span><span class="ls0 ws13a">asdf</span><span class="ff9">&apos;</span><span class="ls33">,<span class="ff9 ls0 ws2d6">&apos; &apos;</span><span class="ls32">,</span></span><span class="ff9">&apos;</span><span class="ls0 ws13a">fjdk</span><span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span><span class="ls0 ws13a">;</span><span class="ff9">&apos;</span><span class="ls33">,<span class="ff9 ls0 ws13b">&apos;</span><span class="ls0 ws13a">afed</span></span><span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span>,<span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span><span class="ls0 ws13a">fjek<span class="ff9 ws13b">&apos;</span><span class="ls33">,</span></span><span class="ff9">&apos;</span><span class="ls0 ws13a">,</span><span class="ff9">&apos;</span><span class="ls33">,<span class="ff9 ls0 ws13b">&apos;</span><span class="ls0 ws13a">asdf</span></span><span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span>,<span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span><span class="ls0 ws13a">foo</span><span class="ff9">&apos;</span><span class="ls0">]</span></div><div class="t m0 x5 hf y534 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y535 ff1 fs3 fc0 sc0 ls0 wsa0">获取分割字符在某些<span class="_ _6"></span>情况下也是有用的。比如，你<span class="_ _6"></span>可能想保留分割字符串，<span class="_ _6"></span>用来在</div><div class="t m0 x5 h9 y536 ff1 fs3 fc0 sc0 ls0">后面重新构造一个新的输出字符串：</div><div class="t m0 x5 hf y537 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws145">values <span class="fc6 ls32">=</span><span class="ws13a">fields[::<span class="fc7 ls34">2</span>]</span></span></div><div class="t m0 x5 hf y538 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws2a3">delimiters <span class="fc6 ls32">=</span><span class="ws13a">fields[<span class="fc7 ls34">1</span>::<span class="fc7">2</span><span class="ls33">]<span class="fc6 ls32">+</span><span class="ls34">[</span></span><span class="ff9 fc9 ws13b">&apos;&apos;</span>]</span></span></div><div class="t m0 x5 hf y539 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">values</span></div><div class="t m0 x5 hf y53a ff8 fs5 fc8 sc0 ls34">[<span class="ff9 ls0 ws13b">&apos;</span><span class="ls0 ws13a">asdf</span><span class="ff9">&apos;</span><span class="ls33">,<span class="ff9 ls0 ws13b">&apos;</span><span class="ls0 ws13a">fjdk</span></span><span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span><span class="ls0 ws13a">afed</span><span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span><span class="ls0 ws13a">fjek</span><span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span><span class="ls0 ws13a">asdf<span class="ff9 ws13b">&apos;</span><span class="ls33">,</span></span><span class="ff9">&apos;</span><span class="ls0 ws13a">foo<span class="ff9 ws13b">&apos;</span>]</span></div><div class="t m0 x5 hf y53b ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">delimiters</span></div><div class="t m0 x5 hf y53c ff8 fs5 fc8 sc0 ls34">[<span class="ff9 ls0 ws2d6">&apos; &apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span>;<span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span><span class="ls0 ws13a">,</span><span class="ff9">&apos;</span><span class="ls33">,<span class="ff9 ls0 ws13b">&apos;</span></span>,<span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span>,<span class="ff9 ls0 ws13b">&apos;</span><span class="ls33">,<span class="ff9 ls0 ws13b">&apos;&apos;<span class="ff8">]</span></span></span></div><div class="t m0 x5 h11 y53d ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Reform the line using the same delimiters</span></div><div class="t m0 x5 hf y53e ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff9 fc9 ws13b">&apos;&apos;<span class="ff8 fc6 ls34">.<span class="fc0 ls0 ws13a">join(v</span>+<span class="fc0 ls33">d</span></span></span><span class="fca">for <span class="ff8 fc0 ws15b">v,d </span><span class="ws160">in <span class="ff8 ws13a">zip<span class="fc0 ws13b">(values, delimiters))</span></span></span></span></div><div class="t m0 x5 hf y53f ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13b">asdf fjdk;afed,fjek,asdf,foo<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y540 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y541 ff1 fs3 fc0 sc0 ls3a ws153">如果你不想保留分割字符串到结果列表中去，但仍然需要使用到括号来分组正则表</div><div class="t m0 x5 h9 y542 ff1 fs3 fc0 sc0 ls0 ws14">达式的话，确保你的分组是非捕获分组，形如 <span class="ff6 ws2d7">(?:...) </span>。比如：</div><div class="t m0 x5 hf y543 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">re<span class="fc6 ls34">.</span>split(<span class="fc9 ls34">r<span class="ff9">&apos;</span><span class="ls0">(?:,<span class="ffd ws13b">|</span></span>;<span class="ffd ls0 ws13b">|</span><span class="ls0">\s)\s*</span><span class="ff9">&apos;</span></span><span class="ws13b">, line)</span></span></div><div class="t m0 x5 hf y544 ff8 fs5 fc8 sc0 ls34">[<span class="ff9 ls0 ws13b">&apos;</span><span class="ls0 ws13a">asdf</span><span class="ff9">&apos;</span><span class="ls33">,<span class="ff9 ls0 ws13b">&apos;</span><span class="ls0 ws13a">fjdk</span></span><span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span><span class="ls0 ws13a">afed</span><span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span><span class="ls0 ws13a">fjek</span><span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span><span class="ls0 ws13a">asdf<span class="ff9 ws13b">&apos;</span><span class="ls33">,</span></span><span class="ff9">&apos;</span><span class="ls0 ws13a">foo<span class="ff9 ws13b">&apos;</span>]</span></div><div class="t m0 x5 hf y545 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x5 hd y546 ff2 fs4 fc4 sc0 ls0 ws134">4.2<span class="_ _e"> </span>2.2 <span class="ff1">字符串开头或结尾匹配</span></div><div class="t m0 x5 he y547 ff2 fs2 fc4 sc0 ls0 ws135">4.2.1 <span class="ff1">问题</span></div><div class="t m0 x0 h7 y548 ff1 fs3 fc0 sc0 ls0 wsa0">你需要通过指定的文本模式去检查字符串的开头或者结尾，比如文件名后缀，<span class="ff4">URL</span></div><div class="t m0 x5 h7 y549 ff4 fs3 fc0 sc0 ls0 ws2d8">Sc<span class="_ _1"></span>heme <span class="ff1">等等。</span></div><div class="t m0 x5 he y54a ff2 fs2 fc4 sc0 ls0 ws135">4.2.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 y54b ff1 fs3 fc0 sc0 ls78 ws2d9">检查字符串开头或结尾的一个简单方法是使用 <span class="ff6 ls0 ws2da">str.startswith() <span class="ff1 ws2db">或 者 是</span></span></div><div class="t m0 x5 h9 y54c ff6 fs3 fc0 sc0 ls0 ws2dc">str.endswith() <span class="ff1">方法。比如：</span></div><div class="t m0 x5 hf y54d ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws1f5">filename <span class="fc6 ls33">=<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9 ws13a">spam.txt<span class="ff9">&apos;</span></span></span></div><div class="t m0 x5 hf y54e ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">filename<span class="fc6">.</span>endswith(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">.txt<span class="ff9 ws13b">&apos;</span></span>)</span></div><div class="t m0 x5 hf y54f ff8 fs5 fc8 sc0 ls0">True</div><div class="t m0 x5 hf y550 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">filename<span class="fc6">.</span>startswith(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">file:<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 hf y551 ff8 fs5 fc8 sc0 ls0">False</div><div class="t m0 x5 hf y552 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws158">url <span class="fc6 ls32">=<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9 ws13a">http://www.python.org<span class="ff9">&apos;</span></span></span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">4.2.<span class="_ _5"> </span>2.2 <span class="ff1 ws1d2">字符串开头或结尾匹配 </span>41</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

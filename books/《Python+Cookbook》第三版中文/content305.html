<div id="pf131" class="pf w0 h0" data-page-no="131"><div class="pc pc131 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg131.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x16 hf y1ab ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0">rooms</span><span class="ls34">.</span><span class="fc0">append(room)</span></span></div><div class="t m0 x15 hf y1ad ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__str__<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0">):</span></span></span></div><div class="t m0 x16 hf y1ae ff7 fs5 fca sc0 ls0 ws146">return <span class="ff9 fc9 ls34">&apos;<span class="ff8 ls0 ws4">{}: {} square foot {}</span>&apos;</span><span class="ff8 fc6 ws13a">.<span class="fc0">format(<span class="fca">self</span></span><span class="ls34">.</span><span class="fc0">name,</span></span></div><div class="t m0 x18 hf y1af ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0">living_space_footage,</span></span></div><div class="t m0 x18 hf y1b0 ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0">style)</span></span></div><div class="t m0 x15 hf y410 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__eq__<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0 ws13b">, other):</span></span></span></div><div class="t m0 x16 hf y411 ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 ws13a">self<span class="fc6 ls34">.</span><span class="fc0 ws71d">living_space_footage <span class="fc6 ws159">== </span><span class="ws13a">other<span class="fc6">.</span>living_space_footage</span></span></span></div><div class="t m0 x15 hf y8c6 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__lt__<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0 ws13b">, other):</span></span></span></div><div class="t m0 x16 hf ybed ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 ws13a">self<span class="fc6 ls34">.</span><span class="fc0 ws71d">living_space_footage <span class="fc6 ls32">&lt;</span><span class="ws13a">other<span class="fc6 ls34">.</span>living_space_footage</span></span></span></div><div class="t m0 x0 h7 y201d ff1 fs3 fc0 sc0 ls0 ws260">这里我们只是给 <span class="ff4 wsb7c">House </span><span class="wsb7d">类定义了两个方法： <span class="ff6 wsb7e">eq<span class="_ _e"> </span>() </span><span class="ls189">和</span><span class="ff6 wsb7e">lt<span class="_ _e"> </span>() </span><span class="wsa0">，它就能支持所有</span></span></div><div class="t m0 x5 h9 y201e ff1 fs3 fc0 sc0 ls0">的比较操作：</div><div class="t m0 x5 h11 y201f ffa fs5 fcd sc0 ls0 ws4"># Build a few houses, and add rooms to them</div><div class="t m0 x5 hf y2020 ff8 fs5 fc0 sc0 ls0 ws159">h1 <span class="fc6 ls33">=</span><span class="ws13a">House(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">h1<span class="ff9 ls34">&apos;</span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">Cape<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 hf y2021 ff8 fs5 fc0 sc0 ls0 ws13a">h1<span class="fc6 ls34">.</span>add_room(Room(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Master Bedroom<span class="ff9 ls34">&apos;</span></span><span class="ls32">,</span><span class="fc7">14</span><span class="ls32">,</span><span class="fc7">21</span>))</div><div class="t m0 x5 hf y2022 ff8 fs5 fc0 sc0 ls0 ws13a">h1<span class="fc6 ls34">.</span>add_room(Room(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Living Room<span class="ff9 ls34">&apos;</span></span><span class="ls32">,</span><span class="fc7">18</span><span class="ls32">,</span><span class="fc7">20</span>))</div><div class="t m0 x5 hf y150e ff8 fs5 fc0 sc0 ls0 ws13a">h1<span class="fc6 ls34">.</span>add_room(Room(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">Kitchen<span class="ff9 ls34">&apos;</span></span><span class="ls32">,</span><span class="fc7">12</span><span class="ls32">,</span><span class="fc7">16</span>))</div><div class="t m0 x5 hf y2023 ff8 fs5 fc0 sc0 ls0 ws13a">h1<span class="fc6 ls34">.</span>add_room(Room(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">Office<span class="ff9 ls34">&apos;</span></span><span class="ls33">,</span><span class="fc7">12</span><span class="ls33">,</span><span class="fc7">12</span>))</div><div class="t m0 x5 hf y2024 ff8 fs5 fc0 sc0 ls0 ws159">h2 <span class="fc6 ls33">=</span><span class="ws13a">House(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">h2<span class="ff9 ls34">&apos;</span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">Ranch<span class="ff9 ws13b">&apos;</span></span>)</span></div><div class="t m0 x5 hf y2025 ff8 fs5 fc0 sc0 ls0 ws13a">h2<span class="fc6 ls34">.</span>add_room(Room(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Master Bedroom<span class="ff9 ls34">&apos;</span></span><span class="ls32">,</span><span class="fc7">14</span><span class="ls32">,</span><span class="fc7">21</span>))</div><div class="t m0 x5 hf y2026 ff8 fs5 fc0 sc0 ls0 ws13a">h2<span class="fc6 ls34">.</span>add_room(Room(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Living Room<span class="ff9 ls34">&apos;</span></span><span class="ls32">,</span><span class="fc7">18</span><span class="ls32">,</span><span class="fc7">20</span>))</div><div class="t m0 x5 hf y2027 ff8 fs5 fc0 sc0 ls0 ws13a">h2<span class="fc6 ls34">.</span>add_room(Room(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">Kitchen<span class="ff9 ls34">&apos;</span></span><span class="ls32">,</span><span class="fc7">12</span><span class="ls32">,</span><span class="fc7">16</span>))</div><div class="t m0 x5 hf y2028 ff8 fs5 fc0 sc0 ls0 ws159">h3 <span class="fc6 ls33">=</span><span class="ws13a">House(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">h3<span class="ff9 ls34">&apos;</span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">Split<span class="ff9 ws13b">&apos;</span></span>)</span></div><div class="t m0 x5 hf y2029 ff8 fs5 fc0 sc0 ls0 ws13a">h3<span class="fc6 ls34">.</span>add_room(Room(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Master Bedroom<span class="ff9 ls34">&apos;</span></span><span class="ls32">,</span><span class="fc7">14</span><span class="ls32">,</span><span class="fc7">21</span>))</div><div class="t m0 x5 hf y202a ff8 fs5 fc0 sc0 ls0 ws13a">h3<span class="fc6 ls34">.</span>add_room(Room(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Living Room<span class="ff9 ls34">&apos;</span></span><span class="ls32">,</span><span class="fc7">18</span><span class="ls32">,</span><span class="fc7">20</span>))</div><div class="t m0 x5 hf ydcc ff8 fs5 fc0 sc0 ls0 ws13a">h3<span class="fc6 ls34">.</span>add_room(Room(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">Office<span class="ff9 ls34">&apos;</span></span><span class="ls33">,</span><span class="fc7">12</span><span class="ls33">,</span><span class="fc7">16</span>))</div><div class="t m0 x5 hf y202b ff8 fs5 fc0 sc0 ls0 ws13a">h3<span class="fc6 ls34">.</span>add_room(Room(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">Kitchen<span class="ff9 ls34">&apos;</span></span><span class="ls32">,</span><span class="fc7">15</span><span class="ls32">,</span><span class="fc7">17</span>))</div><div class="t m0 x5 hf y202c ff8 fs5 fc0 sc0 ls0 ws145">houses <span class="fc6 ls33">=</span><span class="ws13b">[h1, h2, h3]</span></div><div class="t m0 x5 hf y202d ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ws13a">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Is h1 bigger than h2?<span class="ff9 ls34">&apos;</span><span class="fc0">, h1 <span class="fc6 ls32">&gt;</span><span class="ws158">h2) </span><span class="ffa fcd"># prints True</span></span></span></span></div><div class="t m0 x5 hf y202e ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ws13a">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Is h2 smaller than h3?<span class="ff9 ls34">&apos;</span></span><span class="ws13b">, h2 <span class="fc6 ls33">&lt;</span><span class="ws158">h3) </span><span class="ffa fcd"># prints True</span></span></span></div><div class="t m0 x5 hf y202f ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ws13a">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Is h2 greater than or equal to h1?<span class="ff9 ls34">&apos;</span></span><span class="ws13b">, h2 <span class="fc6 ws23d">&gt;= </span><span class="ws158">h1) <span class="ffa fcd ws4"># Prints False</span></span></span></span></div><div class="t m0 x5 hf y2030 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ws13a">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Which one is biggest?<span class="ff9 ls34">&apos;</span></span><span class="ls33">,</span><span class="fca">max</span><span class="ws16e">(houses)) <span class="ffa fcd ws13b"># Prints <span class="ffb">&apos;</span><span class="ws4">h3: 1101-square-foot Split<span class="ffb">&apos;</span></span></span></span></span></div><div class="t m0 x5 hf y2031 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ws13a">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Which is smallest?<span class="ff9 ls34">&apos;</span></span><span class="ls32">,</span><span class="fca">min</span><span class="ws16e">(houses)) <span class="ffa fcd ws13b"># Prints <span class="ffb ls34">&apos;</span><span class="ws4">h2: 846-square-foot Ranch<span class="ffb">&apos;</span></span></span></span></span></div><div class="t m0 x5 he y2032 ff2 fs2 fc4 sc0 ls0 wsadf">10.24.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 y2033 ff1 fs3 fc0 sc0 ls0 wsb7f">其实 <span class="ff6 ws44c">total<span class="_ _7"> </span>ordering </span><span class="ls42 ws186">装饰器也没那么神秘。它就是定义了一个从每个比较支持方</span></div><div class="t m0 x5 h9 y2034 ff1 fs3 fc0 sc0 ls22 wsb80">法到所有需要定义的其他方法的一个映射而已。比如你定义了 <span class="ff6 ls0 ws8e8">le<span class="_ _e"> </span>() <span class="ff1 wsa0">方法，<span class="_ _6"></span>那么<span class="_ _6"></span>它</span></span></div><div class="t m0 x5 h9 y2035 ff1 fs3 fc0 sc0 ls2d ws132">就被用来构建所有其他的需要定义的那些特殊方法。实际上就是在类里面像下面这样<span class="_ _1"></span></div><div class="t m0 x5 h9 y1862 ff1 fs3 fc0 sc0 ls0">定义了一些特殊方法：</div><div class="t m0 x5 hf y2036 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">House<span class="ff8 fc0">:</span></span></div><div class="t m0 x15 hf y2037 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__eq__<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0 ws13b">, other):</span></span></span></div><div class="t m0 x16 h10 y108c ff7 fs5 fca sc0 ls0">pass</div><div class="t m0 x15 hf y2038 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__lt__<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0 ws13b">, other):</span></span></span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 wsae0">10.24.<span class="_ _5"> </span>8.24 <span class="ff1 wsae1">让类支持比较操作 </span>296</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

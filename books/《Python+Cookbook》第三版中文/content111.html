<div id="pf6f" class="pf w0 h0" data-page-no="6f"><div class="pc pc6f w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg6f.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y334 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls34">d<span class="fc6 ls0 ws13a">.<span class="fc0">days</span></span></span></div><div class="t m0 x5 hf y335 ff8 fs5 fc8 sc0 ls0">89</div><div class="t m0 x5 hf y336 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws158">now <span class="fc6 ls32">=</span><span class="ws13a">datetime<span class="fc6 ls34">.</span>today()</span></span></div><div class="t m0 x5 hf y337 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws156">print<span class="ff8 fc0">(now)</span></span></div><div class="t m0 x5 hf yadd ff8 fs5 fc8 sc0 ls0 ws4">2012-12-21 14:54:43.094063</div><div class="t m0 x5 hf yade ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws156">print<span class="ff8 fc0 ws161">(now <span class="fc6 ls33">+</span><span class="ws13a">timedelta(minutes<span class="fc6 ls34">=</span><span class="fc7">10</span>))</span></span></span></div><div class="t m0 x5 hf yadf ff8 fs5 fc8 sc0 ls0 ws4">2012-12-21 15:04:43.094063</div><div class="t m0 x5 hf yc64 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 yc65 ff1 fs3 fc0 sc0 ls0 ws38">在计算的时候，需要注意的是 <span class="ff6 ws1f3">datetime </span>会自动处理闰年。比如：</div><div class="t m0 x5 hf yc66 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">a<span class="fc6 ls33">=</span><span class="ls0 ws13a">datetime(<span class="fc7">2012</span><span class="ls33">,</span><span class="fc7">3</span><span class="ls33">,<span class="fc7 ls34">1</span></span>)</span></span></div><div class="t m0 x5 hf yc67 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">b<span class="fc6 ls33">=</span><span class="ls0 ws13a">datetime(<span class="fc7">2012</span><span class="ls33">,</span><span class="fc7">2</span><span class="ls33">,</span><span class="fc7">28</span>)</span></span></div><div class="t m0 x5 hf yc68 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">a<span class="fc6 ls33">-</span><span class="ls0">b</span></span></div><div class="t m0 x5 hf yc69 ff8 fs5 fc8 sc0 ls0">datetime.timedelta(2)</div><div class="t m0 x5 hf yc6a ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws159">(a <span class="fc6 ls33">-</span><span class="ws13a">b)<span class="fc6 ls34">.</span>days</span></span></div><div class="t m0 x5 hf yc6b ff8 fs5 fc8 sc0 ls0">2</div><div class="t m0 x5 hf yc6c ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">c<span class="fc6 ls33">=</span><span class="ls0 ws13a">datetime(<span class="fc7">2013</span><span class="ls33">,</span><span class="fc7">3</span><span class="ls33">,<span class="fc7 ls34">1</span></span>)</span></span></div><div class="t m0 x5 hf yc6d ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">d<span class="fc6 ls33">=</span><span class="ls0 ws13a">datetime(<span class="fc7">2013</span><span class="ls33">,</span><span class="fc7">2</span><span class="ls33">,</span><span class="fc7">28</span>)</span></span></div><div class="t m0 x5 hf yc6e ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws159">(c <span class="fc6 ls33">-</span><span class="ws13a">d)<span class="fc6 ls34">.</span>days</span></span></div><div class="t m0 x5 hf yc6f ff8 fs5 fc8 sc0 ls0">1</div><div class="t m0 x5 hf yc70 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x5 he yc71 ff2 fs2 fc4 sc0 ls0 ws212">5.12.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 yc72 ff1 fs3 fc0 sc0 ls3d ws50a">对大多数基本的日期和时间处理问题， <span class="ff6 ls0 ws214">datetime </span><span class="ws164">模块以及足够了<span class="_ _1"></span>。如果你需要执</span></div><div class="t m0 x5 h9 yc73 ff1 fs3 fc0 sc0 ls1e ws111">行更加复杂的日期操作<span class="_ _1"></span>，比如处理时区，模糊时间范围<span class="_ _c"></span>，节假日计<span class="_ _6"></span>算等等<span class="_ _1"></span>，可以考虑</div><div class="t m0 x5 h7 yc74 ff1 fs3 fc0 sc0 ls0 ws14">使用 <span class="ff4 fc3 ws50b">dateutil <span class="ff1">模块</span></span></div><div class="t m0 x0 h9 yc75 ff1 fs3 fc0 sc0 ls35 ws50c">许多类似的时间计算可以使用 <span class="ff6 ls0 ws50d">dateutil.relativedelta() <span class="ff1 wsa0">函数代替。但是，有<span class="_ _6"></span>一</span></span></div><div class="t m0 x5 h7 yc76 ff1 fs3 fc0 sc0 ls3d ws50e">点需要注意的就是，它会在处理月份 <span class="ff4 ls0 wsa5">(</span><span class="ws164">还有它们的天数差距<span class="_ _1"></span><span class="ff4 ls69">)<span class="ff1 ls3d">的时候填充间隙。看例子</span></span></span></div><div class="t m0 x5 h9 yc77 ff1 fs3 fc0 sc0 ls0">最清楚：</div><div class="t m0 x5 hf yc78 ff8 fs5 fc0 sc0 ls0 ws4">&gt;&gt;&gt; a = datetime(2012, 9, 23)</div><div class="t m0 x5 hf yc79 ff8 fs5 fc0 sc0 ls0 ws4">&gt;&gt;&gt; a + timedelta(months=1)</div><div class="t m0 x5 hf yc7a ff8 fs5 fc0 sc0 ls0 ws4">Traceback (most recent call last):</div><div class="t m0 x5 hf yc7b ff8 fs5 fc0 sc0 ls0 ws4">File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</div><div class="t m0 x5 hf yc7c ff8 fs5 fc0 sc0 ls0 ws2a3">TypeError: <span class="ff9 ls34">&apos;</span><span class="ws13a">months<span class="ff9 ls33">&apos;</span><span class="ws4">is an invalid keyword argument for this function</span></span></div><div class="t m0 x5 hf y90 ff8 fs5 fc0 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x5 hf yc7d ff8 fs5 fc0 sc0 ls0 ws4">&gt;&gt;&gt; from dateutil.relativedelta import relativedelta</div><div class="t m0 x5 hf yc7e ff8 fs5 fc0 sc0 ls0 ws4">&gt;&gt;&gt; a + relativedelta(months=+1)</div><div class="t m0 x5 hf yc7f ff8 fs5 fc0 sc0 ls0 ws4">datetime.datetime(2012, 10, 23, 0, 0)</div><div class="t m0 x5 hf yc80 ff8 fs5 fc0 sc0 ls0 ws4">&gt;&gt;&gt; a + relativedelta(months=+4)</div><div class="t m0 x5 hf yc81 ff8 fs5 fc0 sc0 ls0 ws4">datetime.datetime(2013, 1, 23, 0, 0)</div><div class="t m0 x5 hf yc82 ff8 fs5 fc0 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x5 hf yc83 ff8 fs5 fc0 sc0 ls0 ws4">&gt;&gt;&gt; # Time between two dates</div><div class="t m0 x5 hf yc84 ff8 fs5 fc0 sc0 ls0 ws4">&gt;&gt;&gt; b = datetime(2012, 12, 21)</div><div class="t m0 x5 hf yc85 ff8 fs5 fc0 sc0 ls5e ws209">&gt;<span class="_ _15"></span>&gt;<span class="_ _15"></span>&gt;d=b-a<span class="_ _15"></span></div><div class="t m0 x5 hf yc86 ff8 fs5 fc0 sc0 ls0 ws4">&gt;&gt;&gt; d</div><div class="t m0 x5 hf yc87 ff8 fs5 fc0 sc0 ls0">datetime.timedelta(89)</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">5.12.<span class="_ _5"> </span>3.12 <span class="ff1 ws509">基本的日期与时间转换 </span>102</div><a class="l" href="http://pypi.python.org/pypi/python-dateutil"><div class="d m1" style="border-style:none;position:absolute;left:149.712000px;bottom:551.130000px;width:67.487000px;height:16.821000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

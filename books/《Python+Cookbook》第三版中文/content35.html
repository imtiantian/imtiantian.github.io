<div id="pf23" class="pf w0 h0" data-page-no="23"><div class="pc pc23 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg23.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 he y137 ff2 fs2 fc4 sc0 ls0 ws212">3.13.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 y236 ff1 fs3 fc0 sc0 ls0 ws244">通过<span class="_ _6"></span>使<span class="_ _6"></span>用 <span class="ff6 ws245">operator </span><span class="ws246">模块<span class="_ _6"></span>的 <span class="ff6 ws247">itemgetter </span><span class="ls22 ws119">函数，可以非常容易的排序这样的数据结<span class="_ _1"></span></span></span></div><div class="t m0 x5 h9 y237 ff1 fs3 fc0 sc0 ls0">构。假设你从数据库中检索出来网站会员信息列表，并且以下列的数据结构返回：</div><div class="t m0 x5 hf y374 ff8 fs5 fc0 sc0 ls0 ws13c">rows <span class="fc6 ls32">=</span>[</div><div class="t m0 x15 hf y375 ff8 fs5 fc0 sc0 ls34">{<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">fname</span><span class="ls34">&apos;</span></span><span class="ls32">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Brian</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">,<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">lname</span><span class="ls34">&apos;</span></span><span class="ls32">:</span></span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Jones</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">,</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">uid</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">:<span class="fc7 ls0 ws13a">1003<span class="fc0">},</span></span></span></div><div class="t m0 x15 hf y376 ff8 fs5 fc0 sc0 ls34">{<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">fname</span><span class="ls34">&apos;</span></span><span class="ls32">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">David</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">,<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">lname</span><span class="ls34">&apos;</span></span><span class="ls32">:</span></span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Beazley</span>&apos;</span><span class="ls32">,</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">uid</span>&apos;</span><span class="ls32">:<span class="fc7 ls0 ws13a">1002<span class="fc0">},</span></span></span></div><div class="t m0 x15 hf y377 ff8 fs5 fc0 sc0 ls34">{<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">fname</span><span class="ls34">&apos;</span></span><span class="ls32">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">John</span>&apos;</span><span class="ls32">,</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">lname</span>&apos;</span><span class="ls33">:<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">Cleese</span>&apos;</span>,</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">uid</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">:<span class="fc7 ls0 ws13a">1001<span class="fc0">},</span></span></span></div><div class="t m0 x15 hf y378 ff8 fs5 fc0 sc0 ls34">{<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">fname</span><span class="ls34">&apos;</span></span><span class="ls32">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Big</span>&apos;</span><span class="ls32">,</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">lname</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Jones</span>&apos;</span><span class="ls32">,</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">uid</span>&apos;</span><span class="ls32">:<span class="fc7 ls0 ws13a">1004<span class="fc0">}</span></span></span></div><div class="t m0 x5 hf y379 ff8 fs5 fc0 sc0 ls0">]</div><div class="t m0 x0 h9 y37a ff1 fs3 fc0 sc0 ls0">根据任意的字典字段来排序输入结果行是很容易实现的，代码示例：</div><div class="t m0 x5 hf y37b ff7 fs5 fca sc0 ls0 ws15a">from <span class="fcc ws248">operator </span><span class="ws146">import <span class="ff8 fc0">itemgetter</span></span></div><div class="t m0 x5 hf y37c ff8 fs5 fc0 sc0 ls0 ws147">rows_by_fname <span class="fc6 ls33">=</span><span class="fca ws13a">sorted</span><span class="ws4">(rows, key<span class="fc6 ls34">=</span><span class="ws13a">itemgetter(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">fname<span class="ff9 ls34">&apos;</span></span>))</span></span></div><div class="t m0 x5 hf y37d ff8 fs5 fc0 sc0 ls0 ws208">rows_by_uid <span class="fc6 ls32">=</span><span class="fca ws13a">sorted</span><span class="ws13b">(rows, key<span class="fc6 ls34">=</span><span class="ws13a">itemgetter(</span><span class="ff9 fc9">&apos;<span class="ff8 ws13a">uid</span><span class="ls34">&apos;</span></span>))</span></div><div class="t m0 x5 hf y37e ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0">(rows_by_fname)</span></div><div class="t m0 x5 hf y37f ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0">(rows_by_uid)</span></div><div class="t m0 x0 h9 y380 ff1 fs3 fc0 sc0 ls0">代码的输出如下：</div><div class="t m0 x5 hf y381 ff8 fs5 fc0 sc0 ls0 ws13a">[{<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">fname<span class="ff9 ls34">&apos;</span></span><span class="ls32">:<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">Big<span class="ff9 ls34">&apos;</span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">uid<span class="ff9 ls34">&apos;</span></span><span class="ls32">:</span><span class="fc7">1004</span><span class="ls33">,</span><span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">lname<span class="ff9 ls34">&apos;</span></span><span class="ls32">:<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">Jones<span class="ff9 ls34">&apos;</span></span>},</div><div class="t m0 x5 hf y382 ff8 fs5 fc0 sc0 ls34">{<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">fname</span><span class="ls34">&apos;</span></span><span class="ls32">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Brian</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">,</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">uid</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">:<span class="fc7 ls0 ws13a">1003</span><span class="ls32">,</span></span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">lname</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Jones</span>&apos;</span><span class="ls0">},</span></div><div class="t m0 x5 hf y383 ff8 fs5 fc0 sc0 ls34">{<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">fname</span><span class="ls34">&apos;</span></span><span class="ls32">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">David</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">,</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">uid</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">:<span class="fc7 ls0 ws13a">1002</span><span class="ls32">,</span></span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">lname</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Beazley</span><span class="ls0 ws13b">&apos;</span></span><span class="ls0">},</span></div><div class="t m0 x5 hf y384 ff8 fs5 fc0 sc0 ls34">{<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">fname</span><span class="ls34">&apos;</span></span><span class="ls32">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">John</span>&apos;</span><span class="ls32">,</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">uid</span>&apos;</span><span class="ls32">:<span class="fc7 ls0 ws13a">1001</span><span class="ls33">,<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">lname</span><span class="ls34">&apos;</span></span></span>:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Cleese</span>&apos;</span><span class="ls0">}]</span></div><div class="t m0 x5 hf y385 ff8 fs5 fc0 sc0 ls0 ws13a">[{<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">fname<span class="ff9 ls34">&apos;</span></span><span class="ls32">:<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">John<span class="ff9 ws13b">&apos;</span></span><span class="ls33">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">uid<span class="ff9 ws13b">&apos;</span></span><span class="ls33">:</span><span class="fc7">1001</span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">lname<span class="ff9 ws13b">&apos;</span></span><span class="ls33">:<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">Cleese<span class="ff9 ls34">&apos;</span></span>},</div><div class="t m0 x5 hf y386 ff8 fs5 fc0 sc0 ls34">{<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">fname</span><span class="ls34">&apos;</span></span><span class="ls32">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">David</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">,</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">uid</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">:<span class="fc7 ls0 ws13a">1002</span><span class="ls32">,</span></span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">lname</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Beazley</span><span class="ls0 ws13b">&apos;</span></span><span class="ls0">},</span></div><div class="t m0 x5 hf y387 ff8 fs5 fc0 sc0 ls34">{<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">fname</span><span class="ls34">&apos;</span></span><span class="ls32">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Brian</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">,</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">uid</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">:<span class="fc7 ls0 ws13a">1003</span><span class="ls32">,</span></span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">lname</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Jones</span>&apos;</span><span class="ls0">},</span></div><div class="t m0 x5 hf y388 ff8 fs5 fc0 sc0 ls34">{<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">fname</span><span class="ls34">&apos;</span></span><span class="ls32">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Big</span>&apos;</span><span class="ls32">,</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">uid</span>&apos;</span><span class="ls32">:<span class="fc7 ls0 ws13a">1004</span><span class="ls33">,</span></span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">lname</span>&apos;</span><span class="ls32">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Jones</span><span class="ls0 ws13b">&apos;</span></span><span class="ls0">}]</span></div><div class="t m0 x0 h7 y389 ff6 fs3 fc0 sc0 ls0 ws1dc">itemgetter() <span class="ff1 ws38">函数也支持多个 <span class="ff4 wsa5">k<span class="_ _1"></span>eys<span class="ff1">，比如下面的代码</span></span></span></div><div class="t m0 x5 hf y38a ff8 fs5 fc0 sc0 ls0 ws169">rows_by_lfname <span class="fc6 ls32">=</span><span class="fca ws13a">sorted</span><span class="ws13b">(rows, key<span class="fc6 ls34">=</span><span class="ws13a">itemgetter(</span><span class="ff9 fc9">&apos;<span class="ff8 ws13a">lname</span><span class="ls34">&apos;</span></span><span class="ls34">,</span><span class="ff9 fc9">&apos;<span class="ff8 ws13a">fname</span><span class="ls34">&apos;</span></span>))</span></div><div class="t m0 x5 hf y38b ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0">(rows_by_lfname)</span></div><div class="t m0 x0 h9 y38c ff1 fs3 fc0 sc0 ls0">会产生如下的输出：</div><div class="t m0 x5 hf y38d ff8 fs5 fc0 sc0 ls0 ws13a">[{<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">fname<span class="ff9 ls34">&apos;</span></span><span class="ls32">:<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">David<span class="ff9 ls34">&apos;</span></span><span class="ls33">,</span><span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">uid<span class="ff9 ls34">&apos;</span></span><span class="ls33">:</span><span class="fc7">1002</span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">lname<span class="ff9 ls34">&apos;</span></span><span class="ls33">:</span><span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">Beazley<span class="ff9 ls34">&apos;</span></span>},</div><div class="t m0 x5 hf y38e ff8 fs5 fc0 sc0 ls34">{<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">fname</span><span class="ls34">&apos;</span></span><span class="ls32">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">John</span>&apos;</span><span class="ls32">,</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">uid</span>&apos;</span><span class="ls32">:<span class="fc7 ls0 ws13a">1001</span><span class="ls33">,<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">lname</span><span class="ls34">&apos;</span></span></span>:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Cleese</span>&apos;</span><span class="ls0">},</span></div><div class="t m0 x5 hf y38f ff8 fs5 fc0 sc0 ls34">{<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">fname</span><span class="ls34">&apos;</span></span><span class="ls32">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Big</span>&apos;</span><span class="ls32">,</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">uid</span>&apos;</span><span class="ls32">:<span class="fc7 ls0 ws13a">1004</span><span class="ls33">,</span></span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">lname</span>&apos;</span><span class="ls32">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Jones</span><span class="ls0 ws13b">&apos;</span></span><span class="ls0">},</span></div><div class="t m0 x5 hf y390 ff8 fs5 fc0 sc0 ls34">{<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">fname</span><span class="ls34">&apos;</span></span><span class="ls32">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Brian</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">,</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">uid</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">:<span class="fc7 ls0 ws13a">1003</span><span class="ls32">,</span></span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">lname</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">:</span><span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Jones</span>&apos;</span><span class="ls0">}]</span></div><div class="t m0 x5 he y391 ff2 fs2 fc4 sc0 ls0 ws212">3.13.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 y32e ff1 fs3 fc0 sc0 ls0 ws249">在上<span class="_ _6"></span>面<span class="_ _6"></span>例<span class="_ _6"></span>子中， <span class="ff6 ws24a">rows </span><span class="ls30 ws24b">被传递给接受一个关键字参数的 </span><span class="ff6 ws24c">sorted() </span><span class="wsa0">内<span class="_ _6"></span>置<span class="_ _6"></span>函<span class="_ _6"></span>数。这<span class="_ _6"></span>个</span></div><div class="t m0 x5 h9 y392 ff1 fs3 fc0 sc0 ls0 ws24d">参数是 <span class="ff6 ws24e">callable </span><span class="ws24f">类型，<span class="_ _1"></span>并且从 <span class="ff6 ws250">rows </span><span class="wsa0">中接受一个单一元素，<span class="_ _1"></span>然后返回被用来排序的值。</span></span></div><div class="t m0 x5 h9 y393 ff6 fs3 fc0 sc0 ls0 ws1dc">itemgetter() <span class="ff1 ws14">函数就是负责创建这个 </span><span class="ws1f3">callable <span class="ff1">对象的。</span></span></div><div class="t m0 x0 h7 y394 ff6 fs3 fc0 sc0 ls0 ws251">operator.itemgetter() <span class="ff1 ws252">函数<span class="_ _6"></span>有一<span class="_ _6"></span>个被 <span class="ff4 ws253">rows </span><span class="wsa0">中的<span class="_ _6"></span>记录<span class="_ _6"></span>用来<span class="_ _6"></span>查找<span class="_ _6"></span>值的<span class="_ _6"></span>索引<span class="_ _6"></span>参数。<span class="_ _6"></span>可</span></span></div><div class="t m0 x5 h9 y395 ff1 fs3 fc0 sc0 ls1f ws254">以是一个字典键名称，一个整形值或者任何能够传入一个对象的 <span class="ff6 ls0 ws255">getitem<span class="_ _e"> </span>() <span class="ff1 wsa0">方法的</span></span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">3.13.<span class="_ _5"> </span>1.13 <span class="ff1 ws243">通过某个关键字排序一个字典列表 </span>26</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

<div id="pf85" class="pf w0 h0" data-page-no="85"><div class="pc pc85 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg85.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 he y137 ff2 fs2 fc4 sc0 ls0 ws135">6.9.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 y236 ff1 fs3 fc0 sc0 ls14 ws5be">这一小节我们向你展示的仅仅是 <span class="ff6 ls0 ws28c">itertools </span><span class="ws174">模块的一部分功能<span class="_ _1"></span>。尽管你也可以自</span></div><div class="t m0 x5 h9 y237 ff1 fs3 fc0 sc0 ls13 wse5">己手动实现排列组合算法<span class="_ _1"></span>，但是这样做得要花点脑力。当我们碰到看上去有些复杂的<span class="_ _c"></span></div><div class="t m0 x5 h7 y238 ff1 fs3 fc0 sc0 ls0 ws5bf">迭代<span class="_ _6"></span>问<span class="_ _6"></span>题时，<span class="_ _6"></span>最<span class="_ _6"></span>好<span class="_ _6"></span>可以<span class="_ _6"></span>先<span class="_ _6"></span>去看<span class="_ _6"></span>看 <span class="ff4 ws5c0">iterto<span class="_ _6"></span>ols </span><span class="wsa0">模<span class="_ _6"></span>块。如<span class="_ _6"></span>果<span class="_ _6"></span>这个<span class="_ _6"></span>问<span class="_ _6"></span>题很<span class="_ _6"></span>普<span class="_ _6"></span>遍，那<span class="_ _6"></span>么<span class="_ _6"></span>很<span class="_ _6"></span>有可<span class="_ _6"></span>能</span></div><div class="t m0 x5 h9 yea6 ff1 fs3 fc0 sc0 ls0">会在里面找到解决方案！</div><div class="t m0 x5 hd yea7 ff2 fs4 fc4 sc0 ls0 ws211">6.10<span class="_ _e"> </span>4.10 <span class="ff1">序列上索引值迭代</span></div><div class="t m0 x5 he yea8 ff2 fs2 fc4 sc0 ls0 ws212">6.10.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 yea9 ff1 fs3 fc0 sc0 ls0">你想在迭代一个序列的同时跟踪正在被处理的元素索引。</div><div class="t m0 x5 he yeaa ff2 fs2 fc4 sc0 ls0 ws212">6.10.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 yeab ff1 fs3 fc0 sc0 ls0 ws38">内置的 <span class="ff6 ws1e2">enumerate() </span>函数可以很好的解决这个问题：</div><div class="t m0 x5 hf yeac ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws155">my_list <span class="fc6 ls32">=</span><span class="ls34">[<span class="ff9 fc9">&apos;</span></span><span class="fc9 ws13a">a<span class="ff9 ls34">&apos;</span></span><span class="ls33">,</span><span class="ff9 fc9 ws13b">&apos;<span class="ff8 ls34">b<span class="ff9">&apos;</span></span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;<span class="ff8">c</span><span class="ls0 ws13b">&apos;</span></span></span>]</span></div><div class="t m0 x5 hf yead ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">for <span class="ff8 fc0 ws13b">idx, val </span><span class="ws160">in <span class="ff8 ws13a">enumerate<span class="fc0">(my_list):</span></span></span></span></div><div class="t m0 x5 hf yeae ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws156">print<span class="ff8 fc0 ws4">(idx, val)</span></span></div><div class="t m0 x5 h10 yeaf ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf yd9e ff8 fs5 fc8 sc0 ls0 ws4">0 a</div><div class="t m0 x5 hf yeb0 ff8 fs5 fc8 sc0 ls0 ws4">1 b</div><div class="t m0 x5 hf yeb1 ff8 fs5 fc8 sc0 ls0 ws4">2 c</div><div class="t m0 x0 h7 yeb2 ff1 fs3 fc0 sc0 ls0 ws38">为了按传统行号输出 <span class="ff4 wsa5">(</span><span class="ws63">行号从 <span class="ff4 lsc">1</span><span class="wsa0">开始<span class="ff4 ls1b">)</span>，你可以传递一个开始参数：</span></span></div><div class="t m0 x5 hf yeb3 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws155">my_list <span class="fc6 ls32">=</span><span class="ls34">[<span class="ff9 fc9">&apos;</span></span><span class="fc9 ws13a">a<span class="ff9 ls34">&apos;</span></span><span class="ls33">,</span><span class="ff9 fc9 ws13b">&apos;<span class="ff8 ls34">b<span class="ff9">&apos;</span></span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;<span class="ff8">c</span><span class="ls0 ws13b">&apos;</span></span></span>]</span></div><div class="t m0 x5 hf yeb4 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">for <span class="ff8 fc0 ws13b">idx, val </span><span class="ws160">in <span class="ff8 ws13a">enumerate<span class="fc0 ws16e">(my_list, <span class="fc7 ls34">1</span>):</span></span></span></span></div><div class="t m0 x5 hf yeb5 ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws156">print<span class="ff8 fc0 ws4">(idx, val)</span></span></div><div class="t m0 x5 h10 yeb6 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf yeb7 ff8 fs5 fc8 sc0 ls0 ws4">1 a</div><div class="t m0 x5 hf yeb8 ff8 fs5 fc8 sc0 ls0 ws4">2 b</div><div class="t m0 x5 hf yeb9 ff8 fs5 fc8 sc0 ls0 ws4">3 c</div><div class="t m0 x0 h9 yeba ff1 fs3 fc0 sc0 ls0">这种情况在你遍历文件时想在错误消息中使用行号定位时候非常有用：</div><div class="t m0 x5 hf yebb ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">parse_data<span class="fc0">(filename):</span></span></div><div class="t m0 x15 hf yebc ff7 fs5 fca sc0 ls0 ws15a">with <span class="ff8 ws13a">open<span class="fc0 ws2a3">(filename, <span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">rt<span class="ff9 ws13b">&apos;</span><span class="fc0 ls33">)</span></span></span><span class="ws157">as <span class="ff8 fc0">f:</span></span></div><div class="t m0 x16 hf yebd ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws13b">lineno, line </span><span class="ws157">in <span class="ff8 ws13a">enumerate<span class="fc0 ws158">(f, <span class="fc7 ls34">1</span>):</span></span></span></div><div class="t m0 x17 hf y6d0 ff8 fs5 fc0 sc0 ls0 ws145">fields <span class="fc6 ls32">=</span><span class="ws13a">line<span class="fc6 ls34">.</span>split()</span></div><div class="t m0 x17 hf yebe ff7 fs5 fca sc0 ls0 ws156">try<span class="ff8 fc0">:</span></div><div class="t m0 x18 hf yebf ff8 fs5 fc0 sc0 ls0 ws15f">count <span class="fc6 ls32">=</span><span class="fca ws13a">int<span class="fc0">(fields[<span class="fc7 ls34">1</span>])</span></span></div><div class="t m0 x18 hf yec0 ff8 fs5 fc6 sc0 ls0 ws13a">...</div><div class="t m0 x17 hf yec1 ff7 fs5 fca sc0 ls0 ws146">except <span class="ff8 ws2a3">ValueError </span><span class="ws157">as <span class="ff8 fc0">e:</span></span></div><div class="t m0 x18 hf yec2 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws4">Line {}: Parse error: {}</span>&apos;</span><span class="fc6">.</span><span class="ls0 ws13b">format(lineno, e))</span></span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">6.10.<span class="_ _5"> </span>4.10 <span class="ff1 ws533">序列上索引值迭代 </span>124</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

<div id="pfe2" class="pf w0 h0" data-page-no="e2"><div class="pc pce2 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bge2.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x0 h9 y2a ff1 fs3 fc0 sc0 ls3a ws153">如果你想让某个匿名函数在定义时就捕获到值，可以将那个参数值定义成默认参数</div><div class="t m0 x5 h9 y2b ff1 fs3 fc0 sc0 ls0">即可，就像下面这样：</div><div class="t m0 x5 hf y1898 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">x<span class="fc6 ls33">=<span class="fc7 ls0">10</span></span></span></div><div class="t m0 x5 hf y1899 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">a<span class="fc6 ls33">=</span></span><span class="fca ws146">lambda <span class="ff8 fc0 ws13b">y, x<span class="fc6 ls34">=</span>x: x <span class="fc6 ls33">+</span>y</span></span></div><div class="t m0 x5 hf y189a ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">x<span class="fc6 ls33">=<span class="fc7 ls0">20</span></span></span></div><div class="t m0 x5 hf y189b ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">b<span class="fc6 ls33">=</span></span><span class="fca ws146">lambda <span class="ff8 fc0 ws13b">y, x<span class="fc6 ls34">=</span>x: x <span class="fc6 ls33">+</span>y</span></span></div><div class="t m0 x5 hf y189c ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">a(<span class="fc7">10</span>)</span></div><div class="t m0 x5 hf y189d ff8 fs5 fc8 sc0 ls0">20</div><div class="t m0 x5 hf y189e ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">b(<span class="fc7">10</span>)</span></div><div class="t m0 x5 hf y189f ff8 fs5 fc8 sc0 ls0">30</div><div class="t m0 x5 hf y18a0 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x5 he y18a1 ff2 fs2 fc4 sc0 ls0 ws135">9.7.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 y1783 ff1 fs3 fc0 sc0 ls6d ws2a0">在这里列出来的问题是新手很容易犯的错误<span class="_ _8"></span>，有些新手可能会不恰当的使用<span class="_ _8"></span></div><div class="t m0 x5 h7 y18a2 ff4 fs3 fc0 sc0 ls0 ws94c">lam<span class="_ _1"></span>b<span class="_ _6"></span>da <span class="ff1 ws94d">表<span class="_ _12"></span>达<span class="_ _0"></span>式。<span class="_ _12"></span>比<span class="_ _12"></span>如，<span class="_ _0"></span>通<span class="_ _12"></span>过<span class="_ _12"></span>在<span class="_ _0"></span>一<span class="_ _12"></span>个<span class="_ _12"></span>循<span class="_ _12"></span>环<span class="_ _0"></span>或<span class="_ _12"></span>列<span class="_ _12"></span>表<span class="_ _0"></span>推<span class="_ _12"></span>导<span class="_ _12"></span>中<span class="_ _0"></span>创<span class="_ _12"></span>建<span class="_ _12"></span>一<span class="_ _0"></span>个 </span>lambda <span class="ff1 wsa0">表<span class="_ _12"></span>达<span class="_ _12"></span>式<span class="_ _0"></span>列</span></div><div class="t m0 x5 h9 y18a3 ff1 fs3 fc0 sc0 ls0">表，并期望函数能在定义时就记住每次的迭代值。例如：</div><div class="t m0 x5 hf y18a4 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws15f">funcs <span class="fc6 ls33">=</span><span class="ws13a">[</span></span><span class="fca ws1ff">lambda <span class="ff8 fc0 ws13b">x: x<span class="fc6 ls34">+</span><span class="ls33">n</span></span><span class="ws139">for <span class="ff8 fc0 ls32">n</span><span class="ws157">in <span class="ff8 ws13a">range<span class="fc0 ls34">(</span><span class="fc7">5<span class="fc0">)]</span></span></span></span></span></span></div><div class="t m0 x5 hf y18a5 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">for <span class="ff8 fc0 ls32">f</span><span class="ws157">in <span class="ff8 fc0">funcs:</span></span></span></div><div class="t m0 x5 hf y18a6 ff7 fs5 fc5 sc0 ls0 ws139">... <span class="fca ws156">print<span class="ff8 fc0 ws13a">(f(<span class="fc7">0</span>))</span></span></div><div class="t m0 x5 h10 y18a7 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf y18a8 ff8 fs5 fc8 sc0 ls0">4</div><div class="t m0 x5 hf y18a9 ff8 fs5 fc8 sc0 ls0">4</div><div class="t m0 x5 hf y18aa ff8 fs5 fc8 sc0 ls0">4</div><div class="t m0 x5 hf y18ab ff8 fs5 fc8 sc0 ls0">4</div><div class="t m0 x5 hf y18ac ff8 fs5 fc8 sc0 ls0">4</div><div class="t m0 x5 hf y18ad ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y18ae ff1 fs3 fc0 sc0 ls14 ws94e">但是实际效果是运行是 <span class="ff4 ls156">n</span><span class="ws174">的值为迭代的最后一个值<span class="_ _c"></span>。现在我们用另一种方式修改</span></div><div class="t m0 x5 h9 y18af ff1 fs3 fc0 sc0 ls0">一下：</div><div class="t m0 x5 hf y18b0 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws15f">funcs <span class="fc6 ls33">=</span><span class="ws13a">[</span></span><span class="fca ws1ff">lambda <span class="ff8 fc0 ws13b">x, n<span class="fc6 ls34">=</span><span class="ws4">n: x<span class="fc6 ls34">+</span><span class="ls32">n</span></span></span><span class="ws139">for <span class="ff8 fc0 ls33">n</span><span class="ws157">in <span class="ff8 ws13a">range<span class="fc0 ls34">(<span class="fc7">5</span><span class="ls0">)]</span></span></span></span></span></span></div><div class="t m0 x5 hf y18b1 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">for <span class="ff8 fc0 ls32">f</span><span class="ws157">in <span class="ff8 fc0">funcs:</span></span></span></div><div class="t m0 x5 hf y18b2 ff7 fs5 fc5 sc0 ls0 ws139">... <span class="fca ws156">print<span class="ff8 fc0 ws13a">(f(<span class="fc7">0</span>))</span></span></div><div class="t m0 x5 h10 y18b3 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf y18b4 ff8 fs5 fc8 sc0 ls0">0</div><div class="t m0 x5 hf y18b5 ff8 fs5 fc8 sc0 ls0">1</div><div class="t m0 x5 hf y18b6 ff8 fs5 fc8 sc0 ls0">2</div><div class="t m0 x5 hf y18b7 ff8 fs5 fc8 sc0 ls0">3</div><div class="t m0 x5 hf y18b8 ff8 fs5 fc8 sc0 ls0">4</div><div class="t m0 x5 hf y18b9 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y18ba ff1 fs3 fc0 sc0 ls0 wsa0">通过使用函数默认值参数形式，<span class="ff4 ws93a">lam<span class="_ _1"></span>b<span class="_ _6"></span>da <span class="ff1">函数在定义时就能绑定到值。</span></span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">9.7.<span class="_ _5"> </span>7.7 <span class="ff1 ws666">匿名函数捕获变量值 </span>217</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

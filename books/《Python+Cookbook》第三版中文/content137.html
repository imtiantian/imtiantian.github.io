<div id="pf89" class="pf w0 h0" data-page-no="89"><div class="pc pc89 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg89.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hd y112 ff2 fs4 fc4 sc0 ls0 ws211">6.12<span class="_ _e"> </span>4.12 <span class="ff1">不同集合上元素的迭代</span></div><div class="t m0 x5 he y113 ff2 fs2 fc4 sc0 ls0 ws212">6.12.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 y114 ff1 fs3 fc0 sc0 ls3a ws153">你想在多个对象执行相同的操作，但是这些对象在不同的容器中，你希望代码在不</div><div class="t m0 x5 h9 y115 ff1 fs3 fc0 sc0 ls0">失可读性的情况下避免写重复的循环。</div><div class="t m0 x5 he y116 ff2 fs2 fc4 sc0 ls0 ws212">6.12.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 yf10 ff6 fs3 fc0 sc0 ls0 ws5d8">itertools.chain() <span class="ff1">方法可以用来简化这个任务。它接受一个可迭代对象列表作为</span></div><div class="t m0 x5 h9 yf11 ff1 fs3 fc0 sc0 ls1e ws111">输入<span class="_ _1"></span>，并返回一个迭代器，有效的屏蔽掉在多个容器中迭代细节<span class="_ _c"></span>。<span class="_ _6"></span>为了演示清楚<span class="_ _1"></span>，考</div><div class="t m0 x5 h9 yf12 ff1 fs3 fc0 sc0 ls0">虑下面这个例子：</div><div class="t m0 x5 hf yf13 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws15a">from <span class="fcc ws285">itertools </span><span class="ws146">import <span class="ff8 fc0">chain</span></span></span></div><div class="t m0 x5 hf yf14 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">a<span class="fc6 ls33">=</span><span class="ls34">[<span class="fc7 ls0 ws13a">1</span><span class="ls33">,<span class="fc7 ls0 ws13a">2</span>,</span><span class="fc7">3</span></span>,<span class="fc7 ls34">4</span><span class="ls0">]</span></span></div><div class="t m0 x5 hf yf15 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">b<span class="fc6 ls33">=</span><span class="ls34">[</span></span><span class="ff9 fc9 ws13b">&apos;<span class="ff8 ls34">x<span class="ff9">&apos;</span><span class="fc0 ls32">,</span><span class="ff9">&apos;</span>y</span>&apos;<span class="ff8 fc0 ls33">,</span><span class="ls34">&apos;</span><span class="ff8 ws13a">z</span><span class="ls34">&apos;</span><span class="ff8 fc0">]</span></span></div><div class="t m0 x5 hf yf16 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">for <span class="ff8 fc0 ls32">x</span><span class="ws157">in <span class="ff8 fc0 ws4">chain(a, b):</span></span></span></div><div class="t m0 x5 hf yf17 ff7 fs5 fc5 sc0 ls0 ws139">... <span class="fca ws156">print<span class="ff8 fc0">(x)</span></span></div><div class="t m0 x5 h10 yf18 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf yf19 ff8 fs5 fc8 sc0 ls0">1</div><div class="t m0 x5 hf yf1a ff8 fs5 fc8 sc0 ls0">2</div><div class="t m0 x5 hf yf1b ff8 fs5 fc8 sc0 ls0">3</div><div class="t m0 x5 hf yf1c ff8 fs5 fc8 sc0 ls0">4</div><div class="t m0 x5 hf yf1d ff8 fs5 fc8 sc0 ls0">x</div><div class="t m0 x5 hf yf1e ff8 fs5 fc8 sc0 ls0">y</div><div class="t m0 x5 hf yf1f ff8 fs5 fc8 sc0 ls0">z</div><div class="t m0 x5 hf yf20 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 yf21 ff1 fs3 fc0 sc0 ls0 ws5d9">使<span class="_ _6"></span>用 <span class="ff6 ws575">chain() </span><span class="ls48 ws242">的一个常见场景是当你想对不同的集合中所有元素执行某些操作的</span></div><div class="t m0 x5 h9 yf22 ff1 fs3 fc0 sc0 ls0">时候。比如：</div><div class="t m0 x5 h11 yf23 ffa fs5 fcd sc0 ls0 ws4"># Various working sets of items</div><div class="t m0 x5 hf yf24 ff8 fs5 fc0 sc0 ls0 ws150">active_items <span class="fc6 ls33">=</span><span class="fca ws13a">set</span>()</div><div class="t m0 x5 hf yf25 ff8 fs5 fc0 sc0 ls0 ws169">inactive_items <span class="fc6 ls32">=</span><span class="fca ws13a">set</span>()</div><div class="t m0 x5 h11 yf26 ffa fs5 fcd sc0 ls0 ws4"># Iterate over all items</div><div class="t m0 x5 hf yf27 ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws13c">item </span><span class="ws157">in <span class="ff8 fc0 ws13b">chain(active_items, inactive_items):</span></span></div><div class="t m0 x15 h11 yf28 ffa fs5 fcd sc0 ls0 ws13b"># Process item</div><div class="t m0 x0 h9 yf29 ff1 fs3 fc0 sc0 ls0">这种解决方案要比像下面这样使用两个单独的循环更加优雅，</div><div class="t m0 x5 hf yf2a ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws13c">item </span><span class="ws157">in <span class="ff8 fc0">active_items:</span></span></div><div class="t m0 x15 h11 yf2b ffa fs5 fcd sc0 ls0 ws13b"># Process item</div><div class="t m0 x15 hf yf2c ff8 fs5 fc6 sc0 ls0 ws13a">...</div><div class="t m0 x5 hf yf2d ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws13c">item </span><span class="ws157">in <span class="ff8 fc0">inactive_items:</span></span></div><div class="t m0 x15 h11 yf2e ffa fs5 fcd sc0 ls0 ws13b"># Process item</div><div class="t m0 x15 hf yf2f ff8 fs5 fc6 sc0 ls0 ws13a">...</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">6.12.<span class="_ _5"> </span>4.12 <span class="ff1 ws509">不同集合上元素的迭代 </span>128</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

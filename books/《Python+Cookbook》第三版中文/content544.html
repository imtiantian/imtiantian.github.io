<div id="pf220" class="pf w0 h0" data-page-no="220"><div class="pc pc220 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg220.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 h11 y334 ffa fs5 fcd sc0 ls0 ws4"># sample.py</div><div class="t m0 x5 hf y336 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">func<span class="fc0">(n):</span></span></div><div class="t m0 x15 hf y337 ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 fc0 ls32">n<span class="fc6 ls33">+<span class="fc7 ls0">10</span></span></span></div><div class="t m0 x5 hf yade ff8 fs5 fc0 sc0 ls0 ws13a">func(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">Hello<span class="ff9 ls34">&apos;</span></span>)</div><div class="t m0 x0 h9 y34ce ff1 fs3 fc0 sc0 ls0 wsc">运行 <span class="ff6 ws4">python3 -i sample.py<span class="_ _16"> </span></span>会有类似如下的输出：</div><div class="t m0 x5 hf y34cf ff8 fs5 fc0 sc0 ls0 ws4">bash % python3 -i sample.py</div><div class="t m0 x5 hf y34d0 ff8 fs5 fc0 sc0 ls0 ws4">Traceback (most recent call last):</div><div class="t m0 x19 hf y34d1 ff8 fs5 fc0 sc0 ls0 ws4">File &quot;sample.py&quot;, line 6, in &lt;module&gt;</div><div class="t m0 x15 hf y34d2 ff8 fs5 fc0 sc0 ls0 ws13a">func(<span class="ff9 ws13b">&apos;</span>Hello<span class="ff9 ls34">&apos;</span>)</div><div class="t m0 x19 hf y34d3 ff8 fs5 fc0 sc0 ls0 ws4">File &quot;sample.py&quot;, line 4, in func</div><div class="t m0 x15 hf y34d4 ff8 fs5 fc0 sc0 ls0 ws4">return n + 10</div><div class="t m0 x5 hf y34bc ff8 fs5 fc0 sc0 ls0 ws4">TypeError: Can<span class="ff9 ls34">&apos;</span><span class="ws13b">t convert <span class="ff9 ls34">&apos;</span><span class="ws13a">int<span class="ff9 ls33">&apos;</span></span></span>object to str implicitly</div><div class="t m0 x5 hf y34d5 ff8 fs5 fc0 sc0 ls0 ws4">&gt;&gt;&gt; func(10)</div><div class="t m0 x5 hf y1880 ff8 fs5 fc0 sc0 ls0">20</div><div class="t m0 x5 hf y34d6 ff8 fs5 fc0 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y34d7 ff1 fs3 fc0 sc0 ls0 ws14">如果你看不到上面这样的，可以在程序奔溃后打开 <span class="ff4 ws5c">Python </span>的调试器。例如：</div><div class="t m0 x5 h10 y34d8 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">pdb</span></span></div><div class="t m0 x5 hf yca9 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">pdb<span class="fc6 ls34">.</span>pm()</span></div><div class="t m0 x5 hf y34d9 ff8 fs5 fc8 sc0 ls0 ws4">&gt; sample.py(4)func()</div><div class="t m0 x5 hf y33b4 ff8 fs5 fc8 sc0 ls0 ws4">-&gt; return n + 10</div><div class="t m0 x5 hf y34da ff8 fs5 fc8 sc0 ls0 ws4">(Pdb) w</div><div class="t m0 x19 hf y34db ff8 fs5 fc8 sc0 ls0">sample.py(6)&lt;module&gt;()</div><div class="t m0 x5 hf y34dc ff8 fs5 fc8 sc0 ls0 ws4">-&gt; func(<span class="ff9 ls34">&apos;</span><span class="ws13a">Hello<span class="ff9 ls34">&apos;</span>)</span></div><div class="t m0 x5 hf y34dd ff8 fs5 fc8 sc0 ls0 ws4">&gt; sample.py(4)func()</div><div class="t m0 x5 hf y34de ff8 fs5 fc8 sc0 ls0 ws4">-&gt; return n + 10</div><div class="t m0 x5 hf y34df ff8 fs5 fc8 sc0 ls0 ws4">(Pdb) print n</div><div class="t m0 x5 hf y34e0 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">Hello<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y34e1 ff8 fs5 fc8 sc0 ls0 ws4">(Pdb) q</div><div class="t m0 x5 hf y34e2 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y34e3 ff1 fs3 fc0 sc0 ls3a ws32c">如果你的代码所在的环境很难获取交互 <span class="ff4 ls0 wsa5">shell<span class="ff1 wsa0">（比如在某个服<span class="_ _6"></span>务器上面）<span class="_ _f"></span>，通常可以</span></span></div><div class="t m0 x5 h9 y34e4 ff1 fs3 fc0 sc0 ls0">捕获异常后自己打印跟踪信息。例如：</div><div class="t m0 x5 h10 y34e5 ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc">traceback</span></div><div class="t m0 x5 h10 y34e6 ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc">sys</span></div><div class="t m0 x5 hf y34e7 ff7 fs5 fca sc0 ls0 ws156">try<span class="ff8 fc0">:</span></div><div class="t m0 x15 hf y34e8 ff8 fs5 fc0 sc0 ls0">func(arg)</div><div class="t m0 x5 hf y34e9 ff7 fs5 fca sc0 ls0 ws156">except<span class="ff8 fc0">:</span></div><div class="t m0 x15 hf y31b1 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ws13a">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">**** AN ERROR OCCURRED ****<span class="ff9 ws13b">&apos;</span></span>)</span></div><div class="t m0 x15 hf y34ea ff8 fs5 fc0 sc0 ls0 ws13a">traceback<span class="fc6 ls34">.</span>print_exc(<span class="fca">file<span class="fc6 ls34">=</span></span>sys<span class="fc6 ls34">.</span>stderr)</div><div class="t m0 x0 h9 y34eb ff1 fs3 fc0 sc0 ls3a ws153">要是你的程序没有奔溃，而只是产生了一些你看不懂的结果，你在感兴趣的地方插</div><div class="t m0 x5 h9 y34ec ff1 fs3 fc0 sc0 ls0 wsa4d">入一<span class="_ _6"></span>下 <span class="ff6 wsb6e">print() </span><span class="ls12 wse4">语句也是个不错的选择。不过<span class="_ _c"></span>，要是你打算这样做，有一些小技巧可</span></div><div class="t m0 x5 h9 y34ed ff1 fs3 fc0 sc0 ls0 wsa0">以<span class="_ _6"></span>帮<span class="_ _6"></span>助<span class="_ _6"></span>你。<span class="_ _6"></span>首<span class="_ _6"></span>先，<span class="_ _0"></span><span class="ff6 ws12fa">traceback.print stack() </span><span class="ls36 ws14a">函数会你程序运行到那个点的时候创建<span class="_ _1"></span></span></div><div class="t m0 x5 h9 y34ee ff1 fs3 fc0 sc0 ls0">一个跟踪栈。例如：</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 wsd97">16.12.<span class="_ _36"> </span>14.12 <span class="ff1 wse2d">调试基本的程序崩溃错误 </span>535</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

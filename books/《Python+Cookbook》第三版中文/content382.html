<div id="pf17e" class="pf w0 h0" data-page-no="17e"><div class="pc pc17e w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg17e.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x0 h9 y2a ff1 fs3 fc0 sc0 ls0">现在回到交互式会话，重新加载模块，尝试下这个实验：</div><div class="t m0 x5 h10 y24ce ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">imp</span></span></div><div class="t m0 x5 hf y24cf ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">imp<span class="fc6 ls34">.</span>reload(spam)</span></div><div class="t m0 x5 hf y275a ff8 fs5 fc8 sc0 ls0 ws155">&lt;module <span class="ff9 ls34">&apos;</span><span class="ws13a">spam<span class="ff9 ls33">&apos;</span><span class="ws13c">from <span class="ff9 ws13b">&apos;</span></span>./spam.py<span class="ff9 ls34">&apos;</span>&gt;</span></div><div class="t m0 x5 hf y275b ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">spam<span class="fc6 ls34">.</span>bar()</span></div><div class="t m0 x5 hf y275c ff8 fs5 fc8 sc0 ls0">bar</div><div class="t m0 x5 hf y275d ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws145">grok() <span class="ffa fcd ws4"># Notice old output</span></span></div><div class="t m0 x5 hf y275e ff8 fs5 fc8 sc0 ls0">grok</div><div class="t m0 x5 hf y275f ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">spam<span class="fc6 ls34">.</span><span class="ws145">grok() <span class="ffa fcd ws4"># Notice new output</span></span></span></div><div class="t m0 x5 hf y2760 ff8 fs5 fc8 sc0 ls0 ws4">New grok</div><div class="t m0 x5 hf y2761 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y2762 ff1 fs3 fc0 sc0 ls0 wsd54">在这<span class="_ _6"></span>个<span class="_ _6"></span>例<span class="_ _6"></span>子中，<span class="_ _6"></span>你<span class="_ _6"></span>看<span class="_ _6"></span>到<span class="_ _6"></span>有 <span class="ff4 ls1be">2</span><span class="ls10 wsd55">个版本的 </span><span class="ff4 wsd56">grok() </span><span class="wsa0">函数<span class="_ _6"></span>被<span class="_ _6"></span>加<span class="_ _6"></span>载。通<span class="_ _6"></span>常<span class="_ _6"></span>来<span class="_ _6"></span>说，这<span class="_ _6"></span>不<span class="_ _6"></span>是<span class="_ _6"></span>你想</span></div><div class="t m0 x5 h9 y2763 ff1 fs3 fc0 sc0 ls0">要的，而是令人头疼的事。</div><div class="t m0 x0 h9 y2764 ff1 fs3 fc0 sc0 ls0 wsa0">因此，在生产环境中可<span class="_ _6"></span>能需要避免重新加载模块。<span class="_ _6"></span>在交互环境下调试，解释<span class="_ _6"></span>程序并</div><div class="t m0 x5 h9 y2765 ff1 fs3 fc0 sc0 ls0">试图弄懂它。</div><div class="t m0 x5 hd y2766 ff2 fs4 fc4 sc0 ls0 ws211">12.7<span class="_ _e"> </span>10.7 <span class="ff1">运行目录或压缩文件</span></div><div class="t m0 x5 he y2767 ff2 fs2 fc4 sc0 ls0 ws212">12.7.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 y2768 ff1 fs3 fc0 sc0 ls3a ws153">您有一个已成长为包含多个文件的应用，它已远不再是一个简单的脚本，你想向用</div><div class="t m0 x5 h9 y2769 ff1 fs3 fc0 sc0 ls0">户提供一些简单的方法运行这个程序。</div><div class="t m0 x5 he y346 ff2 fs2 fc4 sc0 ls0 ws212">12.7.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 y276a ff1 fs3 fc0 sc0 ls3a ws153">如果你的应用程序已经有多个文件，你可以把你的应用程序放进它自己的目录并添</div><div class="t m0 x5 h7 y276b ff1 fs3 fc0 sc0 ls0 wsad6">加一个 <span class="ff4 wsa47">main<span class="_ _e"> </span>.p<span class="_ _1"></span>y <span class="ff1">文件。举个例子，你可以像这样创建目录：</span></span></div><div class="t m0 x5 hf y276c ff8 fs5 fc0 sc0 ls0 ws13a">myapplication<span class="fc6">/</span></div><div class="t m0 x15 hf y276d ff8 fs5 fc0 sc0 ls0 ws13a">spam<span class="fc6 ls34">.</span>py</div><div class="t m0 x15 hf y276e ff8 fs5 fc0 sc0 ls0 ws13a">bar<span class="fc6 ls34">.</span>py</div><div class="t m0 x15 hf y276f ff8 fs5 fc0 sc0 ls0 ws13a">grok<span class="fc6 ls34">.</span>py</div><div class="t m0 x15 hf y2770 ff8 fs5 fc0 sc0 ls0 ws13a">__main__<span class="fc6">.</span>py</div><div class="t m0 x0 h7 y2771 ff1 fs3 fc0 sc0 ls0 wsd57">如果 <span class="ff4 wsa47">main<span class="_ _e"> </span>.p<span class="_ _1"></span>y <span class="ff1 ws14">存在，你可以简单地在顶级目录运行 </span><span class="ws5c">Python <span class="ff1">解释器：</span></span></span></div><div class="t m0 x5 hf y2772 ff8 fs5 fc0 sc0 ls0 ws13c">bash <span class="fc6 ls32">%</span><span class="ws4">python3 myapplication</span></div><div class="t m0 x0 h7 y2773 ff1 fs3 fc0 sc0 ls0 wsd57">解释器将执行 <span class="ff4 wscf0">main<span class="_ _e"> </span>.p<span class="_ _1"></span>y <span class="ff1">文件作为主程序。</span></span></div><div class="t m0 x0 h7 y2774 ff1 fs3 fc0 sc0 ls0 ws38">如果你将你的代码打包成 <span class="ff4 wsd58">zip </span>文件，这种技术同样也适用，举个例子：</div><div class="t m0 x5 hf yb5 ff8 fs5 fc0 sc0 ls0 ws13c">bash <span class="fc6 ls32">%</span>ls</div><div class="t m0 x5 hf y2775 ff8 fs5 fc0 sc0 ls0 ws13a">spam<span class="fc6 ls34">.</span><span class="ws13b">py bar<span class="fc6 ls34">.</span>py grok<span class="fc6 ls34">.</span>py __main__</span><span class="fc6">.</span>py</div><div class="t m0 x5 hf y2776 ff8 fs5 fc0 sc0 ls0 ws13c">bash <span class="fc6 ls32">%</span><span class="fca ws158">zip <span class="fc6 ls34">-</span></span><span class="ws13b">r myapp<span class="fc6 ls34">.</span><span class="ws15b">zip <span class="fc6 ls34">*.</span>py</span></span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">12.7.<span class="_ _5"> </span>10.7 <span class="ff1 ws544">运行目录或压缩文件 </span>373</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

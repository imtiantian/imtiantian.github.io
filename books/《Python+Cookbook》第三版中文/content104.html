<div id="pf68" class="pf w0 h0" data-page-no="68"><div class="pc pc68 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg68.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y1ab ff8 fs5 fc8 sc0 ls0 ws4">array([2, 4, 6, 8])</div><div class="t m0 x5 hf y1ac ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws159">ax <span class="fc6 ls33">+</span><span class="fc7">10</span></span></div><div class="t m0 x5 hf y1ad ff8 fs5 fc8 sc0 ls0 ws4">array([11, 12, 13, 14])</div><div class="t m0 x5 hf y1ae ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws159">ax <span class="fc6 ls33">+</span>ay</span></div><div class="t m0 x5 hf y1af ff8 fs5 fc8 sc0 ls0 ws4">array([ 6, 8, 10, 12])</div><div class="t m0 x5 hf y1b0 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws159">ax <span class="fc6 ls33">*</span>ay</span></div><div class="t m0 x5 hf y355 ff8 fs5 fc8 sc0 ls0 ws4">array([ 5, 12, 21, 32])</div><div class="t m0 x5 hf y410 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y46e ff1 fs3 fc0 sc0 ls0 ws4d6">正如所见，<span class="_ _1"></span>两种方案中数组的基本数学运算结果并不相同。<span class="_ _1"></span>特别的， <span class="ff6 ws4d7">NumPy </span>中的标</div><div class="t m0 x5 h7 y46f ff1 fs3 fc0 sc0 ls0 ws4d8">量运算 <span class="ff4 wsa5">(</span><span class="ws3c3">比<span class="_ _6"></span>如 <span class="ff6 ws4d9">ax<span class="_ _11"> </span>*<span class="_ _11"> </span>2 </span><span class="lsd6">或</span><span class="ff6 ws4da">ax<span class="_ _23"> </span>+<span class="_ _11"> </span>10 <span class="ff4 lsa6">)</span></span><span class="ls2c ws12f">会作用在每一个元素上。另外，当两个操作数都是</span></span></div><div class="t m0 x5 h9 y453 ff1 fs3 fc0 sc0 ls0">数组的时候执行元素对等位置计算，并最终生成一个新的数组。</div><div class="t m0 x0 h9 yb9e ff1 fs3 fc0 sc0 ls3a ws153">对整个数组中所有元素同时执行数学运算可以使得作用在整个数组上的函数运算简</div><div class="t m0 x5 h9 y471 ff1 fs3 fc0 sc0 ls0">单而又快速。比如，如果你想计算多项式的值，可以这样做：</div><div class="t m0 x5 hf y472 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">def <span class="ff8 fcb ls34">f<span class="fc0 ls0">(x):</span></span></span></div><div class="t m0 x5 hf y473 ff7 fs5 fc5 sc0 ls0 ws139">... <span class="fca ws146">return <span class="ff8 fc7 ls34">3<span class="fc6 ls0 ws13a">*</span><span class="fc0">x<span class="fc6">**</span></span><span class="ls32">2<span class="fc6 ls33">-</span><span class="ls0 ws13a">2</span></span><span class="fc6">*<span class="fc0 ls32">x</span><span class="ls33">+</span></span><span class="ls0">7</span></span></span></div><div class="t m0 x5 h10 y474 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf y475 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">f(ax)</span></div><div class="t m0 x5 hf y476 ff8 fs5 fc8 sc0 ls0 ws4">array([ 8, 15, 28, 47])</div><div class="t m0 x5 hf yb9f ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 yba0 ff6 fs3 fc0 sc0 ls0 ws4db">NumPy <span class="ff1 lsa8 ws4dc">还为数组操作提供了大量的通用函数<span class="_ _1"></span>，这些函数可以作为 <span class="ff6 ls0 ws4dd">math <span class="ff1 wsa0">模块<span class="_ _6"></span>中<span class="_ _6"></span>类似</span></span></span></div><div class="t m0 x5 h9 yba1 ff1 fs3 fc0 sc0 ls0">函数的替代。比如：</div><div class="t m0 x5 hf yba2 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">np<span class="fc6 ls34">.</span>sqrt(ax)</span></div><div class="t m0 x5 hf yba3 ff8 fs5 fc8 sc0 ls0 ws4">array([ 1. , 1.41421356, 1.73205081, 2. ])</div><div class="t m0 x5 hf yba4 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">np<span class="fc6 ls34">.</span>cos(ax)</span></div><div class="t m0 x5 hf yba5 ff8 fs5 fc8 sc0 ls0 ws4">array([ 0.54030231, -0.41614684, -0.9899925 , -0.65364362])</div><div class="t m0 x5 hf yba6 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 yba7 ff1 fs3 fc0 sc0 lse ws4de">使用这些通用函数要比循环数组并使用 <span class="ff6 ls0 ws27f">math </span><span class="wsd8">模块中的函数执行计算要快的多。因<span class="_ _1"></span></span></div><div class="t m0 x5 h9 yba8 ff1 fs3 fc0 sc0 ls0 ws38">此，只要有可能的话尽量选择 <span class="ff6 ws19e">NumPy </span>的数组方案。</div><div class="t m0 x0 h7 yba9 ff1 fs3 fc0 sc0 ls0 ws4df">底层实现中， <span class="ff6 ws4e0">NumPy </span><span class="ls82 ws4e1">数组使用了 <span class="ff4 lsd7">C</span></span><span class="ws4e2">或<span class="_ _6"></span>者 <span class="ff4 ws4e3">F<span class="_ _8"></span>ortran <span class="ff1 ls82 ws2f9">语言的机制分配内存。也就是说，</span></span></span></div><div class="t m0 x5 h9 ybaa ff1 fs3 fc0 sc0 ls13 wse5">它们是一个非常大的连续的并由同类型数据组成的内存区域<span class="_ _1"></span>。所以，你可以构造一个<span class="_ _c"></span></div><div class="t m0 x5 h7 ybab ff1 fs3 fc0 sc0 ls0 ws4e4">比普<span class="_ _6"></span>通 <span class="ff4 ws4e5">Python </span><span class="ls42 ws4e6">列表大的多的数组。比如<span class="_ _1"></span>，如果你想构造一个 <span class="ff4 ls0 ws4e7">10,000*10,000 <span class="ff1 wsa0">的浮<span class="_ _6"></span>点数</span></span></span></div><div class="t m0 x5 h9 ybac ff1 fs3 fc0 sc0 ls0">二维网格，很轻松：</div><div class="t m0 x5 hf ybad ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13c">grid <span class="fc6 ls32">=</span><span class="ws13a">np<span class="fc6 ls34">.</span>zeros(shape<span class="fc6 ls34">=<span class="fc0">(</span></span><span class="fc7">10000</span><span class="ls34">,</span><span class="fc7">10000</span><span class="ws13b">), dtype<span class="fc6 ls34">=</span></span><span class="fca">float</span>)</span></span></div><div class="t m0 x5 hf ybae ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">grid</span></div><div class="t m0 x15 hf yb39 ff8 fs5 fc8 sc0 ls0 ws4">array([[ 0., 0., 0., ..., 0., 0., 0.],</div><div class="t m0 x15 hf ybaf ff8 fs5 fc8 sc0 ls0 ws4">[ 0., 0., 0., ..., 0., 0., 0.],</div><div class="t m0 x15 hf ybb0 ff8 fs5 fc8 sc0 ls0 ws4">[ 0., 0., 0., ..., 0., 0., 0.],</div><div class="t m0 x15 hf ybb1 ff8 fs5 fc8 sc0 ls0">...,</div><div class="t m0 x15 hf ybb2 ff8 fs5 fc8 sc0 ls0 ws4">[ 0., 0., 0., ..., 0., 0., 0.],</div><div class="t m0 x15 hf ybb3 ff8 fs5 fc8 sc0 ls0 ws4">[ 0., 0., 0., ..., 0., 0., 0.],</div><div class="t m0 x15 hf ybb4 ff8 fs5 fc8 sc0 ls0 ws4">[ 0., 0., 0., ..., 0., 0., 0.]])</div><div class="t m0 x5 hf ybb5 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 ybb6 ff1 fs3 fc0 sc0 ls0">所有的普通操作还是会同时作用在所有元素上：</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">5.9.<span class="_ _5"> </span>3.9 <span class="ff1 ws325">大型数组运算 </span>95</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

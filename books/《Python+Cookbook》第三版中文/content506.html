<div id="pf1fa" class="pf w0 h0" data-page-no="1fa"><div class="pc pc1fa w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg1fa.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hd y112 ff2 fs4 fc4 sc0 ls0 ws211">15.4<span class="_ _e"> </span>13.4 <span class="ff1">运行时弹出密码输入提示</span></div><div class="t m0 x5 he y113 ff2 fs2 fc4 sc0 ls0 ws212">15.4.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 y658 ff1 fs3 fc0 sc0 ls0 wsa0">你写了个脚本，运行时<span class="_ _6"></span>需要一个密码。此脚本是交<span class="_ _6"></span>互式的，因此不能将密码<span class="_ _6"></span>在脚本</div><div class="t m0 x5 h9 y659 ff1 fs3 fc0 sc0 ls0">中硬编码，而是需要弹出一个密码输入提示，让用户自己输入。</div><div class="t m0 x5 he y18fe ff2 fs2 fc4 sc0 ls0 ws212">15.4.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h7 y6f0 ff1 fs3 fc0 sc0 ls0 ws48f">这时候 <span class="ff4 ws72c">Python </span><span class="ls2a">的</span><span class="ff6 ws6bf">getpass </span><span class="ls1f ws113">模块正是你所需要的。你可以让你很轻松的弹出密码输</span></div><div class="t m0 x5 h9 y6f1 ff1 fs3 fc0 sc0 ls0">入提示，并且不会在用户终端回显密码。下面是具体代码：</div><div class="t m0 x5 h10 y12f6 ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc">getpass</span></div><div class="t m0 x5 hf y1f70 ff8 fs5 fc0 sc0 ls0 ws13c">user <span class="fc6 ls32">=</span><span class="ws13a">getpass<span class="fc6 ls34">.</span>getuser()</span></div><div class="t m0 x5 hf y1f71 ff8 fs5 fc0 sc0 ls0 ws145">passwd <span class="fc6 ls33">=</span><span class="ws13a">getpass<span class="fc6">.</span>getpass()</span></div><div class="t m0 x5 hf y3de ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 fc0 ws4">svc_login(user, passwd):<span class="_ _22"> </span><span class="ffa fcd"># You must write svc_login()</span></span></div><div class="t m0 x3c hf y3df ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ls34">(</span><span class="ff9 fc9 ws13b">&apos;<span class="ff8 ws13a">Yay!</span><span class="ls34">&apos;</span><span class="ff8 fc0">)</span></span></div><div class="t m0 x5 hf y3e0 ff7 fs5 fca sc0 ls0 ws156">else<span class="ff8 fc0">:</span></div><div class="t m0 x3c hf y3e1 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ls34">(</span><span class="ff9 fc9 ws13b">&apos;<span class="ff8 ws13a">Boo!</span><span class="ls34">&apos;</span><span class="ff8 fc0">)</span></span></div><div class="t m0 x0 h9 y31b2 ff1 fs3 fc0 sc0 ls0 wsa0">在此代<span class="_ _6"></span>码中，<span class="ff6 wsf75">svc<span class="_ _7"> </span>login() </span>是你<span class="_ _6"></span>要实现<span class="_ _6"></span>的处理<span class="_ _6"></span>密码的函<span class="_ _6"></span>数，具体<span class="_ _6"></span>的处理<span class="_ _6"></span>过程你<span class="_ _6"></span>自己</div><div class="t m0 x5 h9 y31b3 ff1 fs3 fc0 sc0 ls0">决定。</div><div class="t m0 x5 he y31b4 ff2 fs2 fc4 sc0 ls0 ws212">15.4.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 y103e ff1 fs3 fc0 sc0 ls0 ws11ff">注<span class="_ _6"></span>意<span class="_ _6"></span>在<span class="_ _6"></span>前面<span class="_ _6"></span>代<span class="_ _6"></span>码<span class="_ _6"></span>中 <span class="ff6 ws1200">getpass.getuser() </span><span class="wsa0">不<span class="_ _6"></span>会<span class="_ _6"></span>弹<span class="_ _6"></span>出<span class="_ _6"></span>用<span class="_ _6"></span>户<span class="_ _6"></span>名<span class="_ _6"></span>的<span class="_ _6"></span>输<span class="_ _6"></span>入<span class="_ _6"></span>提<span class="_ _6"></span>示。<span class="_ _6"></span>它<span class="_ _6"></span>会<span class="_ _6"></span>根<span class="_ _6"></span>据该</span></div><div class="t m0 x5 h7 y31b5 ff1 fs3 fc0 sc0 ls0 ws1f0">用户的 <span class="ff4 ws1201">shell </span><span class="wscc5">环境或者会依据本地系统的密码库（支持 <span class="ff13 ws1202">pwd </span><span class="wsa0">模块的平台）<span class="_ _c"></span>来使用当前用</span></span></div><div class="t m0 x5 h9 y445 ff1 fs3 fc0 sc0 ls0">户的登录名，</div><div class="t m0 x0 h9 y31b6 ff1 fs3 fc0 sc0 ls0 ws14">如果你想显示的弹出用户名输入提示，使用内置的 <span class="ff6 ws17d">input </span>函数：</div><div class="t m0 x5 hf y31b7 ff8 fs5 fc0 sc0 ls0 ws13c">user <span class="fc6 ls32">=</span><span class="fca ws13a">input<span class="fc0">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Enter your username: <span class="ff9 ls34">&apos;</span></span>)</span></span></div><div class="t m0 x0 h9 y463 ff1 fs3 fc0 sc0 ls49 ws1203">还有一点很重要<span class="_ _1"></span>，有些系统可能不支持 <span class="ff6 ls0 ws374">getpass() </span><span class="ws1a6">方法隐藏输入密码<span class="_ _1"></span>。这种情况<span class="_ _1"></span></span></div><div class="t m0 x5 h7 y31b8 ff1 fs3 fc0 sc0 ls0 wsa0">下，<span class="ff4 ws5c">Python </span>会提前警告你这些问题（例如它会警告你说密码会以明文形式显示）</div><div class="t m0 x5 hd y31b9 ff2 fs4 fc4 sc0 ls0 ws211">15.5<span class="_ _e"> </span>13.5 <span class="ff1">获取终端的大小</span></div><div class="t m0 x5 he y31ba ff2 fs2 fc4 sc0 ls0 ws212">15.5.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 y31bb ff1 fs3 fc0 sc0 ls0">你需要知道当前终端的大小以便正确的格式化输出。</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">15.4.<span class="_ _36"> </span>13.4 <span class="ff1 ws512">运行时弹出密码输入提示 </span>497</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

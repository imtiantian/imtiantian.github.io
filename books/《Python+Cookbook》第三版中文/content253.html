<div id="pffd" class="pf w0 h0" data-page-no="fd"><div class="pc pcfd w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bgfd.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x0 h9 y2a ff1 fs3 fc0 sc0 ls0 wsa77">在<span class="_ _6"></span>上<span class="_ _6"></span>面代<span class="_ _6"></span>码<span class="_ _6"></span>中， <span class="ff6 wsa78">setattr<span class="_ _e"> </span>() </span><span class="wsa0">的<span class="_ _6"></span>实<span class="_ _6"></span>现<span class="_ _6"></span>包<span class="_ _6"></span>含<span class="_ _6"></span>一<span class="_ _6"></span>个<span class="_ _6"></span>名字<span class="_ _6"></span>检<span class="_ _6"></span>查。<span class="_ _6"></span>如<span class="_ _6"></span>果<span class="_ _6"></span>某<span class="_ _6"></span>个<span class="_ _6"></span>属<span class="_ _6"></span>性<span class="_ _6"></span>名<span class="_ _6"></span>以下<span class="_ _6"></span>划</span></div><div class="t m0 x5 h7 y2b ff1 fs3 fc0 sc0 ls16e">线<span class="ff4 ls0 wsa79">(<span class="_ _7"> </span>) </span><span class="ls0 ws49b">开头，就通过 <span class="ff6 wsa7a">super() </span><span class="wsa7b">调用原始的 <span class="ff6 wsa7c">setattr<span class="_ _e"> </span>() </span>，否则的话就委派给内部的代</span></span></div><div class="t m0 x5 h9 y2c ff1 fs3 fc0 sc0 ls0 ws428">理对<span class="_ _6"></span>象 <span class="ff6 ws27d">self. obj </span><span class="wsa0">去<span class="_ _6"></span>处<span class="_ _6"></span>理。这<span class="_ _6"></span>看<span class="_ _6"></span>上<span class="_ _6"></span>去有<span class="_ _6"></span>点<span class="_ _6"></span>意思，<span class="_ _6"></span>因<span class="_ _6"></span>为<span class="_ _6"></span>就算<span class="_ _6"></span>没<span class="_ _6"></span>有<span class="_ _6"></span>显式<span class="_ _6"></span>的<span class="_ _6"></span>指明<span class="_ _6"></span>某<span class="_ _6"></span>个<span class="_ _6"></span>类的<span class="_ _6"></span>父</span></div><div class="t m0 x5 h9 y2d ff1 fs3 fc0 sc0 ls0 ws14">类， <span class="ff6 ws472">super() </span>仍然可以有效的工作。</div><div class="t m0 x5 he y1b62 ff2 fs2 fc4 sc0 ls0 ws212">10.7.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h7 y1b63 ff1 fs3 fc0 sc0 ls1f ws72b">实际上，大家对于在 <span class="ff4 ls0 ws72c">Python </span>中如何正确使用 <span class="ff6 ls0 ws85e">super() </span><span class="ws113">函数普遍知之甚少。你有时</span></div><div class="t m0 x5 h9 y1b64 ff1 fs3 fc0 sc0 ls0">候会看到像下面这样直接调用父类的一个方法：</div><div class="t m0 x5 hf yfc8 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">Base<span class="ff8 fc0">:</span></span></div><div class="t m0 x15 hf y1b65 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1b66 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Base.__init__</span>&apos;</span><span class="ls0">)</span></span></div><div class="t m0 x5 hf y1b67 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ls34">A</span><span class="ff8 fc0">(Base):</span></div><div class="t m0 x15 hf y1b68 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1b69 ff8 fs5 fc0 sc0 ls0 ws13a">Base<span class="fc6">.</span>__init__(<span class="fca">self</span>)</div><div class="t m0 x16 hf y1b6a ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">A.__init__</span>&apos;</span><span class="ls0">)</span></span></div><div class="t m0 x0 h9 y1b6b ff1 fs3 fc0 sc0 ls3a ws153">尽管对于大部分代码而言这么做没什么问题，但是在更复杂的涉及到多继承的代码</div><div class="t m0 x5 h9 y1b6c ff1 fs3 fc0 sc0 ls0">中就有可能导致很奇怪的问题发生。比如，考虑如下的情况：</div><div class="t m0 x5 hf y1b6d ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">Base<span class="ff8 fc0">:</span></span></div><div class="t m0 x15 hf y1b6e ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1b6f ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">Base.__init__</span>&apos;</span><span class="ls0">)</span></span></div><div class="t m0 x5 hf y1b70 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ls34">A</span><span class="ff8 fc0">(Base):</span></div><div class="t m0 x15 hf y1b71 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1b72 ff8 fs5 fc0 sc0 ls0 ws13a">Base<span class="fc6">.</span>__init__(<span class="fca">self</span>)</div><div class="t m0 x16 hf y1b73 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">A.__init__</span>&apos;</span><span class="ls0">)</span></span></div><div class="t m0 x5 hf y1b74 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ls34">B</span><span class="ff8 fc0">(Base):</span></div><div class="t m0 x15 hf y1b75 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1b76 ff8 fs5 fc0 sc0 ls0 ws13a">Base<span class="fc6">.</span>__init__(<span class="fca">self</span>)</div><div class="t m0 x16 hf y1b77 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">B.__init__</span>&apos;</span><span class="ls0">)</span></span></div><div class="t m0 x5 hf y1b78 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ls34">C</span><span class="ff8 fc0">(A,B):</span></div><div class="t m0 x15 hf y1b79 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1b7a ff8 fs5 fc0 sc0 ls34">A<span class="fc6 ls0 ws13a">.<span class="fc0">__init__(<span class="fca">self</span>)</span></span></div><div class="t m0 x16 hf y1b7b ff8 fs5 fc0 sc0 ls34">B<span class="fc6 ls0 ws13a">.<span class="fc0">__init__(<span class="fca">self</span>)</span></span></div><div class="t m0 x16 hf y1b7c ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">C.__init__</span>&apos;</span><span class="ls0">)</span></span></div><div class="t m0 x0 h9 y1b7d ff1 fs3 fc0 sc0 ls0 ws38">如果你运行这段代码就会发现 <span class="ff6 ws308">Base.<span class="_ _e"> </span>init<span class="_ _e"> </span>() </span>被调用两次，如下所示：</div><div class="t m0 x5 hf y1b7e ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">c<span class="fc6 ls33">=</span><span class="ls0">C()</span></span></div><div class="t m0 x5 hf y32e ff8 fs5 fc8 sc0 ls0">Base.__init__</div><div class="t m0 x5 hf y32f ff8 fs5 fc8 sc0 ls0">A.__init__</div><div class="t m0 x5 hf y330 ff8 fs5 fc8 sc0 ls0">Base.__init__</div><div class="t m0 x5 hf y331 ff8 fs5 fc8 sc0 ls0">B.__init__</div><div class="t m0 x5 hf y332 ff8 fs5 fc8 sc0 ls0">C.__init__</div><div class="t m0 x5 hf y333 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws9da">10.7.<span class="_ _5"> </span>8.7 <span class="ff1 ws292">调用父类方法 </span>244</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

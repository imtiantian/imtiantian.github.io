<div id="pf78" class="pf w0 h0" data-page-no="78"><div class="pc pc78 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg78.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x17 h10 y334 ff7 fs5 fca sc0 ls0">break</div><div class="t m0 x16 hf y335 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ws4">(line, end<span class="fc6 ws13a">=<span class="ff9 fc9 ls34">&apos;&apos;</span></span>)</span></div><div class="t m0 x5 he yd60 ff2 fs2 fc4 sc0 ls0 ws135">6.1.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 yd61 ff1 fs3 fc0 sc0 ls0 ws55f">大多数情况下，<span class="_ _1"></span>我们会使用 <span class="ff6 ws560">for </span><span class="wsa0">循环语句用来遍历一个可迭代对象。但是，<span class="_ _c"></span>偶尔也</span></div><div class="t m0 x5 h9 y296 ff1 fs3 fc0 sc0 ls0">需要对迭代做更加精确的控制，这时候了解底层迭代机制就显得尤为重要了。</div><div class="t m0 x0 h9 y793 ff1 fs3 fc0 sc0 ls0">下面的交互示例向我们演示了迭代期间所发生的基本细节：</div><div class="t m0 x5 hf yd62 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws15f">items <span class="fc6 ls33">=</span><span class="ws13a">[<span class="fc7 ls34">1</span><span class="ls33">,</span><span class="fc7">2</span><span class="ls33">,<span class="fc7 ls34">3</span></span>]</span></span></div><div class="t m0 x5 h11 yd63 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Get the iterator</span></div><div class="t m0 x5 hf yd64 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws159">it <span class="fc6 ls33">=</span><span class="fca ws13a">iter</span><span class="ws155">(items) <span class="ffa fcd ws4"># Invokes items.__iter__()</span></span></span></div><div class="t m0 x5 h11 yd65 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Run the iterator</span></div><div class="t m0 x5 hf yd66 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fca ws13a">next<span class="fc0 ws161">(it) <span class="ffa fcd ws4"># Invokes it.__next__()</span></span></span></div><div class="t m0 x5 hf yd67 ff8 fs5 fc8 sc0 ls0">1</div><div class="t m0 x5 hf yd68 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fca ws13a">next<span class="fc0">(it)</span></span></div><div class="t m0 x5 hf yd69 ff8 fs5 fc8 sc0 ls0">2</div><div class="t m0 x5 hf yd6a ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fca ws13a">next<span class="fc0">(it)</span></span></div><div class="t m0 x5 hf yd6b ff8 fs5 fc8 sc0 ls0">3</div><div class="t m0 x5 hf yd6c ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fca ws13a">next<span class="fc0">(it)</span></span></div><div class="t m0 x5 hf yd6d ff8 fs5 fce sc0 ls0 ws4">Traceback (most recent call last):</div><div class="t m0 x15 hf yd6e ff8 fs5 fc0 sc0 ls0 ws13c">File <span class="fc9 ws13a">&quot;&lt;stdin&gt;&quot;</span><span class="ws145">, line <span class="fc7 ls34">1</span><span class="ls32">,</span><span class="ff7 fca ws160">in </span><span class="fc6 ws13a">&lt;<span class="fc0">module</span>&gt;</span></span></div><div class="t m0 x5 hf yd6f ff8 fs5 fc2 sc0 ls0">StopIteration</div><div class="t m0 x5 hf yd70 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 yd71 ff1 fs3 fc0 sc0 ls3a ws153">本章接下来几小节会更深入的讲解迭代相关技术，前提是你先要理解基本的迭代协</div><div class="t m0 x5 h9 yd72 ff1 fs3 fc0 sc0 ls0">议机制。所以确保你已经把这章的内容牢牢记在心中。</div><div class="t m0 x5 hd yd73 ff2 fs4 fc4 sc0 ls0 ws134">6.2<span class="_ _e"> </span>4.2 <span class="ff1">代理迭代</span></div><div class="t m0 x5 he yd74 ff2 fs2 fc4 sc0 ls0 ws135">6.2.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 yd75 ff1 fs3 fc0 sc0 ls0 wsa0">你构建了一个自定义<span class="_ _6"></span>容器对象，里面包含有列表、<span class="_ _6"></span>元组或其他可迭代对象。<span class="_ _6"></span>你想直</div><div class="t m0 x5 h9 yd76 ff1 fs3 fc0 sc0 ls0">接在你的这个新容器对象上执行迭代操作。</div><div class="t m0 x5 he yd77 ff2 fs2 fc4 sc0 ls0 ws135">6.2.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 yd78 ff1 fs3 fc0 sc0 ls0 ws561">实<span class="_ _6"></span>际<span class="_ _6"></span>上<span class="_ _6"></span>你<span class="_ _6"></span>只<span class="_ _6"></span>需<span class="_ _6"></span>要<span class="_ _6"></span>定<span class="_ _6"></span>义<span class="_ _0"></span>一个 <span class="ff6 ws562">iter<span class="_ _e"> </span>() </span><span class="wsa0">方<span class="_ _6"></span>法，<span class="_ _0"></span>将迭<span class="_ _6"></span>代<span class="_ _6"></span>操<span class="_ _0"></span>作代<span class="_ _6"></span>理<span class="_ _6"></span>到<span class="_ _0"></span>容器<span class="_ _6"></span>内<span class="_ _6"></span>部<span class="_ _0"></span>的对<span class="_ _6"></span>象<span class="_ _6"></span>上</span></div><div class="t m0 x5 h9 yd79 ff1 fs3 fc0 sc0 ls0">去。比如：</div><div class="t m0 x5 hf yd7a ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">Node<span class="ff8 fc0">:</span></span></div><div class="t m0 x15 hf yd7b ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span><span class="ws4">, value):</span></span></span></div><div class="t m0 x16 hf yd7c ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws19f">_value </span><span class="ls32">=</span><span class="fc0">value</span></span></div><div class="t m0 x16 hf y693 ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws51e">_children </span><span class="ls32">=</span><span class="fc0">[]</span></span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">6.2.<span class="_ _5"> </span>4.2 <span class="ff1 ws563">代理迭代 </span>111</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

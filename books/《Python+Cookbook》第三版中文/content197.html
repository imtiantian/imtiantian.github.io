<div id="pfc5" class="pf w0 h0" data-page-no="c5"><div class="pc pcc5 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bgc5.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 he y137 ff2 fs2 fc4 sc0 ls0 ws135">8.7.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h7 y675 ff1 fs3 fc0 sc0 ls0 ws6a2">解析含有命名空间的 <span class="ff4 ws842">XML </span><span class="ws843">文档会比较繁琐。<span class="_ _1"></span>上面的 <span class="ff6 ws844">XMLNamespaces </span>仅仅是允许你</span></div><div class="t m0 x5 h7 y676 ff1 fs3 fc0 sc0 ls0 ws14">使用缩略名代替完整的 <span class="ff4 ws845">URI </span>将其变得稍微简洁一点。</div><div class="t m0 x0 h9 y1575 ff1 fs3 fc0 sc0 ls0 ws846">很<span class="_ _6"></span>不<span class="_ _0"></span>幸<span class="_ _6"></span>的<span class="_ _0"></span>是，<span class="_ _0"></span>在<span class="_ _6"></span>基<span class="_ _0"></span>本<span class="_ _6"></span>的 <span class="ff6 ws847">ElementTree </span><span class="lsfa ws60c">解析中没有任何途径获取命名空间的信息<span class="_ _c"></span>。<span class="_ _1"></span></span></div><div class="t m0 x5 h9 y1576 ff1 fs3 fc0 sc0 ls0 ws789">但是，<span class="_ _6"></span>如果<span class="_ _6"></span>你使<span class="_ _6"></span>用 <span class="ff6 ws1ec">iterparse() </span><span class="ls17 wsf6">函数的话就可以获取更多关于命名空间处理范围的信</span></div><div class="t m0 x5 h9 y1577 ff1 fs3 fc0 sc0 ls0">息。例如：</div><div class="t m0 x5 hf y1578 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws15a">from <span class="fcc ws7d9">xml.etree.ElementTree </span><span class="ws146">import <span class="ff8 fc0">iterparse</span></span></span></div><div class="t m0 x5 hf y1579 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">for <span class="ff8 fc0 ws13b">evt, elem </span><span class="ws157">in <span class="ff8 fc0 ws13a">iterparse(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">ns2.xml<span class="ff9 ls34">&apos;</span></span><span class="ws4">, (<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">end<span class="ff9 ls34">&apos;</span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">start-ns<span class="ff9 ls34">&apos;</span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9">end-ns<span class="ff9 ls34">&apos;</span></span>)):</span></span></span></div><div class="t m0 x5 hf y157a ff7 fs5 fc5 sc0 ls0 ws139">... <span class="fca ws156">print<span class="ff8 fc0 ws13b">(evt, elem)</span></span></div><div class="t m0 x5 h10 y157b ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf y157c ff8 fs5 fc8 sc0 ls0 ws150">end &lt;Element <span class="ff9 ls34">&apos;</span><span class="ws13a">author<span class="ff9 ls32">&apos;</span><span class="ws4">at 0x10110de10&gt;</span></span></div><div class="t m0 x5 hf y157d ff8 fs5 fc8 sc0 ls0 ws4">start-ns (<span class="ff9 ws13b">&apos;&apos;</span><span class="ls32">,<span class="ff9 ls34">&apos;</span></span><span class="ws13a">http://www.w3.org/1999/xhtml<span class="ff9 ls34">&apos;</span>)</span></div><div class="t m0 x5 hf y157e ff8 fs5 fc8 sc0 ls0 ws150">end &lt;Element <span class="ff9 ls34">&apos;</span><span class="ws13a">{http://www.w3.org/1999/xhtml}title<span class="ff9 ls32">&apos;</span><span class="ws4">at 0x1011131b0&gt;</span></span></div><div class="t m0 x5 hf y157f ff8 fs5 fc8 sc0 ls0 ws150">end &lt;Element <span class="ff9 ls34">&apos;</span><span class="ws13a">{http://www.w3.org/1999/xhtml}head<span class="ff9 ls32">&apos;</span><span class="ws4">at 0x1011130a8&gt;</span></span></div><div class="t m0 x5 hf y1580 ff8 fs5 fc8 sc0 ls0 ws150">end &lt;Element <span class="ff9 ls34">&apos;</span><span class="ws13a">{http://www.w3.org/1999/xhtml}h1<span class="ff9 ls33">&apos;</span><span class="ws13b">at 0x101113310&gt;</span></span></div><div class="t m0 x5 hf y1581 ff8 fs5 fc8 sc0 ls0 ws150">end &lt;Element <span class="ff9 ls34">&apos;</span><span class="ws13a">{http://www.w3.org/1999/xhtml}body<span class="ff9 ls32">&apos;</span><span class="ws4">at 0x101113260&gt;</span></span></div><div class="t m0 x5 hf y1582 ff8 fs5 fc8 sc0 ls0 ws150">end &lt;Element <span class="ff9 ls34">&apos;</span><span class="ws13a">{http://www.w3.org/1999/xhtml}html<span class="ff9 ls32">&apos;</span><span class="ws4">at 0x10110df70&gt;</span></span></div><div class="t m0 x5 hf y1583 ff8 fs5 fc8 sc0 ls0 ws4">end-ns None</div><div class="t m0 x5 hf y1584 ff8 fs5 fc8 sc0 ls0 ws150">end &lt;Element <span class="ff9 ls34">&apos;</span><span class="ws13a">content<span class="ff9 ls33">&apos;</span><span class="ws13b">at 0x10110de68&gt;</span></span></div><div class="t m0 x5 hf y1585 ff8 fs5 fc8 sc0 ls0 ws150">end &lt;Element <span class="ff9 ls34">&apos;</span><span class="ws13a">top<span class="ff9 ls33">&apos;</span><span class="ws13b">at 0x10110dd60&gt;</span></span></div><div class="t m0 x5 hf y1586 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13c">elem <span class="ffa fcd ws4"># This is the topmost element</span></span></div><div class="t m0 x5 hf y1587 ff8 fs5 fc8 sc0 ls0 ws16d">&lt;Element <span class="ff9 ws13b">&apos;</span><span class="ws13a">top<span class="ff9 ls33">&apos;</span><span class="ws13b">at 0x10110dd60&gt;</span></span></div><div class="t m0 x5 hf y1588 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y1589 ff1 fs3 fc0 sc0 ls18 ws47f">最后一点，如果你要处理的 <span class="ff4 ls0 ws848">XML </span><span class="ws849">文本除了要使用到其他高级 <span class="ff4 ls0 ws84a">XML <span class="ff1 wsa0">特性外，<span class="_ _6"></span>还要</span></span></span></div><div class="t m0 x5 h9 y158a ff1 fs3 fc0 sc0 ls1e ws84b">使用到命名空间<span class="_ _1"></span>，建议你最好是使用 <span class="ff6 ls0 ws84c">lxml </span><span class="ws84d">函数库来代替 <span class="ff6 ls0 ws84e">ElementTree <span class="ff1 wsa0">。<span class="_ _6"></span>例<span class="_ _6"></span>如，</span>lxml</span></span></div><div class="t m0 x5 h7 y158b ff1 fs3 fc0 sc0 ls0 ws84f">对利<span class="_ _6"></span>用 <span class="ff4 ws850">DTD </span><span class="ls6b ws851">验证文档、更好的 </span><span class="ff4 ws852">XP<span class="_ _c"></span>ath <span class="ff1 ls6b ws853">支持和一些其他高级 </span><span class="ws854">XML <span class="ff1 ls6b ws28f">特性等都提供了更</span></span></span></div><div class="t m0 x5 h7 y158c ff1 fs3 fc0 sc0 ls0 ws14">好的支持。这一小节其实只是教你如何让 <span class="ff4 ws64">XML </span>解析稍微简单一点。</div><div class="t m0 x5 hd y158d ff2 fs4 fc4 sc0 ls0 ws134">8.8<span class="_ _e"> </span>6.8 <span class="ff1">与关系型数据库的交互</span></div><div class="t m0 x5 he y158e ff2 fs2 fc4 sc0 ls0 ws135">8.8.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 y158f ff1 fs3 fc0 sc0 ls0">你想在关系型数据库中查询、增加或删除记录。</div><div class="t m0 x5 he y1590 ff2 fs2 fc4 sc0 ls0 ws135">8.8.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h7 y1591 ff4 fs3 fc0 sc0 ls0 ws5c">Python <span class="ff1">中表示多行数据的标准方式是一个由元组构成的序列。例如：</span></div><div class="t m0 x5 hf y8fd ff8 fs5 fc0 sc0 ls0 ws145">stocks <span class="fc6 ls33">=</span>[</div><div class="t m0 x15 hf y8fe ff8 fs5 fc0 sc0 ls34">(<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">GOOG</span><span class="ls34">&apos;</span></span><span class="ls32">,<span class="fc7 ls0 ws13a">100</span>,<span class="fc7 ls0 ws13a">490.1<span class="fc0">),</span></span></span></div><div class="t m0 x15 hf y8ff ff8 fs5 fc0 sc0 ls34">(<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">AAPL</span><span class="ls34">&apos;</span></span><span class="ls32">,<span class="fc7 ls0 ws13a">50</span>,<span class="fc7 ls0 ws13a">545.75<span class="fc0">),</span></span></span></div><div class="t m0 x15 hf y900 ff8 fs5 fc0 sc0 ls34">(<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">FB</span><span class="ls34">&apos;</span></span><span class="ls32">,<span class="fc7 ls0 ws13a">150</span><span class="ls33">,<span class="fc7 ls0 ws13a">7.45<span class="fc0">),</span></span></span></span></div><div class="t m0 x15 hf y901 ff8 fs5 fc0 sc0 ls34">(<span class="ff9 fc9 ls0 ws13b">&apos;<span class="ff8 ws13a">HPQ</span>&apos;</span><span class="ls33">,<span class="fc7 ls0 ws13a">75</span>,<span class="fc7 ls0 ws13a">33.2<span class="fc0">),</span></span></span></div><div class="t m0 x5 hf y902 ff8 fs5 fc0 sc0 ls0">]</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">8.8.<span class="_ _5"> </span>6.8 <span class="ff1 ws855">与关系型数据库的交互 </span>188</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

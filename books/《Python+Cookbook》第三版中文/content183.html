<div id="pfb7" class="pf w0 h0" data-page-no="b7"><div class="pc pcb7 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bgb7.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y1ab ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws4">{&quot;b&quot;: &quot;Hello&quot;, &quot;c&quot;: null, &quot;a&quot;: true}<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y1ac ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y85b ff1 fs3 fc0 sc0 ls0 ws7b2">如<span class="_ _6"></span>果<span class="_ _6"></span>你<span class="_ _6"></span>试<span class="_ _6"></span>着<span class="_ _6"></span>去<span class="_ _6"></span>检<span class="_ _6"></span>查 <span class="ff4 ws7b3">JSON </span><span class="ls49 ws1a6">解码后的数据<span class="_ _1"></span>，你通常很难通过简单的打印来确定它的</span></div><div class="t m0 x5 h9 y85c ff1 fs3 fc0 sc0 ls2c ws12f">结构，特别是当数据的嵌套结构层次很深或者包含大量的字段时。为了解<span class="_ _1"></span>决这个问题，</div><div class="t m0 x5 h7 y85d ff1 fs3 fc0 sc0 ls130 ws7b4">可以考虑使用 <span class="ff4 ls0 ws7b5">pprin<span class="_ _1"></span>t <span class="ff1 ws7b6">模<span class="_ _0"></span>块<span class="_ _6"></span>的 <span class="ff6 ws7b7">pprint() </span><span class="ls130 ws7b8">函数来代替普通的 </span><span class="ff6 ws7b9">print() </span><span class="ls130 ws7ba">函数<span class="_ _c"></span>。它会按照<span class="_ _c"></span></span></span></span></div><div class="t m0 x5 h7 y13d9 ff4 fs3 fc0 sc0 ls0 ws7bb">k<span class="_ _1"></span>ey <span class="ff1 ls6f ws2a7">的字母顺序并以一种更加美观的方式输出<span class="_ _1"></span>。下面是一个演示如何漂亮的打印输出</span></div><div class="t m0 x5 h7 y13da ff4 fs3 fc0 sc0 ls0 ws2d8">T<span class="_ _8"></span>witter <span class="ff1">上搜索结果的例子：</span></div><div class="t m0 x5 hf y13db ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws15a">from <span class="fcc ws51a">urllib.request </span><span class="ws1ff">import <span class="ff8 fc0">urlopen</span></span></span></div><div class="t m0 x5 h10 y13dc ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">json</span></span></div><div class="t m0 x5 hf y13dd ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">u<span class="fc6 ls33">=</span><span class="ls0 ws13a">urlopen(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">http://search.twitter.com/search.json?q=python&amp;rpp=5<span class="ff9 ls34">&apos;</span></span>)</span></span></div><div class="t m0 x5 hf y13de ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13c">resp <span class="fc6 ls32">=</span><span class="ws13a">json<span class="fc6 ls34">.</span>loads(u<span class="fc6">.</span>read()<span class="fc6 ls34">.</span>decode(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">utf-8<span class="ff9 ls34">&apos;</span></span>))</span></span></div><div class="t m0 x5 hf y13df ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws15a">from <span class="fcc ws146">pprint <span class="fca">import <span class="ff8 fc0">pprint</span></span></span></span></div><div class="t m0 x5 hf y13e0 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">pprint(resp)</span></div><div class="t m0 x5 hf y13e1 ff8 fs5 fc8 sc0 ls34">{<span class="ff9 ls0 ws13b">&apos;</span><span class="ls0 ws13a">completed_in</span><span class="ff9">&apos;</span><span class="ls0 ws13b">: 0.074,</span></div><div class="t m0 x5 hf y13e2 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">max_id</span>&apos;<span class="ff8 ls0 ws13b">: 264043230692245504,</span></div><div class="t m0 x5 hf y13e3 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">max_id_str</span>&apos;<span class="ff8 ls32">:</span>&apos;<span class="ff8 ls0 ws13a">264043230692245504</span>&apos;<span class="ff8 ls0">,</span></div><div class="t m0 x5 hf y13e4 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">next_page</span>&apos;<span class="ff8 ls32">:</span>&apos;<span class="ff8 ls0 ws13a">?page=2&amp;max_id=264043230692245504&amp;q=python&amp;rpp=5</span>&apos;<span class="ff8 ls0">,</span></div><div class="t m0 x5 hf y13e5 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">page</span><span class="ls0 ws13b">&apos;<span class="ff8 ws4">: 1,</span></span></div><div class="t m0 x5 hf y3c ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">query</span>&apos;<span class="ff8 ls33">:</span><span class="ls0 ws13b">&apos;<span class="ff8 ws13a">python</span>&apos;<span class="ff8">,</span></span></div><div class="t m0 x5 hf y13e6 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">refresh_url</span><span class="ls0 ws13b">&apos;<span class="ff8 ls33">:</span></span>&apos;<span class="ff8 ls0 ws13a">?since_id=264043230692245504&amp;q=python</span><span class="ls0 ws13b">&apos;<span class="ff8">,</span></span></div><div class="t m0 x5 hf y13e7 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">results</span>&apos;<span class="ff8 ls0 ws13b">: [{</span>&apos;<span class="ff8 ls0 ws13a">created_at</span>&apos;<span class="ff8 ls33">:</span><span class="ls0 ws13b">&apos;<span class="ff8 ws4">Thu, 01 Nov 2012 16:36:26 +0000</span></span>&apos;<span class="ff8 ls0">,</span></div><div class="t m0 x17 hf y13e8 ff9 fs5 fc8 sc0 ls0 ws13b">&apos;<span class="ff8 ws13a">from_user</span><span class="ls34">&apos;</span><span class="ff8">: ...</span></div><div class="t m0 x17 hf y13e9 ff8 fs5 fc8 sc0 ls0">},</div><div class="t m0 x17 hf y13ea ff8 fs5 fc8 sc0 ls0 ws13a">{<span class="ff9 ls34">&apos;</span>created_at<span class="ff9 ls34">&apos;</span><span class="ls33">:</span><span class="ff9 ws13b">&apos;</span><span class="ws4">Thu, 01 Nov 2012 16:36:14 +0000<span class="ff9 ls34">&apos;</span>,</span></div><div class="t m0 x17 hf y13eb ff9 fs5 fc8 sc0 ls0 ws13b">&apos;<span class="ff8 ws13a">from_user</span><span class="ls34">&apos;</span><span class="ff8">: ...</span></div><div class="t m0 x17 hf y13ec ff8 fs5 fc8 sc0 ls0">},</div><div class="t m0 x17 hf y13ed ff8 fs5 fc8 sc0 ls0 ws13a">{<span class="ff9 ls34">&apos;</span>created_at<span class="ff9 ls34">&apos;</span><span class="ls33">:</span><span class="ff9 ws13b">&apos;</span><span class="ws4">Thu, 01 Nov 2012 16:36:13 +0000<span class="ff9 ls34">&apos;</span>,</span></div><div class="t m0 x17 hf y13ee ff9 fs5 fc8 sc0 ls0 ws13b">&apos;<span class="ff8 ws13a">from_user</span><span class="ls34">&apos;</span><span class="ff8">: ...</span></div><div class="t m0 x17 hf y13ef ff8 fs5 fc8 sc0 ls0">},</div><div class="t m0 x17 hf y13f0 ff8 fs5 fc8 sc0 ls0 ws13a">{<span class="ff9 ls34">&apos;</span>created_at<span class="ff9 ls34">&apos;</span><span class="ls33">:</span><span class="ff9 ws13b">&apos;</span><span class="ws4">Thu, 01 Nov 2012 16:36:07 +0000<span class="ff9 ls34">&apos;</span>,</span></div><div class="t m0 x17 hf y13f1 ff9 fs5 fc8 sc0 ls0 ws13b">&apos;<span class="ff8 ws13a">from_user</span><span class="ls34">&apos;</span><span class="ff8">: ...</span></div><div class="t m0 x17 hf y13f2 ff8 fs5 fc8 sc0 ls0">}</div><div class="t m0 x17 hf y13f3 ff8 fs5 fc8 sc0 ls0 ws13a">{<span class="ff9 ls34">&apos;</span>created_at<span class="ff9 ls34">&apos;</span><span class="ls33">:</span><span class="ff9 ws13b">&apos;</span><span class="ws4">Thu, 01 Nov 2012 16:36:04 +0000<span class="ff9 ls34">&apos;</span>,</span></div><div class="t m0 x17 hf y13f4 ff9 fs5 fc8 sc0 ls0 ws13b">&apos;<span class="ff8 ws13a">from_user</span><span class="ls34">&apos;</span><span class="ff8">: ...</span></div><div class="t m0 x17 hf y13f5 ff8 fs5 fc8 sc0 ls0">}],</div><div class="t m0 x5 hf y13f6 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">results_per_page</span>&apos;<span class="ff8 ls0 ws4">: 5,</span></div><div class="t m0 x5 hf y13f7 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">since_id</span><span class="ls0 ws13b">&apos;<span class="ff8 ws4">: 0,</span></span></div><div class="t m0 x5 hf y13f8 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">since_id_str</span>&apos;<span class="ff8 ls33">:</span><span class="ls0 ws13b">&apos;</span><span class="ff8">0</span>&apos;<span class="ff8 ls0">}</span></div><div class="t m0 x5 hf y13f9 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y13fa ff1 fs3 fc0 sc0 ls0 wsa0">一般<span class="_ _6"></span>来<span class="_ _6"></span>讲，<span class="ff4 ws7bc">JSON </span><span class="ls6b ws7bd">解码会根据提供的数据创建 </span><span class="ff4 ws7be">dicts </span><span class="ls115">或</span><span class="ff4 wsa5">lists</span><span class="ls6b ws28f">。如果你想要创建其他</span></div><div class="t m0 x5 h7 y13fb ff1 fs3 fc0 sc0 ls0 ws7bf">类型的对象，<span class="_ _c"></span>可以给 <span class="ff6 ws7c0">json.loads() </span><span class="ws7c1">传递 <span class="ff4 ws7c2">ob<span class="_ _6"></span>ject<span class="_ _7"> </span>pairs<span class="_ _7"> </span>hook </span><span class="ls131">或</span><span class="ff4 ws7c3">ob<span class="_ _6"></span>ject<span class="_ _7"> </span>ho<span class="_ _6"></span>ok </span><span class="wsa0">参数。<span class="_ _c"></span>例如，</span></span></div><div class="t m0 x5 h7 y13fc ff1 fs3 fc0 sc0 ls0 ws38">下面是演示如何解码 <span class="ff4 ws5f">JSON </span><span class="ws14">数据并在一个 <span class="ff4 ws7c4">OrderedDict </span>中保留其顺序的例子：</span></div><div class="t m0 x5 hf yb1b ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">s<span class="fc6 ls33">=<span class="ff9 fc9 ls34">&apos;<span class="ff8 ls0 ws13b">{&quot;name&quot;: &quot;ACME&quot;, &quot;shares&quot;: 50, &quot;price&quot;: 490.1}<span class="ff9">&apos;</span></span></span></span></span></div><div class="t m0 x5 hf y13fd ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws15a">from <span class="fcc ws168">collections </span><span class="ws146">import <span class="ff8 fc0">OrderedDict</span></span></span></div><div class="t m0 x5 hf y13fe ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13c">data <span class="fc6 ls32">=</span><span class="ws13a">json<span class="fc6 ls34">.</span><span class="ws13b">loads(s, object_pairs_hook</span><span class="fc6">=</span>OrderedDict)</span></span></div><div class="t m0 x5 hf y13ff ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">data</span></div><div class="t m0 x5 hf y1400 ff8 fs5 fc8 sc0 ls0 ws13a">OrderedDict([(<span class="ff9 ls34">&apos;</span>name<span class="ff9 ls34">&apos;</span><span class="ls32">,<span class="ff9 ls34">&apos;</span></span>ACME<span class="ff9 ws13b">&apos;</span><span class="ws4">), (<span class="ff9 ls34">&apos;</span></span>shares<span class="ff9 ls34">&apos;</span><span class="ws4">, 50), (<span class="ff9 ls34">&apos;</span></span>price<span class="ff9 ls34">&apos;</span><span class="ws4">, 490.1)])</span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">8.2.<span class="_ _5"> </span>6.2 <span class="ff1 ws16b">读写 </span><span class="ws791">JSON <span class="ff1 ws792">数据 </span>174</span></div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

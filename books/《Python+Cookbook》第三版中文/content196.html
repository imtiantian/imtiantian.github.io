<div id="pfc4" class="pf w0 h0" data-page-no="c4"><div class="pc pcc4 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bgc4.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x17 h10 y334 ff7 fs5 fc10 sc0 ls0 ws156">&lt;head&gt;</div><div class="t m0 x18 hf y335 ff7 fs5 fc10 sc0 ls0 ws156">&lt;title&gt;<span class="ff8 fc0 ws13b">Hello World</span>&lt;/title&gt;</div><div class="t m0 x17 h10 y336 ff7 fs5 fc10 sc0 ls0">&lt;/head&gt;</div><div class="t m0 x17 h10 y337 ff7 fs5 fc10 sc0 ls0 ws156">&lt;body&gt;</div><div class="t m0 x18 hf yadd ff7 fs5 fc10 sc0 ls0 ws156">&lt;h1&gt;<span class="ff8 fc0 ws13b">Hello World!</span>&lt;/h1&gt;</div><div class="t m0 x17 h10 yade ff7 fs5 fc10 sc0 ls0">&lt;/body&gt;</div><div class="t m0 x16 h10 yadf ff7 fs5 fc10 sc0 ls0">&lt;/html&gt;</div><div class="t m0 x15 h10 yc64 ff7 fs5 fc10 sc0 ls0">&lt;/content&gt;</div><div class="t m0 x5 h10 y1555 ff7 fs5 fc10 sc0 ls0">&lt;/top&gt;</div><div class="t m0 x0 h9 y1556 ff1 fs3 fc0 sc0 ls3a ws153">如果你解析这个文档并执行普通的查询，你会发现这个并不是那么容易，因为所有</div><div class="t m0 x5 h9 y1557 ff1 fs3 fc0 sc0 ls0">步骤都变得相当的繁琐。</div><div class="t m0 x5 h11 y1558 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Some queries that work</span></div><div class="t m0 x5 hf y1559 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">doc<span class="fc6 ls34">.</span>findtext(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">author<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 hf ya38 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13b">David Beazley<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y155a ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">doc<span class="fc6 ls34">.</span>find(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">content<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 hf y155b ff8 fs5 fc8 sc0 ls0 ws16d">&lt;Element <span class="ff9 ws13b">&apos;</span><span class="ws13a">content<span class="ff9 ls33">&apos;</span><span class="ws13b">at 0x100776ec0&gt;</span></span></div><div class="t m0 x5 h11 y155c ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># A query involving a namespace (doesn<span class="ffb ws13b">&apos;</span>t work)</span></div><div class="t m0 x5 hf y155d ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">doc<span class="fc6 ls34">.</span>find(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">content/html<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 h11 y155e ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Works if fully qualified</span></div><div class="t m0 x5 hf y155f ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">doc<span class="fc6 ls34">.</span>find(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">content/{http://www.w3.org/1999/xhtml}html<span class="ff9 ws13b">&apos;</span></span>)</span></div><div class="t m0 x5 hf y1560 ff8 fs5 fc8 sc0 ls0 ws16d">&lt;Element <span class="ff9 ws13b">&apos;</span><span class="ws13a">{http://www.w3.org/1999/xhtml}html<span class="ff9 ls32">&apos;</span><span class="ws4">at 0x1007767e0&gt;</span></span></div><div class="t m0 x5 h11 y1561 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws13b"># Doesn<span class="ffb ls34">&apos;</span>t work</span></div><div class="t m0 x5 hf y1562 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">doc<span class="fc6 ls34">.</span>findtext(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">content/{http://www.w3.org/1999/xhtml}html/head/title<span class="ff9 ws13b">&apos;</span></span>)</span></div><div class="t m0 x5 h11 y1563 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws13b"># Fully qualified</span></div><div class="t m0 x5 hf y1564 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">doc<span class="fc6 ls34">.</span>findtext(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">content/{http://www.w3.org/1999/xhtml}html/<span class="ff9">&apos;</span></span></span></div><div class="t m0 x5 hf y1565 ff7 fs5 fc5 sc0 ls0 ws139">... <span class="ff9 fc9 ls34">&apos;<span class="ff8 ls0 ws13a">{http://www.w3.org/1999/xhtml}head/{http://www.w3.org/1999/xhtml}title<span class="ff9 ws13b">&apos;</span><span class="fc0">)</span></span></span></div><div class="t m0 x5 hf y1566 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13b">Hello World<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y1567 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y1568 ff1 fs3 fc0 sc0 ls0">你可以通过将命名空间处理逻辑包装为一个工具类来简化这个过程：</div><div class="t m0 x5 hf y1569 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">XMLNamespaces<span class="ff8 fc0">:</span></span></div><div class="t m0 x15 hf y156a ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span><span class="ls33">,</span><span class="fc6">**</span>kwargs):</span></span></div><div class="t m0 x16 hf y12a ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws2a3">namespaces </span><span class="ls33">=</span><span class="fc0">{}</span></span></div><div class="t m0 x16 hf y156b ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws13b">name, uri </span><span class="ws157">in <span class="ff8 fc0 ws13a">kwargs<span class="fc6">.</span>items():</span></span></div><div class="t m0 x17 hf y156c ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws4">register(name, uri)</span></span></div><div class="t m0 x15 hf yeda ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">register<span class="fc0">(<span class="fca">self</span><span class="ws4">, name, uri):</span></span></span></div><div class="t m0 x16 hf y156d ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws227">namespaces[name] </span><span class="ls32">=<span class="ff9 fc9 ls34">&apos;<span class="ff8">{</span><span class="ls0 ws13b">&apos;</span></span><span class="ls34">+</span></span><span class="fc0">uri</span><span class="ls34">+<span class="ff9 fc9">&apos;<span class="ff8">}</span><span class="ls0">&apos;</span></span></span></span></div><div class="t m0 x15 hf y156e ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__call__<span class="fc0">(<span class="fca">self</span><span class="ws4">, path):</span></span></span></div><div class="t m0 x16 hf y156f ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 fc0 ws13a">path<span class="fc6 ls34">.</span>format_map(<span class="fca">self<span class="fc6 ls34">.</span></span>namespaces)</span></div><div class="t m0 x0 h9 ye89 ff1 fs3 fc0 sc0 ls0">通过下面的方式使用这个类：</div><div class="t m0 x5 hf y154f ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws159">ns <span class="fc6 ls33">=</span><span class="ws13a">XMLNamespaces(html<span class="fc6">=<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">http://www.w3.org/1999/xhtml<span class="ff9 ls34">&apos;</span></span></span>)</span></span></div><div class="t m0 x5 hf y1570 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">doc<span class="fc6 ls34">.</span>find(ns(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">content/{html}html<span class="ff9 ls34">&apos;</span></span>))</span></div><div class="t m0 x5 hf y1571 ff8 fs5 fc8 sc0 ls0 ws16d">&lt;Element <span class="ff9 ws13b">&apos;</span><span class="ws13a">{http://www.w3.org/1999/xhtml}html<span class="ff9 ls32">&apos;</span><span class="ws4">at 0x1007767e0&gt;</span></span></div><div class="t m0 x5 hf y1572 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">doc<span class="fc6 ls34">.</span>findtext(ns(<span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">content/{html}html/{html}head/{html}title<span class="ff9 ls34">&apos;</span></span>))</span></div><div class="t m0 x5 hf y1573 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13b">Hello World<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y1574 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">8.7.<span class="_ _5"> </span>6.7 <span class="ff1 ws16b">利用命名空间解析 </span><span class="ws7db">XML <span class="ff1 ws841">文档 </span>187</span></div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

<div id="pf11b" class="pf w0 h0" data-page-no="11b"><div class="pc pc11b w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg11b.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y1ab ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fca ws13a">len<span class="fc0">(a)</span></span></div><div class="t m0 x5 hf y1ac ff8 fs5 fce sc0 ls0 ws4">Traceback (most recent call last):</div><div class="t m0 x15 hf y1ad ff8 fs5 fc0 sc0 ls0 ws13c">File <span class="fc9 ws13a">&quot;&lt;stdin&gt;&quot;</span><span class="ws145">, line <span class="fc7 ls34">1</span><span class="ls32">,</span><span class="ff7 fca ws160">in </span><span class="fc6 ws13a">&lt;<span class="fc0">module</span>&gt;</span></span></div><div class="t m0 x5 hf y1ae ff8 fs5 fc2 sc0 ls0 ws13a">TypeError<span class="fc0 ws4">: object of type <span class="ff9 ls34">&apos;</span><span class="ws13a">ListLike<span class="ff9 ls33">&apos;</span><span class="ws13b">has no len()</span></span></span></div><div class="t m0 x5 hf y1af ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">a[<span class="fc7 ls34">0</span>]</span></div><div class="t m0 x5 hf y1b0 ff8 fs5 fce sc0 ls0 ws4">Traceback (most recent call last):</div><div class="t m0 x15 hf y355 ff8 fs5 fc0 sc0 ls0 ws13c">File <span class="fc9 ws13a">&quot;&lt;stdin&gt;&quot;</span><span class="ws145">, line <span class="fc7 ls34">1</span><span class="ls32">,</span><span class="ff7 fca ws160">in </span><span class="fc6 ws13a">&lt;<span class="fc0">module</span>&gt;</span></span></div><div class="t m0 x5 hf y410 ff8 fs5 fc2 sc0 ls0 ws13a">TypeError<span class="fc0 ls32">:<span class="ff9 ls34">&apos;</span><span class="ls0">ListLike</span><span class="ff9">&apos;</span><span class="ls0 ws4">object does not support indexing</span></span></div><div class="t m0 x5 hf y411 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y728 ff1 fs3 fc0 sc0 ls0">为了让它支持这些方法，你必须手动的实现这些方法代理：</div><div class="t m0 x5 hf yc67 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">ListLike<span class="ff8 fc0">:</span></span></div><div class="t m0 x15 h12 yc68 ffa fs5 fc9 sc0 ls0 ws169">&quot;&quot;&quot;__getattr__ <span class="ffc fs6 ws3d4">对于双下划线开始和结尾的方法是不能用的，需要一个个去重定义</span>&quot;&quot;&quot;</div><div class="t m0 x15 hf yc6a ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf yc6b ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws19f">_items </span><span class="ls32">=</span><span class="fc0">[]</span></span></div><div class="t m0 x15 hf yc6d ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__getattr__<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0 ws4">, name):</span></span></span></div><div class="t m0 x16 hf yc6e ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 ws13a">getattr<span class="fc0 ls34">(</span>self<span class="fc6">.<span class="fc0 ws4">_items, name)</span></span></span></div><div class="t m0 x15 h11 yc70 ffa fs5 fcd sc0 ls0 ws4"># Added special methods to support certain list operations</div><div class="t m0 x15 hf y1e35 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__len__<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0">):</span></span></span></div><div class="t m0 x16 hf y1e36 ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 ws13a">len<span class="fc0 ls34">(</span>self<span class="fc6">.<span class="fc0">_items)</span></span></span></div><div class="t m0 x15 hf yb8a ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__getitem__<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0 ws4">, index):</span></span></span></div><div class="t m0 x16 hf y1e37 ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 ws13a">self<span class="fc6 ls34">.</span><span class="fc0">_items[index]</span></span></div><div class="t m0 x15 hf y1e38 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__setitem__<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0 ws4">, index, value):</span></span></span></div><div class="t m0 x16 hf y1e39 ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws5a4">_items[index] </span><span class="ls32">=</span><span class="fc0">value</span></span></div><div class="t m0 x15 hf y1e3a ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__delitem__<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0 ws4">, index):</span></span></span></div><div class="t m0 x16 hf ybfe ff7 fs5 fca sc0 ls0 ws139">del <span class="ff8 ws13a">self<span class="fc6">.<span class="fc0">_items[index]</span></span></span></div><div class="t m0 x0 h7 y1e3b ff4 fs3 fc0 sc0 ls0 ws1d0">11.8 <span class="ff1">小节还有一个在远程方法调用环境中使用代理的例子。</span></div><div class="t m0 x5 hd y1e3c ff2 fs4 fc4 sc0 ls0 ws211">10.16<span class="_ _e"> </span>8.16 <span class="ff1">在类中定义多个构造器</span></div><div class="t m0 x5 he y1e3d ff2 fs2 fc4 sc0 ls0 wsadf">10.16.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 y1e3e ff1 fs3 fc0 sc0 ls0 ws9d6">你想实现一个类，除了使用 <span class="ff6 ws308">init<span class="_ _e"> </span>() </span>方法外，还有其他方式可以初始化它。</div><div class="t m0 x5 he y1e3f ff2 fs2 fc4 sc0 ls0 wsadf">10.16.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 y1e40 ff1 fs3 fc0 sc0 ls0">为了实现多个构造器，你需要使用到类方法。例如：</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 wsae0">10.16.<span class="_ _5"> </span>8.16 <span class="ff1 wsaf4">在类中定义多个构造器 </span>274</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

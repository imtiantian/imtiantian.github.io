<div id="pf201" class="pf w0 h0" data-page-no="201"><div class="pc pc201 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg201.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y1e8 ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 fc0 ws16d">__name__ <span class="fc6 ws159">== <span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws13a">__main__<span class="ff9 ls34">&apos;</span></span></span>:</span></div><div class="t m0 x15 h10 y1e9 ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc">sys</span></div><div class="t m0 x15 hf y1ea ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 ws13a">len<span class="fc0">(sys<span class="fc6 ls34">.</span><span class="ws15f">argv) <span class="fc6 ws159">!= <span class="fc7 ls34">3</span></span>:</span></span></span></div><div class="t m0 x16 hf y903 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws4">Usage: {} dir seconds</span>&apos;</span><span class="fc6">.</span><span class="ls0 ws13a">format(sys</span><span class="fc6">.</span><span class="ls0 ws13a">argv[</span><span class="fc7">0</span><span class="ls0">]))</span></span></div><div class="t m0 x16 hf y1eb ff7 fs5 fca sc0 ls0 ws16a">raise <span class="ff8 ws13a">SystemExit<span class="fc0 ls34">(<span class="fc7">1</span><span class="ls0">)</span></span></span></div><div class="t m0 x15 hf y904 ff8 fs5 fc0 sc0 ls0 ws13a">modified_within(sys<span class="fc6">.</span>argv[<span class="fc7 ls34">1</span><span class="ws159">], </span><span class="fca">float</span>(sys<span class="fc6">.</span>argv[<span class="fc7 ls34">2</span>]))</div><div class="t m0 x0 h7 y323b ff1 fs3 fc0 sc0 ls0 ws1239">在此函数的基<span class="_ _6"></span>础之上，使用 <span class="ff4 ws123a">os,os.path,glob </span><span class="ls82 ws2f9">等类似模块，你就能实现更加复杂的操</span></div><div class="t m0 x5 h7 y323c ff1 fs3 fc0 sc0 ls0 ws14">作了。可参考 <span class="ff4 ws1d0">5.11 </span><span class="ws38">小节和 <span class="ff4 wsca">5.13 </span>小节等相关章节。</span></div><div class="t m0 x5 hd y323d ff2 fs4 fc4 sc0 ls0 wsd91">15.10<span class="_ _e"> </span>13.10 <span class="ff1">读取配置文件</span></div><div class="t m0 x5 he y323e ff2 fs2 fc4 sc0 ls0 wsadf">15.10.1 <span class="ff1">问题</span></div><div class="t m0 x0 h7 y323f ff1 fs3 fc0 sc0 ls0 wsa0">怎样读取普通<span class="ff4 wse55">.ini </span>格式的配置文件？</div><div class="t m0 x5 he y3240 ff2 fs2 fc4 sc0 ls0 wsadf">15.10.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 y3241 ff6 fs3 fc0 sc0 ls0 ws1dc">configparser <span class="ff1">模块能被用来读取配置文件。例如，假设你有如下的配置文件：</span></div><div class="t m0 x5 hf y3242 ff8 fs5 fc0 sc0 ls0 ws4">; config.ini</div><div class="t m0 x5 hf y719 ff8 fs5 fc0 sc0 ls0 ws4">; Sample configuration file</div><div class="t m0 x5 hf y3243 ff8 fs5 fc0 sc0 ls0">[installation]</div><div class="t m0 x5 hf y1709 ff8 fs5 fc0 sc0 ls0">library=%(prefix)s/lib</div><div class="t m0 x5 hf y170a ff8 fs5 fc0 sc0 ls0">include=%(prefix)s/include</div><div class="t m0 x5 hf y170b ff8 fs5 fc0 sc0 ls0">bin=%(prefix)s/bin</div><div class="t m0 x5 hf y170c ff8 fs5 fc0 sc0 ls0">prefix=/usr/local</div><div class="t m0 x5 hf y3244 ff8 fs5 fc0 sc0 ls0 ws4"># Setting related to debug configuration</div><div class="t m0 x5 hf y170e ff8 fs5 fc0 sc0 ls0">[debug]</div><div class="t m0 x5 hf y170f ff8 fs5 fc0 sc0 ls0">log_errors=true</div><div class="t m0 x5 hf y3245 ff8 fs5 fc0 sc0 ls0">show_warnings=False</div><div class="t m0 x5 hf y3246 ff8 fs5 fc0 sc0 ls0">[server]</div><div class="t m0 x5 hf y3247 ff8 fs5 fc0 sc0 ls0 ws4">port: 8080</div><div class="t m0 x5 hf y1714 ff8 fs5 fc0 sc0 ls0 ws4">nworkers: 32</div><div class="t m0 x5 hf y1715 ff8 fs5 fc0 sc0 ls0">pid-file=/tmp/spam.pid</div><div class="t m0 x5 hf y1716 ff8 fs5 fc0 sc0 ls0">root=/www/root</div><div class="t m0 x5 hf y1717 ff8 fs5 fc0 sc0 ls0">signature:</div><div class="t m0 x15 hf y1e3f ff8 fs5 fc0 sc0 ls0">=================================</div><div class="t m0 x15 hf y3248 ff8 fs5 fc0 sc0 ls0 ws4">Brought to you by the Python Cookbook</div><div class="t m0 x15 hf y3249 ff8 fs5 fc0 sc0 ls0">=================================</div><div class="t m0 x0 h9 y324a ff1 fs3 fc0 sc0 ls0">下面是一个读取和提取其中值的例子：</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 wsd97">15.10.<span class="_ _36"> </span>13.10 <span class="ff1 wse4d">读取配置文件 </span>504</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

<div id="pf83" class="pf w0 h0" data-page-no="83"><div class="pc pc83 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg83.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x0 h9 y2a ff1 fs3 fc0 sc0 ls3a ws153">跳过一个可迭代对象的开始部分跟通常的过滤是不同的。比如，上述代码的第一个</div><div class="t m0 x5 h9 y2b ff1 fs3 fc0 sc0 ls0">部分可能会这样重写：</div><div class="t m0 x5 hf y48d ff7 fs5 fca sc0 ls0 ws15a">with <span class="ff8 ws13a">open<span class="fc0">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">/etc/passwd<span class="ff9 ls34">&apos;</span></span><span class="ls32">)</span></span></span><span class="ws157">as <span class="ff8 fc0">f:</span></span></div><div class="t m0 x15 hf y48e ff8 fs5 fc0 sc0 ls0 ws15f">lines <span class="fc6 ls33">=</span>(line <span class="ff7 fca ws139">for </span><span class="ws13c">line <span class="ff7 fca ws157">in </span><span class="ls32">f</span><span class="ff7 fca ws157">if not </span><span class="ws13a">line<span class="fc6 ls34">.</span>startswith(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">#<span class="ff9 ls34">&apos;</span></span>))</span></span></div><div class="t m0 x15 hf y48f ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws161">line </span><span class="ws160">in <span class="ff8 fc0">lines:</span></span></div><div class="t m0 x16 hf y490 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ws4">(line, end<span class="fc6 ws13a">=<span class="ff9 fc9 ls34">&apos;&apos;</span></span>)</span></div><div class="t m0 x0 h9 ye72 ff1 fs3 fc0 sc0 ls63 ws21f">这样写确实可以跳过开始部分的注释行<span class="_ _c"></span>，但是同样也会跳过文件中其他所有的注<span class="_ _1"></span></div><div class="t m0 x5 h9 ye73 ff1 fs3 fc0 sc0 ls2c ws12f">释行。换句话讲，我们的解决方案是仅仅跳过开始部分满足测试条件的行<span class="_ _1"></span>，在那以后，</div><div class="t m0 x5 h9 ye74 ff1 fs3 fc0 sc0 ls0">所有的元素不再进行测试和过滤了。</div><div class="t m0 x0 h9 ye75 ff1 fs3 fc0 sc0 ls3a ws153">最后需要着重强调的一点是，本节的方案适用于所有可迭代对象，包括那些事先不</div><div class="t m0 x5 h9 y883 ff1 fs3 fc0 sc0 ls0">能确定大小的，比如生成器，文件及其类似的对象。</div><div class="t m0 x5 hd ye76 ff2 fs4 fc4 sc0 ls0 ws134">6.9<span class="_ _e"> </span>4.9 <span class="ff1">排列组合的迭代</span></div><div class="t m0 x5 he ye77 ff2 fs2 fc4 sc0 ls0 ws135">6.9.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 ye78 ff1 fs3 fc0 sc0 ls0">你想迭代遍历一个集合中元素的所有可能的排列或组合</div><div class="t m0 x5 he ye79 ff2 fs2 fc4 sc0 ls0 ws135">6.9.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h7 ye7a ff4 fs3 fc0 sc0 ls0 ws5af">iterto<span class="_ _6"></span>ols <span class="ff1 ws5b0">模 块 提 供 了 三 个 函 数 来 解 决 这 类 问 题。<span class="_ _26"> </span>其 中 一 个 是</span></div><div class="t m0 x5 h9 ye7b ff6 fs3 fc0 sc0 ls0 ws5b1">itertools.permutations() <span class="ff1 lsf1 ws5b2">，它接受一个集合并产生一个元组序列<span class="_ _1d"></span>，每个元组<span class="_ _1d"></span></span></div><div class="t m0 x5 h9 ye7c ff1 fs3 fc0 sc0 ls2d ws132">由集合中所有元素的一个可能排列组成。也就是说通过打乱集合中元素排列顺序生成<span class="_ _1"></span></div><div class="t m0 x5 h9 ye7d ff1 fs3 fc0 sc0 ls0">一个元组，比如：</div><div class="t m0 x5 hf ye7e ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws15f">items <span class="fc6 ls33">=</span><span class="ws13a">[<span class="ff9 fc9 ls34">&apos;<span class="ff8">a</span>&apos;</span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;<span class="ff8">b</span><span class="ls0 ws13b">&apos;</span></span><span class="ls33">,</span></span><span class="ff9 fc9 ws13b">&apos;<span class="ff8 ls34">c<span class="ff9">&apos;</span></span></span>]</span></span></div><div class="t m0 x5 hf ye7f ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws15a">from <span class="fcc ws285">itertools </span><span class="ws146">import <span class="ff8 fc0">permutations</span></span></span></div><div class="t m0 x5 hf ye80 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">for <span class="ff8 fc0 ls32">p</span><span class="ws157">in <span class="ff8 fc0">permutations(items):</span></span></span></div><div class="t m0 x5 hf ye81 ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws156">print<span class="ff8 fc0">(p)</span></span></div><div class="t m0 x5 h10 ye82 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf ye83 ff8 fs5 fc8 sc0 ls34">(<span class="ff9 ls0 ws13b">&apos;</span>a<span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span>b<span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span><span class="ls0 ws13a">c</span><span class="ff9">&apos;</span><span class="ls0">)</span></div><div class="t m0 x5 hf ye84 ff8 fs5 fc8 sc0 ls34">(<span class="ff9 ls0 ws13b">&apos;</span>a<span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span>c<span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span><span class="ls0 ws13a">b</span><span class="ff9">&apos;</span><span class="ls0">)</span></div><div class="t m0 x5 hf ye85 ff8 fs5 fc8 sc0 ls34">(<span class="ff9 ls0 ws13b">&apos;</span>b<span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span>a<span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span><span class="ls0 ws13a">c</span><span class="ff9">&apos;</span><span class="ls0">)</span></div><div class="t m0 x5 hf ye86 ff8 fs5 fc8 sc0 ls34">(<span class="ff9 ls0 ws13b">&apos;</span>b<span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span>c<span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span><span class="ls0 ws13a">a</span><span class="ff9">&apos;</span><span class="ls0">)</span></div><div class="t m0 x5 hf ye87 ff8 fs5 fc8 sc0 ls34">(<span class="ff9 ls0 ws13b">&apos;</span>c<span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span>a<span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span><span class="ls0 ws13a">b</span><span class="ff9">&apos;</span><span class="ls0">)</span></div><div class="t m0 x5 hf ye88 ff8 fs5 fc8 sc0 ls34">(<span class="ff9 ls0 ws13b">&apos;</span>c<span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span>b<span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span><span class="ls0 ws13a">a</span><span class="ff9">&apos;</span><span class="ls0">)</span></div><div class="t m0 x5 hf ye89 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 ye8a ff1 fs3 fc0 sc0 ls0">如果你想得到指定长度的所有排列，你可以传递一个可选的长度参数。就像这样：</div><div class="t m0 x5 hf ye6e ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">for <span class="ff8 fc0 ls32">p</span><span class="ws157">in <span class="ff8 fc0 ws5b3">permutations(items, <span class="fc7 ls34">2</span>):</span></span></span></div><div class="t m0 x5 hf ye6f ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws156">print<span class="ff8 fc0">(p)</span></span></div><div class="t m0 x5 h10 ye70 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf ye71 ff8 fs5 fc8 sc0 ls34">(<span class="ff9 ls0 ws13b">&apos;</span>a<span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span>b<span class="ff9">&apos;</span><span class="ls0">)</span></div><div class="t m0 x5 hf ye8b ff8 fs5 fc8 sc0 ls34">(<span class="ff9 ls0 ws13b">&apos;</span>a<span class="ff9">&apos;</span><span class="ls32">,</span><span class="ff9">&apos;</span>c<span class="ff9">&apos;</span><span class="ls0">)</span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">6.9.<span class="_ _5"> </span>4.9 <span class="ff1 ws582">排列组合的迭代 </span>122</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

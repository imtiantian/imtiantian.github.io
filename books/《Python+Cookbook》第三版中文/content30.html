<div id="pf1e" class="pf w0 h0" data-page-no="1e"><div class="pc pc1e w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg1e.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x0 h9 y2a ff1 fs3 fc0 sc0 ls60 ws20f">尽管字典的 <span class="ff6 ls0 ws210">values() <span class="ff1 wsa0">方<span class="_ _6"></span>法<span class="_ _0"></span>也<span class="_ _6"></span>是<span class="_ _0"></span>类<span class="_ _6"></span>似，<span class="_ _0"></span>但<span class="_ _6"></span>是<span class="_ _0"></span>它<span class="_ _6"></span>并<span class="_ _0"></span>不<span class="_ _6"></span>支<span class="_ _0"></span>持<span class="_ _6"></span>这<span class="_ _0"></span>里<span class="_ _6"></span>介<span class="_ _0"></span>绍<span class="_ _6"></span>的<span class="_ _0"></span>集<span class="_ _6"></span>合<span class="_ _6"></span>操<span class="_ _0"></span>作。<span class="_ _6"></span>某</span></span></div><div class="t m0 x5 h9 y2b ff1 fs3 fc0 sc0 ls2d ws132">种程度上是因为值视图不能保证所有的值互不相同，这样会导致某些集合操作会出现<span class="_ _1"></span></div><div class="t m0 x5 h9 y2c ff1 fs3 fc0 sc0 ls1e ws111">问题<span class="_ _1"></span>。不过，如果你硬要在值上面执<span class="_ _1"></span>行这些集合操作的话，你可以先将值集合转<span class="_ _1"></span>换成</div><div class="t m0 x5 h7 y2d ff4 fs3 fc0 sc0 ls0 wsa5">set<span class="ff1">，然后再执行集合运算就行了。</span></div><div class="t m0 x5 hd yb9 ff2 fs4 fc4 sc0 ls0 ws211">3.10<span class="_ _e"> </span>1.10 <span class="ff1">删除序列相同元素并保持顺序</span></div><div class="t m0 x5 he y2d3 ff2 fs2 fc4 sc0 ls0 ws212">3.10.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 y2d4 ff1 fs3 fc0 sc0 ls0">怎样在一个序列上面保持元素顺序的同时消除重复的值？</div><div class="t m0 x5 he y2d5 ff2 fs2 fc4 sc0 ls0 ws212">3.10.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 y2d6 ff1 fs3 fc0 sc0 ls3d ws213">如果序列上的值都是 <span class="ff6 ls0 ws214">hashable </span><span class="ws164">类型，那么可以很简单的利用集合或者生成器来解<span class="_ _1"></span></span></div><div class="t m0 x5 h9 y2d7 ff1 fs3 fc0 sc0 ls0">决这个问题。比如：</div><div class="t m0 x5 hf y2d8 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">dedupe<span class="fc0">(items):</span></span></div><div class="t m0 x15 hf y2d9 ff8 fs5 fc0 sc0 ls0 ws13c">seen <span class="fc6 ls32">=</span><span class="fca ws13a">set</span>()</div><div class="t m0 x15 hf y2da ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws161">item </span><span class="ws160">in <span class="ff8 fc0">items:</span></span></div><div class="t m0 x16 hf y2db ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 fc0 ws13c">item </span>not in <span class="ff8 fc0">seen:</span></div><div class="t m0 x17 hf y2dc ff7 fs5 fca sc0 ls0 ws16a">yield <span class="ff8 fc0">item</span></div><div class="t m0 x17 hf y2dd ff8 fs5 fc0 sc0 ls0 ws13a">seen<span class="fc6">.</span>add(item)</div><div class="t m0 x0 h9 y2de ff1 fs3 fc0 sc0 ls0">下面是使用上述函数的例子：</div><div class="t m0 x5 hf y2df ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">a<span class="fc6 ls33">=</span><span class="ls34">[<span class="fc7 ls0 ws13a">1</span><span class="ls33">,<span class="fc7 ls0 ws13a">5</span>,</span><span class="fc7">2</span></span>,<span class="fc7 ls34">1</span>,<span class="fc7 ls34">9</span>,<span class="fc7 ls34">1</span><span class="ls33">,<span class="fc7 ls0 ws13a">5</span>,<span class="fc7 ls0 ws13a">10<span class="fc0">]</span></span></span></span></div><div class="t m0 x5 hf y2e0 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fca ws13a">list<span class="fc0">(dedupe(a))</span></span></div><div class="t m0 x5 hf y2e1 ff8 fs5 fc8 sc0 ls0 ws4">[1, 5, 2, 9, 10]</div><div class="t m0 x5 hf y2e2 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y2e3 ff1 fs3 fc0 sc0 ls3d ws215">这个方法仅仅在序列中元素为 <span class="ff6 ls0 ws214">hashable </span><span class="ws164">的时候才管用。如果你想消除元素不可哈<span class="_ _1"></span></span></div><div class="t m0 x5 h7 y2e4 ff1 fs3 fc0 sc0 ls61">希<span class="ff4 ls1b">(</span><span class="ls0 ws216">比如 <span class="ff6 ws217">dict </span><span class="wsa0">类<span class="_ _6"></span>型<span class="ff4 ls62">)</span></span></span><span class="ls22 ws119">的序列中重复元素的话，你需要将上述代码稍微改变一下，就像<span class="_ _c"></span></span></div><div class="t m0 x5 h9 y2a9 ff1 fs3 fc0 sc0 ls0">这样：</div><div class="t m0 x5 hf y2e5 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">dedupe<span class="fc0 ws4">(items, key<span class="fc6 ls34">=</span></span><span class="fca">None<span class="fc0">):</span></span></span></div><div class="t m0 x15 hf y2e6 ff8 fs5 fc0 sc0 ls0 ws13c">seen <span class="fc6 ls32">=</span><span class="fca ws13a">set</span>()</div><div class="t m0 x15 hf y2e7 ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws161">item </span><span class="ws160">in <span class="ff8 fc0">items:</span></span></div><div class="t m0 x16 hf y2e8 ff8 fs5 fc0 sc0 ls0 ws158">val <span class="fc6 ls32">=</span><span class="ws13c">item <span class="ff7 fca ws157">if </span></span>key <span class="ff7 fca ws157">is <span class="ff8 ws13c">None </span><span class="ws218">else </span></span>key(item)</div><div class="t m0 x16 hf y2e9 ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 fc0 ws158">val </span>not in <span class="ff8 fc0">seen:</span></div><div class="t m0 x17 hf y2ea ff7 fs5 fca sc0 ls0 ws16a">yield <span class="ff8 fc0">item</span></div><div class="t m0 x17 hf y2eb ff8 fs5 fc0 sc0 ls0 ws13a">seen<span class="fc6">.</span>add(val)</div><div class="t m0 x0 h7 y2ec ff1 fs3 fc0 sc0 ls0 ws219">这里的 <span class="ff4 ws21a">key </span><span class="ls2b ws21b">参数指定了一个函数<span class="_ _1"></span>，将序列元素转换成 <span class="ff6 ls0 ws21c">hashable </span><span class="ws12e">类型。下面是它的</span></span></div><div class="t m0 x5 h9 y2ed ff1 fs3 fc0 sc0 ls0">用法示例：</div><div class="t m0 x5 hf y2ee ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">a<span class="fc6 ls33">=</span><span class="ls0 ws13b">[ {<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws13a">x<span class="ff9 ls34">&apos;</span></span><span class="ls34">:<span class="fc7">1</span></span></span>,<span class="ff9 fc9 ls34">&apos;<span class="ff8">y</span><span class="ls0 ws13b">&apos;</span></span><span class="ls34">:<span class="fc7">2</span><span class="ls0 ws13b">}, {<span class="ff9 fc9">&apos;</span></span><span class="fc9">x<span class="ff9">&apos;</span></span>:<span class="fc7 ls0 ws13a">1</span><span class="ls33">,</span></span></span><span class="ff9 fc9 ws13b">&apos;<span class="ff8 ls34">y<span class="ff9">&apos;</span><span class="fc0">:<span class="fc7 ls0 ws13a">3<span class="fc0 ws4">}, {</span></span></span><span class="ff9">&apos;</span>x</span>&apos;<span class="ff8 fc0 ls34">:<span class="fc7">1</span><span class="ls32">,</span></span><span class="ls34">&apos;<span class="ff8">y</span>&apos;</span><span class="ff8 fc0 ws13a">:<span class="fc7 ls34">2</span><span class="ws13b">}, {</span></span><span class="ls34">&apos;</span><span class="ff8 ws13a">x</span><span class="ls34">&apos;<span class="ff8 fc0">:<span class="fc7">2</span><span class="ls32">,</span></span>&apos;</span><span class="ff8 ws13a">y</span><span class="ls34">&apos;<span class="ff8 fc0">:<span class="fc7">4</span><span class="ls0">}]</span></span></span></span></div><div class="t m0 x5 hf y2ef ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fca ws13a">list<span class="fc0 ws13b">(dedupe(a, key<span class="fc6 ls34">=</span></span><span class="ff7 ws146">lambda </span><span class="fc0 ws13b">d: (d[<span class="ff9 fc9 ls34">&apos;<span class="ff8">x</span><span class="ls0">&apos;</span></span><span class="ws13a">],d[<span class="ff9 fc9 ls34">&apos;<span class="ff8">y</span><span class="ls0 ws13b">&apos;</span></span>])))</span></span></span></div><div class="t m0 x5 hf y2f0 ff8 fs5 fc8 sc0 ls0 ws13a">[{<span class="ff9 ls34">&apos;<span class="ff8">x</span>&apos;</span><span class="ws13b">: 1, <span class="ff9 ls34">&apos;<span class="ff8">y</span><span class="ls0">&apos;</span></span><span class="ws4">: 2}, {</span><span class="ff9">&apos;</span><span class="ls34">x<span class="ff9">&apos;</span></span>: 1, <span class="ff9 ls34">&apos;<span class="ff8">y</span>&apos;</span>: 3}, {<span class="ff9">&apos;</span><span class="ls34">x<span class="ff9">&apos;</span></span>: 2, <span class="ff9 ls34">&apos;<span class="ff8">y</span>&apos;</span>: 4}]</span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">3.10.<span class="_ _5"> </span>1.10 <span class="ff1 ws21e">删除序列相同元素并保持顺序 </span>21</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

<div id="pfc9" class="pf w0 h0" data-page-no="c9"><div class="pc pcc9 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bgc9.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 h11 y15f ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Some byte data</span></div><div class="t m0 x5 hf y160 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">s<span class="fc6 ls33">=</span><span class="ls34">b</span></span><span class="ff9 fc9 ws13b">&apos;<span class="ff8 ws13a">hello</span>&apos;</span></div><div class="t m0 x5 h10 y956 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">base64</span></span></div><div class="t m0 x5 h11 y958 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Encode as Base64</span></div><div class="t m0 x5 hf y959 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">a<span class="fc6 ls33">=</span><span class="ls0 ws13a">base64<span class="fc6 ls34">.</span>b64encode(s)</span></span></div><div class="t m0 x5 hf y95a ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">a</span></div><div class="t m0 x5 hf y95b ff8 fs5 fc8 sc0 ls34">b<span class="ff9 ls0 ws13b">&apos;</span><span class="ls0 ws13a">aGVsbG8=<span class="ff9">&apos;</span></span></div><div class="t m0 x5 h11 y9f3 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ffa fcd ws4"># Decode from Base64</span></div><div class="t m0 x5 hf y9f4 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">base64<span class="fc6 ls34">.</span>b64decode(a)</span></div><div class="t m0 x5 hf y95d ff8 fs5 fc8 sc0 ls34">b<span class="ff9 ls0 ws13b">&apos;</span><span class="ls0 ws13a">hello<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y95e ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x5 he y15e1 ff2 fs2 fc4 sc0 ls0 ws212">8.10.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h7 y116a ff4 fs3 fc0 sc0 ls0 ws897">Base64 <span class="ff1 ls48 ws242">编码仅仅用于面向字节的数据比如字节字符串和字节数组<span class="_ _1"></span>。此外，编码处<span class="_ _c"></span></span></div><div class="t m0 x5 h7 y15e2 ff1 fs3 fc0 sc0 ls0 ws898">理的输<span class="_ _6"></span>出结果<span class="_ _6"></span>总是<span class="_ _6"></span>一个字<span class="_ _6"></span>节字符<span class="_ _6"></span>串。如果<span class="_ _6"></span>你想混<span class="_ _6"></span>合使用 <span class="ff4 ws899">Base64 </span><span class="ws45d">编<span class="_ _6"></span>码的数<span class="_ _6"></span>据和 <span class="ff4 wsa5">Unico<span class="_ _6"></span>de</span></span></div><div class="t m0 x5 h9 y116c ff1 fs3 fc0 sc0 ls0">文本，你必须添加一个额外的解码步骤。例如：</div><div class="t m0 x5 hf y15e3 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ls32">a<span class="fc6 ls33">=</span><span class="ls0 ws13a">base64<span class="fc6 ls34">.</span>b64encode(s)<span class="fc6">.</span>decode(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">ascii<span class="ff9 ls34">&apos;</span></span>)</span></span></div><div class="t m0 x5 hf yc8d ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">a</span></div><div class="t m0 x5 hf y15e4 ff9 fs5 fc8 sc0 ls34">&apos;<span class="ff8 ls0 ws13a">aGVsbG8=<span class="ff9">&apos;</span></span></div><div class="t m0 x5 hf y15e5 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y15e6 ff1 fs3 fc0 sc0 lsa8 ws89a">当解码 <span class="ff4 ls0 ws89b">Base64 </span><span class="ls12 ws89c">的时候，字节字符串和 <span class="ff4 ls0 ws89d">Unicode </span><span class="wse4">文本都可以作为参数。但是<span class="_ _1"></span>，<span class="ff4 ls0">Uni-</span></span></span></div><div class="t m0 x5 h7 y15e7 ff4 fs3 fc0 sc0 ls0 ws89e">co<span class="_ _6"></span>de <span class="ff1 ws63">字符串只能包含 </span><span class="ws89f">ASCI<span class="_ _6"></span>I <span class="ff1">字符。</span></span></div><div class="t m0 x5 hd ya27 ff2 fs4 fc4 sc0 ls0 ws211">8.11<span class="_ _e"> </span>6.11 <span class="ff1">读写二进制数组数据</span></div><div class="t m0 x5 he y7be ff2 fs2 fc4 sc0 ls0 ws212">8.11.1 <span class="ff1">问题</span></div><div class="t m0 x0 h7 y8f5 ff1 fs3 fc0 sc0 ls0 ws14">你想读写一个二进制数组的结构化数据到 <span class="ff4 ws5c">Python </span>元组中。</div><div class="t m0 x5 he y15e8 ff2 fs2 fc4 sc0 ls0 ws212">8.11.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h7 y15e9 ff1 fs3 fc0 sc0 ls0 ws8a0">可以<span class="_ _6"></span>使<span class="_ _6"></span>用 <span class="ff6 ws3cf">struct </span><span class="ls22 ws8a1">模块处理二进制数据<span class="_ _1"></span>。下面是一段示例代码将一个 <span class="ff4 ls0 ws759">Python <span class="ff1 wsa0">元<span class="_ _6"></span>组</span></span></span></div><div class="t m0 x5 h9 y15ea ff1 fs3 fc0 sc0 ls0 ws38">列表写入一个二进制文件，并使用 <span class="ff6 ws25d">struct </span>将每个元组编码为一个结构体。</div><div class="t m0 x5 hf y15eb ff7 fs5 fca sc0 ls0 ws15a">from <span class="fcc ws146">struct <span class="fca">import <span class="ff8 fc0">Struct</span></span></span></div><div class="t m0 x5 hf y15ec ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">write_records<span class="fc0 ws4">(records, format, f):</span></span></div><div class="t m0 x15 h15 y15ed ffb fs5 fc9 sc0 ls0">&apos;&apos;&apos;</div><div class="t m0 x15 h11 y15ee ffa fs5 fc9 sc0 ls0 ws4">Write a sequence of tuples to a binary file of structures.</div><div class="t m0 x15 h15 y15ef ffb fs5 fc9 sc0 ls0">&apos;&apos;&apos;</div><div class="t m0 x15 hf y15f0 ff8 fs5 fc0 sc0 ls0 ws147">record_struct <span class="fc6 ls33">=</span>Struct(format)</div><div class="t m0 x15 hf y15f1 ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ls32">r</span><span class="ws157">in <span class="ff8 fc0">records:</span></span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">8.11.<span class="_ _5"> </span>6.11 <span class="ff1 ws544">读写二进制数组数据 </span>192</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

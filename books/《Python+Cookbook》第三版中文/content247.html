<div id="pff7" class="pf w0 h0" data-page-no="f7"><div class="pc pcf7 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bgf7.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 h9 y2a ff1 fs3 fc0 sc0 ls0 wsa23">是内<span class="_ _6"></span>部<span class="_ _6"></span>实现。<span class="_ _6"></span>类<span class="_ _6"></span>似<span class="_ _6"></span>的，模<span class="_ _6"></span>块<span class="_ _6"></span>级别<span class="_ _6"></span>函<span class="_ _6"></span>数比<span class="_ _6"></span>如 <span class="ff6 ws247">sys. getframe() </span><span class="ls22 ws119">在使用的时候就得加倍小</span></div><div class="t m0 x5 h9 y2b ff1 fs3 fc0 sc0 ls0">心了。</div><div class="t m0 x0 h7 y8dd ff1 fs3 fc0 sc0 ls0 ws38">你还可能会遇到在类定义中使用两个下划线 <span class="ff4 wsa24">(<span class="_ _e"> </span>) </span>开头的命名。比如：</div><div class="t m0 x5 hf y1aad ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ls34">B</span><span class="ff8 fc0">:</span></div><div class="t m0 x15 hf y1aae ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1aaf ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws51e">__private </span><span class="ls32">=</span><span class="fc7">0</span></span></div><div class="t m0 x15 hf y1ab0 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__private_method<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0">):</span></span></span></div><div class="t m0 x16 h10 y1ab1 ff7 fs5 fca sc0 ls0">pass</div><div class="t m0 x15 hf y1ab2 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">public_method<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0">):</span></span></span></div><div class="t m0 x16 h10 y1ab3 ff7 fs5 fca sc0 ls0">pass</div><div class="t m0 x16 hf y1ab4 ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0">__private_method()</span></span></div><div class="t m0 x0 h7 y1ab5 ff1 fs3 fc0 sc0 ls0 wsa25">使<span class="_ _6"></span>用双<span class="_ _6"></span>下<span class="_ _6"></span>划<span class="_ _6"></span>线<span class="_ _6"></span>开<span class="_ _6"></span>始会<span class="_ _6"></span>导<span class="_ _6"></span>致<span class="_ _6"></span>访<span class="_ _6"></span>问<span class="_ _6"></span>名称<span class="_ _6"></span>变<span class="_ _6"></span>成<span class="_ _6"></span>其<span class="_ _6"></span>他<span class="_ _6"></span>形式。<span class="_ _6"></span>比<span class="_ _6"></span>如，<span class="_ _6"></span>在<span class="_ _6"></span>前<span class="_ _6"></span>面<span class="_ _6"></span>的类 <span class="ff4 ls164">B</span><span class="wsa0">中，<span class="_ _6"></span>私<span class="_ _6"></span>有</span></div><div class="t m0 x5 h9 y1ab6 ff1 fs3 fc0 sc0 ls1e wsa26">属性会被分别重命名为 <span class="ff6 ls0 ws298">B<span class="_ _e"> </span>private </span><span class="ls165">和<span class="ff6 ls0 ws470">B<span class="_ _e"> </span>private method </span></span><span class="ws111">。这时候你可能会问这样</span></div><div class="t m0 x5 h9 y1ab7 ff1 fs3 fc0 sc0 ls0 wsa0">重命名的目的是什么，答案就是继承—<span class="_ _8"></span>—这种属性通过继承是无法被覆盖的。比如：</div><div class="t m0 x5 hf y1ab8 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ls34">C</span><span class="ff8 fc0">(B):</span></div><div class="t m0 x15 hf y1ab9 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1aba ff8 fs5 fca sc0 ls0 ws13a">super<span class="fc0">()<span class="fc6 ls34">.</span>__init__()</span></div><div class="t m0 x16 hf y1abb ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws51e">__private </span><span class="ls32">=<span class="fc7 ls33">1</span></span><span class="ffa fcd ws4"># Does not override B.__private</span></span></div><div class="t m0 x15 h11 y1abc ffa fs5 fcd sc0 ls0 ws4"># Does not override B.__private_method()</div><div class="t m0 x15 hf y1abd ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__private_method<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0">):</span></span></span></div><div class="t m0 x16 h10 y1abe ff7 fs5 fca sc0 ls0">pass</div><div class="t m0 x0 h9 y1a21 ff1 fs3 fc0 sc0 ls0 wsa27">这 里， 私 有 名 称<span class="_ _2a"> </span><span class="ff6 wsa28">private </span><span class="ls166">和</span><span class="ff6 ws470">private method<span class="_ _1c"> </span></span>被 重 命 名 为<span class="_ _2b"> </span><span class="ff6 wsa28">C<span class="_ _e"> </span>private </span>和</div><div class="t m0 x33 h7 y1abf ff6 fs3 fc0 sc0 ls0 ws25d">C<span class="_ _e"> </span>private<span class="_ _7"> </span>method <span class="ff1 ws14">，这个跟父类 <span class="ff4 ls167">B</span>中的名称是完全不同的。</span></div><div class="t m0 x5 he y1ac0 ff2 fs2 fc4 sc0 ls0 ws212">10.5.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h7 y1ac1 ff1 fs3 fc0 sc0 ls10 wsa29">上面提到有两种不同的编码约定 <span class="ff4 ls0 wsa5">(</span><span class="wsdf">单下划线和双下划线<span class="_ _1"></span><span class="ff4 ls168">)<span class="ff1 ls10">来命名私有属性，那么问<span class="_ _c"></span></span></span></span></div><div class="t m0 x5 h9 y1ac2 ff1 fs3 fc0 sc0 ls0 wsa0">题<span class="_ _6"></span>就来<span class="_ _6"></span>了：<span class="_ _6"></span>到<span class="_ _6"></span>底<span class="_ _6"></span>哪<span class="_ _6"></span>种方<span class="_ _6"></span>式<span class="_ _6"></span>好<span class="_ _6"></span>呢？<span class="_ _6"></span>大<span class="_ _6"></span>多数<span class="_ _6"></span>而<span class="_ _6"></span>言，<span class="_ _6"></span>你<span class="_ _6"></span>应<span class="_ _6"></span>该<span class="_ _6"></span>让你<span class="_ _6"></span>的<span class="_ _6"></span>非<span class="_ _6"></span>公<span class="_ _6"></span>共<span class="_ _6"></span>名称<span class="_ _6"></span>以<span class="_ _6"></span>单<span class="_ _6"></span>下<span class="_ _6"></span>划<span class="_ _6"></span>线开</div><div class="t m0 x5 h9 y1ac3 ff1 fs3 fc0 sc0 ls1e ws111">头<span class="_ _1"></span>。但是，如果你清楚你的代码会涉<span class="_ _1"></span>及到子类，并且有些内部属性应该在子类中<span class="_ _1"></span>隐藏</div><div class="t m0 x5 h9 y1ac4 ff1 fs3 fc0 sc0 ls0">起来，那么才考虑使用双下划线方案。</div><div class="t m0 x0 h9 y1ac5 ff1 fs3 fc0 sc0 ls3a ws153">还有一点要注意的是，有时候你定义的一个变量和某个保留关键字冲突，这时候可</div><div class="t m0 x5 h9 y1ac6 ff1 fs3 fc0 sc0 ls0">以使用单下划线作为后缀，例如：</div><div class="t m0 x5 hf y1ac7 ff8 fs5 fc0 sc0 ls0 ws155">lambda_ <span class="fc6 ls32">=</span><span class="fc7 ws158">2.0 <span class="ffa fcd ws4"># Trailing _ to avoid clash with lambda keyword</span></span></div><div class="t m0 x0 h7 y1ac8 ff1 fs3 fc0 sc0 lse ws667">这里我们并不使用单下划线前缀的原因是它避免误解它的使用初衷 <span class="ff4 ls0 wsa5">(<span class="ff1 wsa0">如使用<span class="_ _6"></span>单下划</span></span></div><div class="t m0 x5 h7 y1ac9 ff1 fs3 fc0 sc0 ls3d ws164">线前缀的目的是为了防止命名冲突而不是指明这个属性是私有的<span class="ff4 ls0 wsa5">)<span class="ff1 wsa0">。通<span class="_ _6"></span>过使用<span class="_ _6"></span>单下<span class="_ _6"></span>划线</span></span></div><div class="t m0 x5 h9 y1aca ff1 fs3 fc0 sc0 ls0">后缀可以解决这个问题。</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws9da">10.5.<span class="_ _5"> </span>8.5 <span class="ff1 ws2a4">在类中封装属性名 </span>238</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

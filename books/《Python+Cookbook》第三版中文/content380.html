<div id="pf17c" class="pf w0 h0" data-page-no="17c"><div class="pc pc17c w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg17c.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 he y137 ff2 fs2 fc4 sc0 ls0 ws212">12.5.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 y2726 ff1 fs3 fc0 sc0 ls0 wsa0">在这里工作的机制被<span class="_ _6"></span>称为“包命名空间”的一个<span class="_ _6"></span>特征。从本质上讲，包命名<span class="_ _6"></span>空间是</div><div class="t m0 x5 h9 y2727 ff1 fs3 fc0 sc0 ls13 wse5">一种特殊的封装设计<span class="_ _1"></span>，为合并不同的目录的代码到一个共同的命名空间。对于大的框<span class="_ _c"></span></div><div class="t m0 x5 h9 y2728 ff1 fs3 fc0 sc0 ls1e ws111">架<span class="_ _1"></span>，这可能是有用的，因为它允许一<span class="_ _1"></span>个框架的部分被单独地安装下载。它也使人<span class="_ _1"></span>们能</div><div class="t m0 x5 h9 y2729 ff1 fs3 fc0 sc0 ls0">够轻松地为这样的框架编写第三方附加组件和其他扩展。</div><div class="t m0 x0 h7 y272a ff1 fs3 fc0 sc0 ls1d wsd3d">包命名空间的关键是确保顶级目录中没有 <span class="ff4 ls0 wsd3e">init<span class="_ _e"> </span>.p<span class="_ _c"></span>y <span class="ff1 ls1d ws1c3">文件来作为共同的命名空间<span class="_ _1"></span>。<span class="_ _1"></span></span></span></div><div class="t m0 x5 h7 y272b ff1 fs3 fc0 sc0 ls0 wsd3f">缺失 <span class="ff4 wsd40">init<span class="_ _e"> </span>.py </span><span class="ls2b ws12e">文件<span class="_ _1"></span>使得在导入包的时候会发生有趣的事情：这并没有产生错误，解释</span></div><div class="t m0 x5 h9 y98f ff1 fs3 fc0 sc0 ls2c ws12f">器创建了一个由所有包含匹配包名的目录组成的列表。特殊的包命名空间模块被<span class="_ _1"></span>创建，</div><div class="t m0 x5 h7 y272c ff1 fs3 fc0 sc0 ls0 wsd32">只读的目录列表副本被存储在其 <span class="ff4 wsd41">path </span>变量中。举个例子：</div><div class="t m0 x5 h10 y272d ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">spam</span></span></div><div class="t m0 x5 hf y272e ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">spam<span class="fc6 ls34">.</span>__path__</span></div><div class="t m0 x5 hf y272f ff8 fs5 fc8 sc0 ls0 ws13a">_NamespacePath([<span class="ff9 ws13b">&apos;</span>foo-package/spam<span class="ff9 ls34">&apos;</span><span class="ls32">,<span class="ff9 ls34">&apos;</span></span>bar-package/spam<span class="ff9 ws13b">&apos;</span>])</div><div class="t m0 x5 hf y2730 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y39e ff1 fs3 fc0 sc0 ls1bb wsd42">在定位包的子组件时<span class="_ _1d"></span>，目录 <span class="ff4 ls0 wsd41">path </span><span class="wsd43">将被用到 <span class="ff4 ls0 wsa5">(<span class="ff1 wsd44">例 如</span><span class="ls1bc">,</span><span class="ff1 wsd44">当 导 入<span class="_ _23"> </span></span><span class="wsd45">spam.grok <span class="ff1 wsa0">或<span class="_ _25"> </span>者</span></span></span></span></div><div class="t m0 x5 h7 y2731 ff4 fs3 fc0 sc0 ls0 wsd46">spam.blah <span class="ff1 wsa0">的时候</span>).</div><div class="t m0 x0 h9 y6d9 ff1 fs3 fc0 sc0 ls3a ws153">包命名空间的一个重要特点是任何人都可以用自己的代码来扩展命名空间。举个例</div><div class="t m0 x5 h9 y2732 ff1 fs3 fc0 sc0 ls0">子，假设你自己的代码目录像这样：</div><div class="t m0 x5 hf y2733 ff8 fs5 fc0 sc0 ls0 ws13a">my<span class="fc6 ls34">-</span>package<span class="fc6">/</span></div><div class="t m0 x15 hf y2734 ff8 fs5 fc0 sc0 ls0 ws13a">spam<span class="fc6">/</span></div><div class="t m0 x16 hf y2735 ff8 fs5 fc0 sc0 ls0 ws13a">custom<span class="fc6 ls34">.</span>py</div><div class="t m0 x0 h7 y2736 ff1 fs3 fc0 sc0 ls1bd wsd47">如果你将你的代码目录和其他包一起添加到 <span class="ff4 ls0 wsa5">sys.path</span><span class="wsd48">，这将无缝地合并到别的<span class="_ _d"></span></span></div><div class="t m0 x5 h7 y2737 ff4 fs3 fc0 sc0 ls0 wsd49">spam <span class="ff1">包目录中：</span></div><div class="t m0 x5 h10 y14f7 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">spam.custom</span></span></div><div class="t m0 x5 h10 y14f8 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">spam.grok</span></span></div><div class="t m0 x5 h10 y2738 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws146">import <span class="fcc">spam.blah</span></span></div><div class="t m0 x5 hf y2739 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y273a ff1 fs3 fc0 sc0 ls42 wsd4a">一个包是否被作为一个包命名空间的主要方法是检查其 <span class="ff4 ls0 wsd4b">ﬁle <span class="ff1 wsa0">属<span class="_ _6"></span>性。如<span class="_ _6"></span>果没<span class="_ _6"></span>有，那</span></span></div><div class="t m0 x5 h7 y273b ff1 fs3 fc0 sc0 ls0 wsa0">包是个命名空间。这也可以由其字符表现形式中的“<span class="ff4 wsa5">namespace</span>”这个词体现出来。</div><div class="t m0 x5 hf y273c ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">spam<span class="fc6 ls34">.</span>__file__</span></div><div class="t m0 x5 hf y273d ff8 fs5 fce sc0 ls0 ws4">Traceback (most recent call last):</div><div class="t m0 x15 hf y273e ff8 fs5 fc0 sc0 ls0 ws13c">File <span class="fc9 ws13a">&quot;&lt;stdin&gt;&quot;</span><span class="ws145">, line <span class="fc7 ls34">1</span><span class="ls32">,</span><span class="ff7 fca ws160">in </span><span class="fc6 ws13a">&lt;<span class="fc0">module</span>&gt;</span></span></div><div class="t m0 x5 hf y273f ff8 fs5 fc2 sc0 ls0 ws13a">AttributeError<span class="fc0 ls33">:<span class="ff9 ls0 ws13b">&apos;</span><span class="ls0">module<span class="ff9 ls32">&apos;</span><span class="ws4">object has no attribute <span class="ff9 ws13b">&apos;</span></span>__file__<span class="ff9">&apos;</span></span></span></div><div class="t m0 x5 hf y2740 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0">spam</span></div><div class="t m0 x5 hf y2741 ff8 fs5 fc8 sc0 ls0 ws155">&lt;module <span class="ff9 ls34">&apos;</span><span class="ws13a">spam<span class="ff9 ls33">&apos;</span>(namespace)&gt;</span></div><div class="t m0 x5 hf y2742 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y2743 ff1 fs3 fc0 sc0 ls0 ws14">更多的包命名空间信息可以查看 <span class="ff4 fc3 wsd0">PEP 420<span class="fc0">.</span></span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">12.5.<span class="_ _5"> </span>10.5 <span class="ff1 wsd3c">利用命名空间导入目录分散的代码 </span>371</div><a class="l" href="https://www.python.org/dev/peps/pep-0420/"><div class="d m1" style="border-style:none;position:absolute;left:394.792500px;bottom:232.950000px;width:45.358000px;height:16.821000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

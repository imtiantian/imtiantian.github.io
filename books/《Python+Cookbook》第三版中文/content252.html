<div id="pffc" class="pf w0 h0" data-page-no="fc"><div class="pc pcfc w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bgfc.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 h7 y2a ff1 fs3 fc0 sc0 ls0 ws14">有很多种更好的方法来完成同样的事情。可以参考 <span class="ff4 ws171">8.9 </span><span class="ls4">和</span><span class="ff4 ws1d0">9.21 </span>小节的内容。</div><div class="t m0 x5 hd y12a2 ff2 fs4 fc4 sc0 ls0 ws9c6">10.7<span class="_ _e"> </span>8.7 <span class="ff1">调用父类方法</span></div><div class="t m0 x5 he y12a3 ff2 fs2 fc4 sc0 ls0 ws212">10.7.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 y1b44 ff1 fs3 fc0 sc0 ls0">你想在子类中调用父类的某个已经被覆盖的方法。</div><div class="t m0 x5 he y1b45 ff2 fs2 fc4 sc0 ls0 ws212">10.7.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h7 y1b46 ff1 fs3 fc0 sc0 ls0 wsc">为了调用父类 <span class="ff4 ls1b">(</span><span class="wsa0">超类<span class="ff4 ls6a">)</span><span class="ws14">的一个方法，可以使用 <span class="ff6 ws23a">super() </span>函数，比如：</span></span></div><div class="t m0 x5 hf y1b47 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ls34">A</span><span class="ff8 fc0">:</span></div><div class="t m0 x15 hf y1b48 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">spam<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1b49 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">A.spam</span>&apos;</span><span class="ls0">)</span></span></div><div class="t m0 x5 hf y1b4a ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ls34">B</span><span class="ff8 fc0">(A):</span></div><div class="t m0 x15 hf y1b4b ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">spam<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1b4c ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ls34">(<span class="ff9 fc9">&apos;<span class="ff8 ls0 ws13a">B.spam</span>&apos;</span><span class="ls0">)</span></span></div><div class="t m0 x16 hf y1b4d ff8 fs5 fca sc0 ls0 ws13a">super<span class="fc0">()<span class="fc6 ls34">.</span><span class="wsa76">spam() <span class="ffa fcd ws4"># Call parent spam()</span></span></span></div><div class="t m0 x0 h9 y1b4e ff6 fs3 fc0 sc0 ls0 ws472">super() <span class="ff1 ws911">函数的一个常见用法是在 </span><span class="ws308">init<span class="_ _e"> </span>() <span class="ff1">方法中确保父类被正确的初始化了：</span></span></div><div class="t m0 x5 hf y1b4f ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ls34">A</span><span class="ff8 fc0">:</span></div><div class="t m0 x15 hf y1b50 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1b51 ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ls33">x</span><span class="ls32">=</span><span class="fc7">0</span></span></div><div class="t m0 x5 hf y1b52 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ls34">B</span><span class="ff8 fc0">(A):</span></div><div class="t m0 x15 hf y1b53 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1b54 ff8 fs5 fca sc0 ls0 ws13a">super<span class="fc0">()<span class="fc6 ls34">.</span>__init__()</span></div><div class="t m0 x16 hf y1b55 ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ls33">y</span><span class="ls32">=</span><span class="fc7">1</span></span></div><div class="t m0 x0 h7 y9a5 ff6 fs3 fc0 sc0 ls0 ws472">super() <span class="ff1 ws14">的另外一个常见用法出现在覆盖 <span class="ff4 ws5c">Python </span>特殊方法的代码中，比如：</span></div><div class="t m0 x5 hf y1b56 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">Proxy<span class="ff8 fc0">:</span></span></div><div class="t m0 x15 hf y1b57 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span><span class="ws4">, obj):</span></span></span></div><div class="t m0 x16 hf y1b58 ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws13c">_obj </span><span class="ls33">=</span><span class="fc0">obj</span></span></div><div class="t m0 x15 h11 y1b59 ffa fs5 fcd sc0 ls0 ws4"># Delegate attribute lookup to internal obj</div><div class="t m0 x15 hf y1b5a ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__getattr__<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0 ws4">, name):</span></span></span></div><div class="t m0 x16 hf y1b5b ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 ws13a">getattr<span class="fc0 ls34">(</span>self<span class="fc6">.<span class="fc0 ws4">_obj, name)</span></span></span></div><div class="t m0 x15 h11 y1b5c ffa fs5 fcd sc0 ls0 ws4"># Delegate attribute assignment</div><div class="t m0 x15 hf y1b5d ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__setattr__<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0 ws4">, name, value):</span></span></span></div><div class="t m0 x16 hf y1b5e ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 fc0 ws13a">name<span class="fc6 ls34">.</span>startswith(<span class="ff9 fc9 ws13b">&apos;<span class="ff8 ls34">_<span class="ff9">&apos;</span></span></span>):</span></div><div class="t m0 x17 hf y1b5f ff8 fs5 fca sc0 ls0 ws13a">super<span class="fc0">()<span class="fc6 ls34">.</span><span class="ws13b">__setattr__(name, value) <span class="ffa fcd ws4"># Call original __setattr__</span></span></span></div><div class="t m0 x16 hf y1b60 ff7 fs5 fca sc0 ls0 ws156">else<span class="ff8 fc0">:</span></div><div class="t m0 x17 hf y1b61 ff8 fs5 fca sc0 ls0 ws13a">setattr<span class="fc0 ls34">(</span>self<span class="fc6 ls34">.</span><span class="fc0 ws4">_obj, name, value)</span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws9da">10.7.<span class="_ _5"> </span>8.7 <span class="ff1 ws292">调用父类方法 </span>243</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

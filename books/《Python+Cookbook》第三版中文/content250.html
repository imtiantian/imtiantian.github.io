<div id="pffa" class="pf w0 h0" data-page-no="fa"><div class="pc pcfa w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bgfa.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hf y15f ff8 fs5 fc8 sc0 ls0 ws4">&lt;function Person.first_name at 0x1006a62e0&gt;</div><div class="t m0 x5 hf y160 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y161 ff1 fs3 fc0 sc0 ls13 wsa50">通常来讲<span class="_ _1"></span>，你不会直接取调用 <span class="ff4 ls0 wsa51">fget <span class="ff1 wsa52">或<span class="_ _6"></span>者 </span><span class="wsa5">fset</span></span><span class="wsa53">，它们会在访问 <span class="ff4 ls0 wsa54">prop<span class="_ _6"></span>ert<span class="_ _1"></span>y <span class="ff1 ls13 wse5">的时候自动</span></span></span></div><div class="t m0 x5 h9 y162 ff1 fs3 fc0 sc0 ls0">被触发。</div><div class="t m0 x0 h7 y1b09 ff1 fs3 fc0 sc0 ls51 wsa55">只有当你确实需要对 <span class="ff4 ls0 wsa56">attribute </span><span class="wsa57">执行其他额外的操作的时候才应该使用到 <span class="ff4 ls0 wsa5">property<span class="ff1">。</span></span></span></div><div class="t m0 x5 h7 y1b0a ff1 fs3 fc0 sc0 ls16d wsa58">有时候一些从其他编程语言 <span class="ff4 ls0 wsa5">(<span class="ff1 wsa59">比<span class="_ _0"></span>如 </span><span class="wsa5a">Ja<span class="_ _1"></span>v<span class="_ _d"></span>a) <span class="ff1 ls16d wsa5b">过来的程<span class="_ _6"></span>序员总认为所有访问都应该通过<span class="_ _d"></span></span></span></span></div><div class="t m0 x5 h7 y1b0b ff4 fs3 fc0 sc0 ls0 wsa5c">getter <span class="ff1 ls4">和</span><span class="wsa5">setter<span class="ff1">，所以他们认为代码应该像下面这样写：</span></span></div><div class="t m0 x5 hf y1b0c ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">Person<span class="ff8 fc0">:</span></span></div><div class="t m0 x15 hf y1b0d ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span><span class="ws4">, first_name):</span></span></span></div><div class="t m0 x16 hf y5d ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws2a3">first_name </span><span class="ls33">=</span><span class="fc0">first_name</span></span></div><div class="t m0 x15 h10 y1b0e ff7 fs5 fc12 sc0 ls0">@property</div><div class="t m0 x15 hf y1b0f ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">first_name<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0">):</span></span></span></div><div class="t m0 x16 hf y1b10 ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 ws13a">self<span class="fc6 ls34">.</span><span class="fc0">_first_name</span></span></div><div class="t m0 x15 h10 y1b11 ff7 fs5 fc12 sc0 ls0">@first_name.setter</div><div class="t m0 x15 hf y1b12 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">first_name<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0 ws13b">, value):</span></span></span></div><div class="t m0 x16 hf y1b13 ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws208">_first_name </span><span class="ls33">=</span><span class="fc0">value</span></span></div><div class="t m0 x0 h7 y1b14 ff1 fs3 fc0 sc0 ls149 wsa5d">不要写这种没有做任何其他额外操作的 <span class="ff4 ls0 wsa5">prop<span class="_ _6"></span>ert<span class="_ _1"></span>y<span class="ff1 wsa0">。<span class="_ _6"></span>首<span class="_ _0"></span>先，<span class="_ _6"></span>它<span class="_ _6"></span>会<span class="_ _6"></span>让<span class="_ _0"></span>你<span class="_ _6"></span>的<span class="_ _6"></span>代<span class="_ _6"></span>码<span class="_ _0"></span>变<span class="_ _6"></span>得<span class="_ _6"></span>很</span></span></div><div class="t m0 x5 h9 y1b15 ff1 fs3 fc0 sc0 ls40 ws180">臃肿<span class="_ _1"></span>，并且还会迷惑阅读者。其次<span class="_ _c"></span>，它还会让你的程序运行起来变慢很多。最后<span class="_ _c"></span>，这</div><div class="t m0 x5 h7 y1b16 ff1 fs3 fc0 sc0 lsc8 wsa5e">样的设计并没有带来任何的好处<span class="_ _c"></span>。特别是当你以后想给普通 <span class="ff4 ls0 wsa5f">attribute <span class="ff1 wsa0">访<span class="_ _6"></span>问<span class="_ _0"></span>添<span class="_ _6"></span>加<span class="_ _6"></span>额<span class="_ _0"></span>外</span></span></div><div class="t m0 x5 h7 y1b17 ff1 fs3 fc0 sc0 ls42 wsa60">的处理逻辑的时候，你可以将它变成一个 <span class="ff4 ls0 wsa61">property </span><span class="ws186">而无需改变原来的代码<span class="_ _1"></span>。因为访问</span></div><div class="t m0 x5 h7 y1b18 ff4 fs3 fc0 sc0 ls0 ws7d8">attribute <span class="ff1">的代码还是保持原样。</span></div><div class="t m0 x0 h7 yaf0 ff4 fs3 fc0 sc0 ls0 wsa62">Prop<span class="_ _6"></span>erties <span class="ff1 ls3a ws1db">还是一种定义动态计算 </span><span class="wsa63">attribute <span class="ff1 ls3a ws358">的方法。这种类型的 </span><span class="wsa64">attributes <span class="ff1 wsa0">并不会</span></span></span></div><div class="t m0 x5 h9 y1b19 ff1 fs3 fc0 sc0 ls0">被实际的存储，而是在需要的时候计算出来。比如：</div><div class="t m0 x5 h10 y1b1a ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc">math</span></div><div class="t m0 x5 hf y1b1b ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">Circle<span class="ff8 fc0">:</span></span></div><div class="t m0 x15 hf y1b1c ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span><span class="ws4">, radius):</span></span></span></div><div class="t m0 x16 hf y1b1d ff8 fs5 fca sc0 ls0 ws13a">self<span class="fc6">.<span class="fc0 ws19f">radius </span><span class="ls32">=</span><span class="fc0">radius</span></span></div><div class="t m0 x15 h10 y1b1e ff7 fs5 fc12 sc0 ls0">@property</div><div class="t m0 x15 hf y1b1f ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">area<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1b20 ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 fc0 ws13a">math<span class="fc6 ls34">.</span><span class="ws159">pi <span class="fc6 ls32">*</span></span><span class="fca">self<span class="fc6 ls34">.</span></span><span class="ws145">radius <span class="fc6 ws23d">** <span class="fc7">2</span></span></span></span></div><div class="t m0 x15 h10 y1b21 ff7 fs5 fc12 sc0 ls0">@property</div><div class="t m0 x15 hf y1b22 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">diameter<span class="fc0">(<span class="fca">self</span>):</span></span></div><div class="t m0 x16 hf y1b23 ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 ws13a">self<span class="fc6 ls34">.</span><span class="fc0 ws145">radius <span class="fc6 ws1a1">** <span class="fc7">2</span></span></span></span></div><div class="t m0 x15 h10 y1b24 ff7 fs5 fc12 sc0 ls0">@property</div><div class="t m0 x15 hf y1b25 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">perimeter<span class="fc0 ls34">(</span><span class="fca">self<span class="fc0">):</span></span></span></div><div class="t m0 x16 hf y1b26 ff7 fs5 fca sc0 ls0 ws146">return <span class="ff8 fc7 ls32">2<span class="fc6 ls33">*<span class="fc0 ls0 ws13a">math<span class="fc6">.</span><span class="ws15c">pi </span></span><span class="ls32">*</span></span></span><span class="ff8 ws13a">self<span class="fc6 ls34">.</span><span class="fc0">radius</span></span></div><div class="t m0 x0 h7 y1b27 ff1 fs3 fc0 sc0 ls0 wsa65">在这<span class="_ _6"></span>里，<span class="_ _6"></span>我们<span class="_ _6"></span>通<span class="_ _6"></span>过使<span class="_ _6"></span>用 <span class="ff4 wsa5">prop<span class="_ _6"></span>erties</span><span class="ls6b ws28f">，将所有的访问接口形式统一起来，对半径<span class="_ _1"></span>、直</span></div><div class="t m0 x5 h7 y1b28 ff1 fs3 fc0 sc0 ls18 wsa66">径、周长和面积的访问都是通过属性访问，就跟访问简单的 <span class="ff4 ls0 wsa67">attribute </span><span class="ws110">是一样的<span class="_ _1"></span>。如果</span></div><div class="t m0 x5 h9 y1b29 ff1 fs3 fc0 sc0 ls13 wse5">不这样做的话<span class="_ _1"></span>，那么就要在代码中混合使用简单属性访问和方法调用。下面是使用的<span class="_ _c"></span></div><div class="t m0 x5 h9 y1b2a ff1 fs3 fc0 sc0 ls0">实例：</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws9da">10.6.<span class="_ _5"> </span>8.6 <span class="ff1 ws2a4">创建可管理的属性 </span>241</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

<div id="pf21b" class="pf w0 h0" data-page-no="21b"><div class="pc pc21b w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg21b.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 h10 ye49 ff7 fs5 fc5 sc0 ls0">...</div><div class="t m0 x5 hf ye4a ff8 fs5 fc8 sc0 ls34">(<span class="ff9 ls0 ws13b">&apos;</span><span class="ls0 ws4">It failed</span><span class="ff9">&apos;</span><span class="ls0 ws13b">, 42, </span><span class="ff9">&apos;</span><span class="ls0 ws13a">spam<span class="ff9 ws13b">&apos;</span>)</span></div><div class="t m0 x5 hf y2a64 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y3453 ff1 fs3 fc0 sc0 ls22e ws12d9">关于创建自定义异常的更多信息<span class="_ _f"></span>，请参考 <span class="ff4 ls0 ws12da">‘Python <span class="ff1 ws12db">官 方 文 档<span class="_ _40"> </span><span class="ff12 lsae">&lt;</span></span><span class="fc3 wsa5">https://</span></span></div><div class="t m0 x5 h7 y3454 ff4 fs3 fc3 sc0 ls0 wsa5">do<span class="_ _6"></span>cs.p<span class="_ _1"></span>ython.org/3/tutorial/errors.h<span class="_ _1"></span>tml<span class="ff12 fc0 ws305">&gt;<span class="ff4">‘</span></span></div><div class="t m0 x5 hd y3455 ff2 fs4 fc4 sc0 ls0 ws211">16.9<span class="_ _e"> </span>14.9 <span class="ff1">捕获异常后抛出另外的异常</span></div><div class="t m0 x5 he y3456 ff2 fs2 fc4 sc0 ls0 ws212">16.9.1 <span class="ff1">问题</span></div><div class="t m0 x0 h9 y25cf ff1 fs3 fc0 sc0 ls3a ws153">你想捕获一个异常后抛出另外一个不同的异常，同时还得在异常回溯中保留两个异</div><div class="t m0 x5 h9 y1ebf ff1 fs3 fc0 sc0 ls0">常的信息。</div><div class="t m0 x5 he y3457 ff2 fs2 fc4 sc0 ls0 ws212">16.9.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 y3458 ff1 fs3 fc0 sc0 ls0 ws12dc">为了链接异常，使用 <span class="ff6 ws12dd">raise<span class="_ _11"> </span>from </span><span class="ws12de">语句来代替简单的 <span class="ff6 ws1ce">raise </span><span class="wsa0">语句。它<span class="_ _6"></span>会让你同时保</span></span></div><div class="t m0 x5 h9 y304f ff1 fs3 fc0 sc0 ls0">留两个异常的信息。例如：</div><div class="t m0 x5 hf y30cf ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca">def <span class="ff8 fcb ws13a">example<span class="fc0">():</span></span></span></div><div class="t m0 x5 hf y30d0 ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws156">try<span class="ff8 fc0">:</span></span></div><div class="t m0 x5 hf y3459 ff7 fs5 fc5 sc0 ls0 ws8e2">... <span class="ff8 fca ws13a">int<span class="fc0 ls34">(</span><span class="ff9 fc9 ws13b">&apos;</span><span class="fc9">N/A<span class="ff9 ls34">&apos;</span><span class="fc0">)</span></span></span></div><div class="t m0 x5 hf y345a ff7 fs5 fc5 sc0 ls0 ws1a2">... <span class="fca ws146">except <span class="ff8 ws2a3">ValueError </span><span class="ws157">as <span class="ff8 fc0">e:</span></span></span></div><div class="t m0 x5 hf y345b ff7 fs5 fc5 sc0 ls0 ws8e2">... <span class="fca ws16a">raise <span class="ff8 ws13a">RuntimeError<span class="fc0">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">A parsing error occurred<span class="ff9 ws13b">&apos;</span></span><span class="ls33">)</span></span></span><span class="ws218">from <span class="fcc">e</span></span></span></div><div class="t m0 x5 hf ye23 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x5 hf y345c ff8 fs5 fc8 sc0 ls0">example()</div><div class="t m0 x5 hf y30d5 ff8 fs5 fce sc0 ls0 ws4">Traceback (most recent call last):</div><div class="t m0 x19 hf y30d6 ff8 fs5 fc0 sc0 ls0 ws13c">File <span class="fca ws13a">&quot;&lt;stdin&gt;&quot;</span><span class="ws13b">, line <span class="fc7 ws13a">3</span><span class="ws4">, in example</span></span></div><div class="t m0 x5 hf y30d7 ff8 fs5 fc2 sc0 ls0 ws13a">ValueError<span class="fc0 ws4">: invalid literal for int() with base 10: <span class="ff9 ls34">&apos;</span><span class="ws13a">N/A<span class="ff9">&apos;</span></span></span></div><div class="t m0 x0 h9 y345d ff1 fs3 fc0 sc0 ls0">上面的异常是下面的异常产生的直接原因：</div><div class="t m0 x5 hf y345e ff8 fs5 fc0 sc0 ls0 ws4">Traceback (most recent call last):</div><div class="t m0 x19 hf y345f ff8 fs5 fc0 sc0 ls0 ws4">File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</div><div class="t m0 x19 hf y3460 ff8 fs5 fc0 sc0 ls0 ws4">File &quot;&lt;stdin&gt;&quot;, line 5, in example</div><div class="t m0 x5 hf y3461 ff8 fs5 fc0 sc0 ls0 ws4">RuntimeError: A parsing error occurred</div><div class="t m0 x5 hf y3462 ff8 fs5 fc0 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h9 y3463 ff1 fs3 fc0 sc0 ls0 wsa0">在回溯中科院看到，两<span class="_ _6"></span>个异常都被捕获。要想捕获<span class="_ _6"></span>这样的异常，你可以使用<span class="_ _6"></span>一个简</div><div class="t m0 x5 h9 y3464 ff1 fs3 fc0 sc0 ls0 ws5fe">单的 <span class="ff6 wscc4">except </span><span class="ws12df">语句。不过，<span class="_ _c"></span>你还可以通过查看异常对象的 <span class="ff6 ws12e0">cause </span>属性来跟踪异常链。</span></div><div class="t m0 x5 h9 y3465 ff1 fs3 fc0 sc0 ls0">例如：</div><div class="t m0 x5 hf y3466 ff7 fs5 fca sc0 ls0 ws156">try<span class="ff8 fc0">:</span></div><div class="t m0 x15 hf y3467 ff8 fs5 fc0 sc0 ls0">example()</div><div class="t m0 x5 hf y3468 ff7 fs5 fca sc0 ls0 ws146">except <span class="ff8 ws3c7">RuntimeError </span><span class="ws157">as <span class="ff8 fc0">e:</span></span></div><div class="t m0 x15 hf y12f0 ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ws13a">(<span class="fc9 ws4">&quot;It didn<span class="ff9 ls34">&apos;</span><span class="ws13b">t work:&quot;<span class="fc0">, e)</span></span></span></span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">16.9.<span class="_ _36"> </span>14.9 <span class="ff1 ws98a">捕获异常后抛出另外的异常 </span>530</div><a class="l" href="https://docs.python.org/3/tutorial/errors.html"><div class="d m1" style="border-style:none;position:absolute;left:722.848500px;bottom:1055.292000px;width:41.377000px;height:16.821000px;background-color:rgba(255,255,255,0.000001);"></div></a><a class="l" href="https://docs.python.org/3/tutorial/errors.html"><div class="d m1" style="border-style:none;position:absolute;left:108.000000px;bottom:1033.624500px;width:199.209000px;height:16.821000px;background-color:rgba(255,255,255,0.000001);"></div></a></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

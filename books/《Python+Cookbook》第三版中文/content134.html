<div id="pf86" class="pf w0 h0" data-page-no="86"><div class="pc pc86 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg86.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x0 h9 y2a ff6 fs3 fc0 sc0 ls0 ws1e8">enumerate() <span class="ff1 ls35 ws144">对于跟踪某些值在列表中出现的位置是很有用的。所以，如果你想将</span></div><div class="t m0 x5 h9 y2b ff1 fs3 fc0 sc0 ls17 ws5c1">一个文件中出现的单词映射到它出现的行号上去，可<span class="_ _1"></span>以很容易的利用 <span class="ff6 ls0 ws1ec">enumerate() <span class="ff1">来</span></span></div><div class="t m0 x5 h9 y2c ff1 fs3 fc0 sc0 ls0">完成：</div><div class="t m0 x5 hf yec3 ff8 fs5 fc0 sc0 ls0 ws150">word_summary <span class="fc6 ls33">=</span><span class="ws13a">defaultdict(<span class="fca">list</span>)</span></div><div class="t m0 x5 hf yec4 ff7 fs5 fca sc0 ls0 ws15a">with <span class="ff8 ws13a">open<span class="fc0">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">myfile.txt<span class="ff9 ls34">&apos;</span></span><span class="ls32">,<span class="ff9 fc9 ls34">&apos;<span class="ff8">r</span>&apos;</span>)</span></span></span><span class="ws157">as <span class="ff8 fc0">f:</span></span></div><div class="t m0 x15 hf yec5 ff8 fs5 fc0 sc0 ls0 ws15f">lines <span class="fc6 ls33">=</span><span class="ws13a">f<span class="fc6 ls34">.</span>readlines()</span></div><div class="t m0 x5 hf yec6 ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws13b">idx, line </span><span class="ws157">in <span class="ff8 ws13a">enumerate<span class="fc0">(lines):</span></span></span></div><div class="t m0 x15 h11 yec7 ffa fs5 fcd sc0 ls0 ws4"># Create a list of words in current line</div><div class="t m0 x15 hf yec8 ff8 fs5 fc0 sc0 ls0 ws15f">words <span class="fc6 ls33">=</span><span class="ws13a">[w<span class="fc6 ls34">.</span>strip()<span class="fc6 ls34">.</span><span class="ws155">lower() <span class="ff7 fca ws38d">for </span><span class="ls33">w</span><span class="ff7 fca ws157">in </span></span>line<span class="fc6 ls34">.</span>split()]</span></div><div class="t m0 x15 hf yec9 ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws161">word </span><span class="ws160">in <span class="ff8 fc0">words:</span></span></div><div class="t m0 x16 hf yeca ff8 fs5 fc0 sc0 ls0 ws13a">word_summary[word]<span class="fc6 ls34">.</span>append(idx)</div><div class="t m0 x0 h7 yecb ff1 fs3 fc0 sc0 ls1e ws5c2">如果你处理完文件后打印 <span class="ff6 ls0 ws5c3">word summary </span><span class="ws5c4">，会发现它是一个字典 <span class="ff4 ls1b">(</span><span class="ws111">准确来讲是一个</span></span></div><div class="t m0 x5 h7 yecc ff6 fs3 fc0 sc0 ls0 ws5c5">defaultdict <span class="ff4 ls1b">)</span><span class="ff1 ws5c6">，对于每个单词有一个 </span><span class="ws5c7">key <span class="ff1 ws5c8">，每个 </span><span class="ws5c9">key <span class="ff1">对应的值是一个由这个单词出现</span></span></span></div><div class="t m0 x5 h9 y1b5 ff1 fs3 fc0 sc0 ls2c ws12f">的行号组成的列表。如果某个单词在一行中出现过两次，那么这个行号也<span class="_ _1"></span>会出现两次，</div><div class="t m0 x5 h9 yecd ff1 fs3 fc0 sc0 ls0">同时也可以作为文本的一个简单统计。</div><div class="t m0 x5 he yece ff2 fs2 fc4 sc0 ls0 ws212">6.10.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 yecf ff1 fs3 fc0 sc0 ls49 ws5ca">当你想额外定义一个计数变量的时候<span class="_ _1"></span>，使用 <span class="ff6 ls0 ws1ea">enumerate() </span><span class="ws1a6">函数会更加简单<span class="_ _1"></span>。你可<span class="_ _1"></span></span></div><div class="t m0 x5 h9 yed0 ff1 fs3 fc0 sc0 ls0">能会像下面这样写代码：</div><div class="t m0 x5 hf yed1 ff8 fs5 fc0 sc0 ls0 ws145">lineno <span class="fc6 ls33">=</span><span class="fc7">1</span></div><div class="t m0 x5 hf yed2 ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws13c">line </span><span class="ws157">in <span class="ff8 fc0">f:</span></span></div><div class="t m0 x15 h11 yed3 ffa fs5 fcd sc0 ls0 ws13b"># Process line</div><div class="t m0 x15 hf yed4 ff8 fs5 fc6 sc0 ls0 ws13a">...</div><div class="t m0 x15 hf yed5 ff8 fs5 fc0 sc0 ls0 ws145">lineno <span class="fc6 ws23d">+= <span class="fc7">1</span></span></div><div class="t m0 x0 h9 yed6 ff1 fs3 fc0 sc0 ls0 wsc">但是如果使用 <span class="ff6 ws133">enumerate() </span>函数来代替就显得更加优雅了：</div><div class="t m0 x5 hf yed7 ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws13b">lineno, line </span><span class="ws160">in <span class="ff8 ws13a">enumerate<span class="fc0">(f):</span></span></span></div><div class="t m0 x15 h11 yed8 ffa fs5 fcd sc0 ls0 ws13b"># Process line</div><div class="t m0 x15 hf yed9 ff8 fs5 fc6 sc0 ls0 ws13a">...</div><div class="t m0 x0 h9 yeda ff6 fs3 fc0 sc0 ls0 ws5cb">enumerate() <span class="ff1 lsf ws5cc">函数返回的是一个 </span><span class="ws5cd">enumerate <span class="ff1 lsf wsdb">对象实例<span class="_ _c"></span>，它是一个迭代器，返回连<span class="_ _c"></span></span></span></div><div class="t m0 x5 h9 yedb ff1 fs3 fc0 sc0 ls0 ws63">续的包含一个计数和一个值的元组，元组中的值通过在传入序列上调用 <span class="ff6 ws25d">next() </span>返回。</div><div class="t m0 x0 h9 yedc ff1 fs3 fc0 sc0 ls3a ws153">还有一点可能并不很重要，但是也值得注意，有时候当你在一个已经解压后的元组</div><div class="t m0 x5 h9 yedd ff1 fs3 fc0 sc0 ls0 ws38">序列上使用 <span class="ff6 ws133">enumerate() </span>函数时很容易调入陷阱。你得像下面正确的方式这样写：</div><div class="t m0 x5 hf yede ff8 fs5 fc0 sc0 ls0 ws13c">data <span class="fc6 ls32">=</span><span class="ws4">[ (<span class="fc7 ls34">1</span><span class="ls32">,<span class="fc7 ls34">2</span></span>), (<span class="fc7 ls34">3</span><span class="ls32">,<span class="fc7 ls34">4</span></span>), (<span class="fc7 ls34">5</span><span class="ls32">,<span class="fc7 ls34">6</span></span><span class="ws13b">), (<span class="fc7 ws13a">7</span><span class="ls33">,<span class="fc7 ls34">8</span></span>) ]</span></span></div><div class="t m0 x5 h11 y923 ffa fs5 fcd sc0 ls0 ws4"># Correct!</div><div class="t m0 x5 hf y924 ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws13b">n, (x, y) </span><span class="ws157">in <span class="ff8 ws13a">enumerate<span class="fc0">(data):</span></span></span></div><div class="t m0 x15 hf y925 ff8 fs5 fc6 sc0 ls0 ws13a">...</div><div class="t m0 x5 h11 yedf ffa fs5 fcd sc0 ls0 ws4"># Error!</div><div class="t m0 x5 hf y926 ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws13b">n, x, y </span><span class="ws157">in <span class="ff8 ws13a">enumerate<span class="fc0">(data):</span></span></span></div><div class="t m0 x15 hf yee0 ff8 fs5 fc6 sc0 ls0 ws13a">...</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws21d">6.10.<span class="_ _5"> </span>4.10 <span class="ff1 ws533">序列上索引值迭代 </span>125</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

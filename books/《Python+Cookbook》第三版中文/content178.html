<div id="pfb2" class="pf w0 h0" data-page-no="b2"><div class="pc pcb2 w0 h0"><img class="bi x13 y5 w2 hb" alt="" src="bgb2.png"/><div class="t m0 xe h8 y76 ff2 fs3 fc0 sc0 ls0">CHAPTER</div><div class="t m0 x2a hc y77 ff2 fs4 fc0 sc0 ls0">EIGHT</div><div class="t m0 x14 hd y78 ff1 fs4 fc0 sc0 ls0">第六章：数据编码和处理</div><div class="t m0 x0 h7 y79 ff1 fs3 fc0 sc0 ls129 ws75e">这一章主要讨论使用 <span class="ff4 ls0 ws75f">Python </span><span class="ws760">处理各种不同方式编码的数据<span class="_ _8"></span>，比如 <span class="ff4 ls0 ws761">CSV <span class="ff1 wsa0">文<span class="_ _12"></span>件，</span></span></span></div><div class="t m0 x5 h7 ycf ff4 fs3 fc0 sc0 ls0 wsa5">JSON<span class="ff1 ls12a">，</span><span class="ws762">XML <span class="ff1 ls2d ws132">和二进制包装记录<span class="_ _1"></span>。和数据结构那一章不同的是，这章不会讨论特<span class="_ _1"></span>殊的</span></span></div><div class="t m0 x5 h9 yd0 ff1 fs3 fc0 sc0 ls0">算法问题，而是关注于怎样获取和存储这些格式的数据。</div><div class="t m0 x0 h7 y9fe ff4 fs3 fc0 sc0 ls0 wsa5">Con<span class="_ _1"></span>ten<span class="_ _1"></span>ts:</div><div class="t m0 x5 hd y134d ff2 fs4 fc4 sc0 ls0 ws134">8.1<span class="_ _e"> </span>6.1 <span class="ff1 ws763">读写 </span><span class="ws764">CSV <span class="ff1">数据</span></span></div><div class="t m0 x5 he y134e ff2 fs2 fc4 sc0 ls0 ws135">8.1.1 <span class="ff1">问题</span></div><div class="t m0 x0 h7 y134f ff1 fs3 fc0 sc0 ls0 wsc">你想读写一个 <span class="ff4 ws5d">CSV </span>格式的文件。</div><div class="t m0 x5 he y1350 ff2 fs2 fc4 sc0 ls0 ws135">8.1.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h7 y1351 ff1 fs3 fc0 sc0 ls0 ws765">对于大<span class="_ _6"></span>多数的 <span class="ff4 ws766">CSV </span><span class="ls2c ws767">格式的数据读写问题，都可以使用 </span><span class="ff6 ws768">csv </span><span class="wsa0">库。例如：<span class="_ _6"></span>假设你在<span class="_ _6"></span>一</span></div><div class="t m0 x5 h7 y1352 ff1 fs3 fc0 sc0 ls0 ws38">个名叫 <span class="ff4 ws769">sto<span class="_ _6"></span>c<span class="_ _1"></span>ks.csv <span class="ff1">文件中有一些股票市场数据，就像这样：</span></span></div><div class="t m0 x5 hf y1353 ff8 fs5 fc0 sc0 ls0">Symbol,Price,Date,Time,Change,Volume</div><div class="t m0 x5 hf y1354 ff8 fs5 fc9 sc0 ls0 ws13a">&quot;AA&quot;<span class="fc0 ls34">,</span><span class="fc7">39.48<span class="fc0 ls34">,</span></span>&quot;6/11/2007&quot;<span class="fc0 ls34">,</span>&quot;9:36am&quot;<span class="fc0">,<span class="fc6 ls34">-</span><span class="fc7">0.18</span><span class="ls34">,</span><span class="fc7">181800</span></span></div><div class="t m0 x5 hf y1355 ff8 fs5 fc9 sc0 ls0 ws13a">&quot;AIG&quot;<span class="fc0">,<span class="fc7">71.38</span><span class="ls34">,</span></span>&quot;6/11/2007&quot;<span class="fc0">,</span>&quot;9:36am&quot;<span class="fc0 ls34">,<span class="fc6">-</span></span><span class="fc7">0.15<span class="fc0">,</span>195500</span></div><div class="t m0 x5 hf y1356 ff8 fs5 fc9 sc0 ls0 ws13a">&quot;AXP&quot;<span class="fc0">,<span class="fc7">62.58</span><span class="ls34">,</span></span>&quot;6/11/2007&quot;<span class="fc0">,</span>&quot;9:36am&quot;<span class="fc0 ls34">,<span class="fc6">-</span></span><span class="fc7">0.46<span class="fc0">,</span>935000</span></div><div class="t m0 x5 hf y1357 ff8 fs5 fc9 sc0 ls0 ws13a">&quot;BA&quot;<span class="fc0 ls34">,</span><span class="fc7">98.31<span class="fc0 ls34">,</span></span>&quot;6/11/2007&quot;<span class="fc0 ls34">,</span>&quot;9:36am&quot;<span class="fc0">,<span class="fc6 ls34">+</span><span class="fc7">0.12</span><span class="ls34">,</span><span class="fc7">104800</span></span></div><div class="t m0 x5 hf yfa6 ff8 fs5 fc9 sc0 ls34 ws76a">&quot;C&quot;<span class="fc0">,<span class="fc7 ls0 ws13a">53.08<span class="fc0">,<span class="fc9">&quot;6/11/2007&quot;</span></span></span>,</span><span class="ls0 ws13a">&quot;9:36am&quot;</span><span class="fc0">,<span class="fc6 ls0 ws13a">-<span class="fc7">0.25</span></span>,<span class="fc7 ls0">360900</span></span></div><div class="t m0 x5 hf yfa7 ff8 fs5 fc9 sc0 ls0 ws13a">&quot;CAT&quot;<span class="fc0">,<span class="fc7">78.29</span><span class="ls34">,</span></span>&quot;6/11/2007&quot;<span class="fc0">,</span>&quot;9:36am&quot;<span class="fc0 ls34">,<span class="fc6">-</span></span><span class="fc7">0.23<span class="fc0">,</span>225400</span></div><div class="t m0 x0 h9 y1358 ff1 fs3 fc0 sc0 ls0">下面向你展示如何将这些数据读取为一个元组的序列：</div><div class="t m0 x5 h10 y1359 ff7 fs5 fca sc0 ls0 ws146">import <span class="fcc">csv</span></div><div class="t m0 x5 hf y135a ff7 fs5 fca sc0 ls0 ws15a">with <span class="ff8 ws13a">open<span class="fc0">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">stocks.csv<span class="ff9 ls34">&apos;</span></span><span class="ls32">)</span></span></span><span class="ws160">as <span class="ff8 fc0">f:</span></span></div><div class="t m0 x15 hf y135b ff8 fs5 fc0 sc0 ls0 ws15f">f_csv <span class="fc6 ls33">=</span><span class="ws13a">csv<span class="fc6 ls34">.</span>reader(f)</span></div><div class="t m0 x15 hf y135c ff8 fs5 fc0 sc0 ls0 ws155">headers <span class="fc6 ls32">=</span><span class="fca ws13a">next</span>(f_csv)</div><div class="t m0 x15 hf y135d ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws158">row </span><span class="ws157">in <span class="ff8 fc0">f_csv:</span></span></div><div class="t m0 x16 h11 y135e ffa fs5 fcd sc0 ls0 ws13b"># Process row</div><div class="t m0 x16 hf y135f ff8 fs5 fc6 sc0 ls0 ws13a">...</div><div class="t m0 x26 h8 y29 ff2 fs3 fc0 sc0 ls0">169</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

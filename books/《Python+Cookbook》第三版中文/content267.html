<div id="pf10b" class="pf w0 h0" data-page-no="10b"><div class="pc pc10b w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bg10b.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x16 h11 y1e8 ffa fs5 fcd sc0 ls0 ws4"># Set all of the positional arguments</div><div class="t m0 x16 hf y1e9 ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws13b">name, value </span><span class="ws160">in <span class="ff8 ws13a">zip<span class="fc0 ls34">(</span>self<span class="fc6 ls34">.</span><span class="fc0 ws4">_fields, args):</span></span></span></div><div class="t m0 x17 hf y1ea ff8 fs5 fca sc0 ls0 ws13a">setattr<span class="fc0 ls34">(</span>self<span class="fc0 ws4">, name, value)</span></div><div class="t m0 x16 h11 y1eb ffa fs5 fcd sc0 ls0 ws4"># Set the remaining keyword arguments</div><div class="t m0 x16 hf y1ec ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws161">name </span><span class="ws160">in <span class="ff8 ws13a">self<span class="fc6 ls34">.</span><span class="fc0">_fields[</span>len<span class="fc0">(args):]:</span></span></span></div><div class="t m0 x17 hf y904 ff8 fs5 fca sc0 ls0 ws13a">setattr<span class="fc0 ls34">(</span>self<span class="fc0 ws4">, name, kwargs</span><span class="fc6">.<span class="fc0">pop(name))</span></span></div><div class="t m0 x16 h11 y906 ffa fs5 fcd sc0 ls0 ws4"># Check for any remaining unknown arguments</div><div class="t m0 x16 hf y907 ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 fc0">kwargs:</span></div><div class="t m0 x17 hf y908 ff7 fs5 fca sc0 ls0 ws16a">raise <span class="ff8 ws13a">TypeError<span class="fc0">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Invalid argument(s): {}<span class="ff9 ls34">&apos;</span></span><span class="fc6">.</span>format(<span class="ff9 fc9 ls34">&apos;<span class="ff8">,</span>&apos;</span><span class="fc6">.</span>join(kwargs)))</span></span></div><div class="t m0 x5 h11 y909 ffa fs5 fcd sc0 ls0 ws4"># Example use</div><div class="t m0 x5 hf ybd8 ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 fc0 ws16d">__name__ <span class="fc6 ws159">== <span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws13a">__main__<span class="ff9 ls34">&apos;</span></span></span>:</span></div><div class="t m0 x15 hf ybd9 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">Stock<span class="ff8 fc0">(Structure2):</span></span></div><div class="t m0 x16 hf y90a ff8 fs5 fc0 sc0 ls0 ws155">_fields <span class="fc6 ls32">=</span><span class="ls34">[<span class="ff9 fc9">&apos;</span></span><span class="fc9 ws13a">name<span class="ff9 ls34">&apos;</span></span><span class="ls33">,</span><span class="ff9 fc9 ws13b">&apos;<span class="ff8 ws13a">shares</span>&apos;</span><span class="ls33">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9 ws13a">price<span class="ff9 ls34">&apos;</span></span>]</div><div class="t m0 x15 hf y90b ff8 fs5 fc0 sc0 ls0 ws159">s1 <span class="fc6 ls33">=</span><span class="ws13a">Stock(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">ACME<span class="ff9 ws13b">&apos;</span></span><span class="ls33">,</span><span class="fc7">50</span><span class="ls33">,</span><span class="fc7">91.1</span>)</span></div><div class="t m0 x15 hf y90c ff8 fs5 fc0 sc0 ls0 ws159">s2 <span class="fc6 ls33">=</span><span class="ws13a">Stock(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">ACME<span class="ff9 ws13b">&apos;</span></span><span class="ls33">,</span><span class="fc7">50</span><span class="ws4">, price<span class="fc6 ls34">=</span></span><span class="fc7">91.1</span>)</span></div><div class="t m0 x15 hf y90d ff8 fs5 fc0 sc0 ls0 ws159">s3 <span class="fc6 ls33">=</span><span class="ws13a">Stock(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">ACME<span class="ff9 ws13b">&apos;</span></span><span class="ws4">, shares<span class="fc6 ls34">=</span></span><span class="fc7">50</span><span class="ws4">, price<span class="fc6 ls34">=</span></span><span class="fc7">91.1</span>)</span></div><div class="t m0 x15 h11 y90e ffa fs5 fcd sc0 ls0 ws4"># s3 = Stock(<span class="ffb ls34">&apos;</span><span class="ws13a">ACME<span class="ffb ls34">&apos;</span></span>, shares=50, price=91.1, aa=1)</div><div class="t m0 x0 h9 y1cdf ff1 fs3 fc0 sc0 ls0 wsaf5">你还能将不在 <span class="ff6 ws25d">fields </span>中的名称加入到属性中去：</div><div class="t m0 x5 hf y1ce0 ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">Structure3<span class="ff8 fc0">:</span></span></div><div class="t m0 x15 h11 y16bd ffa fs5 fcd sc0 ls0 ws4"># Class variable that specifies expected fields</div><div class="t m0 x15 hf y1ce1 ff8 fs5 fc0 sc0 ls0 ws155">_fields <span class="fc6 ls32">=</span>[]</div><div class="t m0 x15 hf y1ce2 ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">__init__<span class="fc0">(<span class="fca">self</span><span class="ls33">,</span><span class="fc6">*</span><span class="ws458">args, </span><span class="fc6">**</span>kwargs):</span></span></div><div class="t m0 x16 hf y1ce3 ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 ws13a">len<span class="fc0 ws145">(args) <span class="fc6 ws159">!= </span></span>len<span class="fc0">(</span>self<span class="fc6 ls34">.</span><span class="fc0">_fields):</span></span></div><div class="t m0 x17 hf y1ce4 ff7 fs5 fca sc0 ls0 ws16a">raise <span class="ff8 ws13a">TypeError<span class="fc0">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Expected {} arguments<span class="ff9 ls34">&apos;<span class="ff8 fc6">.</span></span></span>format(</span>len<span class="fc0 ls34">(</span>self<span class="fc6">.<span class="fc0">_fields)))</span></span></span></div><div class="t m0 x16 h11 y1ce5 ffa fs5 fcd sc0 ls0 ws4"># Set the arguments</div><div class="t m0 x16 hf y1ce6 ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws13b">name, value </span><span class="ws160">in <span class="ff8 ws13a">zip<span class="fc0 ls34">(</span>self<span class="fc6 ls34">.</span><span class="fc0 ws4">_fields, args):</span></span></span></div><div class="t m0 x17 hf y1ce7 ff8 fs5 fca sc0 ls0 ws13a">setattr<span class="fc0 ls34">(</span>self<span class="fc0 ws4">, name, value)</span></div><div class="t m0 x16 h11 y1ce8 ffa fs5 fcd sc0 ls0 ws4"># Set the additional arguments (if any)</div><div class="t m0 x16 hf y1ce9 ff8 fs5 fc0 sc0 ls0 ws2a3">extra_args <span class="fc6 ls32">=</span><span class="ws13a">kwargs<span class="fc6">.</span><span class="ws145">keys() <span class="fc6 ls33">-</span></span><span class="fca">self<span class="fc6 ls34">.</span></span>_fields</span></div><div class="t m0 x16 hf y1cea ff7 fs5 fca sc0 ls0 ws139">for <span class="ff8 fc0 ws161">name </span><span class="ws160">in <span class="ff8 fc0">extra_args:</span></span></div><div class="t m0 x17 hf y1ceb ff8 fs5 fca sc0 ls0 ws13a">setattr<span class="fc0 ls34">(</span>self<span class="fc0 ws4">, name, kwargs</span><span class="fc6">.<span class="fc0">pop(name))</span></span></div><div class="t m0 x16 hf y1cec ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 fc0">kwargs:</span></div><div class="t m0 x17 hf y1ced ff7 fs5 fca sc0 ls0 ws16a">raise <span class="ff8 ws13a">TypeError<span class="fc0">(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws4">Duplicate values for {}<span class="ff9 ls34">&apos;</span></span><span class="fc6">.</span>format(<span class="ff9 fc9 ls34">&apos;<span class="ff8">,</span>&apos;</span><span class="fc6">.</span>join(kwargs)))</span></span></div><div class="t m0 x5 h11 y10b ffa fs5 fcd sc0 ls0 ws4"># Example use</div><div class="t m0 x5 hf y10c ff7 fs5 fca sc0 ls0 ws157">if <span class="ff8 fc0 ws16d">__name__ <span class="fc6 ws159">== <span class="ff9 fc9 ls34">&apos;</span><span class="fc9 ws13a">__main__<span class="ff9 ls34">&apos;</span></span></span>:</span></div><div class="t m0 x15 hf y10d ff7 fs5 fca sc0 ls0 ws16a">class <span class="fcc ws156">Stock<span class="ff8 fc0">(Structure3):</span></span></div><div class="t m0 x16 hf y10e ff8 fs5 fc0 sc0 ls0 ws155">_fields <span class="fc6 ls32">=</span><span class="ls34">[<span class="ff9 fc9">&apos;</span></span><span class="fc9 ws13a">name<span class="ff9 ls34">&apos;</span></span><span class="ls33">,</span><span class="ff9 fc9 ws13b">&apos;<span class="ff8 ws13a">shares</span>&apos;</span><span class="ls33">,<span class="ff9 fc9 ls34">&apos;</span></span><span class="fc9 ws13a">price<span class="ff9 ls34">&apos;</span></span>]</div><div class="t m0 x15 hf y110 ff8 fs5 fc0 sc0 ls0 ws159">s1 <span class="fc6 ls33">=</span><span class="ws13a">Stock(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">ACME<span class="ff9 ws13b">&apos;</span></span><span class="ls33">,</span><span class="fc7">50</span><span class="ls33">,</span><span class="fc7">91.1</span>)</span></div><div class="t m0 x15 hf y1cee ff8 fs5 fc0 sc0 ls0 ws159">s2 <span class="fc6 ls33">=</span><span class="ws13a">Stock(<span class="ff9 fc9 ls34">&apos;</span><span class="fc9">ACME<span class="ff9 ws13b">&apos;</span></span><span class="ls33">,</span><span class="fc7">50</span><span class="ls33">,</span><span class="fc7">91.1</span><span class="ws13b">, date<span class="fc6 ls34">=</span><span class="ff9 fc9">&apos;</span></span><span class="fc9">8/2/2012<span class="ff9 ls34">&apos;</span></span>)</span></div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 wsae0">10.11.<span class="_ _5"> </span>8.11 <span class="ff1 wsaf4">简化数据结构的初始化 </span>258</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>

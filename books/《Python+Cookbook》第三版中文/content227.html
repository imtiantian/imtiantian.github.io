<div id="pfe3" class="pf w0 h0" data-page-no="e3"><div class="pc pce3 w0 h0"><img class="bi x13 y5 w2 ha" alt="" src="bge3.png"/><div class="t m0 xd h9 y75 ff1 fs3 fc0 sc0 lsb">《<span class="ff2 ls0 wsce">Python Co<span class="_ _6"></span>okb<span class="_ _6"></span>o<span class="_ _6"></span>ok</span><span class="ls0 wsa0">》第三版<span class="ff2 wsce">, Release 2.0.0</span></span></div><div class="t m0 x5 hd y112 ff2 fs4 fc4 sc0 ls0 ws134">9.8<span class="_ _e"> </span>7.8 <span class="ff1">减少可调用对象的参数个数</span></div><div class="t m0 x5 he y113 ff2 fs2 fc4 sc0 ls0 ws135">9.8.1 <span class="ff1">问题</span></div><div class="t m0 x0 h7 y114 ff1 fs3 fc0 sc0 ls0 ws94f">你有<span class="_ _6"></span>一<span class="_ _6"></span>个被<span class="_ _6"></span>其<span class="_ _6"></span>他 <span class="ff4 ws950">p<span class="_ _1"></span>ython <span class="ff1 ws951">代<span class="_ _6"></span>码使<span class="_ _6"></span>用<span class="_ _6"></span>的 </span><span class="ws952">callable <span class="ff1 ls30 ws138">对象，可能<span class="_ _1"></span>是一个回调函数或者是一</span></span></span></div><div class="t m0 x5 h9 y115 ff1 fs3 fc0 sc0 ls0">个处理器，但是它的参数太多了，导致调用时出错。</div><div class="t m0 x5 he y116 ff2 fs2 fc4 sc0 ls0 ws135">9.8.2 <span class="ff1">解决方案</span></div><div class="t m0 x0 h9 y18bb ff1 fs3 fc0 sc0 ls157 ws953">如果需要减少某个函数的参数个数<span class="_ _1f"></span>，你可以使用 <span class="ff6 ls0 ws954">functools.partial() <span class="ff1">。</span></span></div><div class="t m0 x5 h9 y18bc ff6 fs3 fc0 sc0 ls0 ws955">partial() <span class="ff1 ls117 ws956">函数允许你给一个或多个参数设置固定的值<span class="_ _d"></span>，减少接下来被调用时的参<span class="_ _c"></span></span></div><div class="t m0 x5 h9 y18bd ff1 fs3 fc0 sc0 ls0">数个数。为了演示清楚，假设你有下面这样的函数：</div><div class="t m0 x5 hf y18be ff7 fs5 fca sc0 ls0 ws139">def <span class="ff8 fcb ws13a">spam<span class="fc0 ws4">(a, b, c, d):</span></span></div><div class="t m0 x15 hf y18bf ff7 fs5 fca sc0 ls0 ws156">print<span class="ff8 fc0 ws4">(a, b, c, d)</span></div><div class="t m0 x0 h9 y18c0 ff1 fs3 fc0 sc0 ls0 wsc">现在我们使用 <span class="ff6 ws1d1">partial() </span>函数来固定某些参数值：</div><div class="t m0 x5 hf y18c1 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="fca ws15a">from <span class="fcc ws285">functools </span><span class="ws146">import <span class="ff8 fc0">partial</span></span></span></div><div class="t m0 x5 hf y18c2 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws159">s1 <span class="fc6 ls33">=</span><span class="ws147">partial(spam, <span class="fc7 ws13a">1</span><span class="ls33">)</span><span class="ffa fcd ws4"># a = 1</span></span></span></div><div class="t m0 x5 hf y18c3 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">s1(<span class="fc7 ls34">2</span><span class="ls32">,<span class="fc7 ls34">3</span>,<span class="fc7 ls34">4</span></span>)</span></div><div class="t m0 x5 hf y18c4 ff8 fs5 fc8 sc0 ls5e ws209">1234<span class="_ _15"></span></div><div class="t m0 x5 hf y18c5 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">s1(<span class="fc7 ls34">4</span><span class="ls32">,<span class="fc7 ls34">5</span>,<span class="fc7 ls34">6</span></span>)</span></div><div class="t m0 x5 hf y18c6 ff8 fs5 fc8 sc0 ls5e ws209">1456<span class="_ _15"></span></div><div class="t m0 x5 hf y18c7 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws159">s2 <span class="fc6 ls33">=</span><span class="ws13b">partial(spam, d<span class="fc6 ls34">=</span><span class="fc7 ws13a">42</span><span class="ls32">)<span class="ffa fcd ls5e ws209">#d=4<span class="_ _15"></span>2<span class="_ _15"></span></span></span></span></span></div><div class="t m0 x5 hf y18c8 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">s2(<span class="fc7 ls34">1</span><span class="ls32">,<span class="fc7 ls34">2</span>,<span class="fc7 ls34">3</span></span>)</span></div><div class="t m0 x5 hf y18c9 ff8 fs5 fc8 sc0 ls5e ws209">1234<span class="_ _15"></span>2<span class="_ _15"></span></div><div class="t m0 x5 hf y18ca ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">s2(<span class="fc7 ls34">4</span><span class="ls32">,<span class="fc7 ls34">5</span>,<span class="fc7 ls34">5</span></span>)</span></div><div class="t m0 x5 hf y18cb ff8 fs5 fc8 sc0 ls5e ws209">4554<span class="_ _15"></span>2<span class="_ _15"></span></div><div class="t m0 x5 hf y18cc ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws159">s3 <span class="fc6 ls33">=</span><span class="ws147">partial(spam, <span class="fc7 ws13a">1</span><span class="ls33">,<span class="fc7 ls34">2</span></span><span class="ws13b">, d<span class="fc6 ls34">=</span><span class="fc7 ws13a">42</span><span class="ls32">)<span class="ffa fcd ls5e ws209">#a=1<span class="_ _15"></span>,b=2<span class="_ _15"></span>,d=4<span class="_ _15"></span>2<span class="_ _15"></span></span></span></span></span></span></div><div class="t m0 x5 hf y18cd ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">s3(<span class="fc7 ls34">3</span>)</span></div><div class="t m0 x5 hf y18ce ff8 fs5 fc8 sc0 ls5e ws209">1234<span class="_ _15"></span>2<span class="_ _15"></span></div><div class="t m0 x5 hf y18cf ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">s3(<span class="fc7 ls34">4</span>)</span></div><div class="t m0 x5 hf y18d0 ff8 fs5 fc8 sc0 ls5e ws209">1244<span class="_ _15"></span>2<span class="_ _15"></span></div><div class="t m0 x5 hf y18d1 ff7 fs5 fc5 sc0 ls0 ws139">&gt;&gt;&gt; <span class="ff8 fc0 ws13a">s3(<span class="fc7 ls34">5</span>)</span></div><div class="t m0 x5 hf y18d2 ff8 fs5 fc8 sc0 ls5e ws209">1254<span class="_ _15"></span>2<span class="_ _15"></span></div><div class="t m0 x5 hf y18d3 ff8 fs5 fc8 sc0 ls0">&gt;&gt;&gt;</div><div class="t m0 x0 h7 y18d4 ff1 fs3 fc0 sc0 ls0 ws957">可以看出 <span class="ff6 ws958">partial() </span><span class="ws959">固定某些参数并返回一个新的 <span class="ff4 ws95a">callable </span><span class="ws95b">对象。<span class="_ _8"></span>这个新的 <span class="ff4">callable</span></span></span></div><div class="t m0 x5 h9 y18d5 ff1 fs3 fc0 sc0 ls13 wse5">接受未赋值的参数<span class="_ _1"></span>，然后跟之前已经赋值过的参数合并起来，最后将所有参数传递给<span class="_ _c"></span></div><div class="t m0 x5 h9 y18d6 ff1 fs3 fc0 sc0 ls0">原始函数。</div><div class="t m0 x5 he y18d7 ff2 fs2 fc4 sc0 ls0 ws135">9.8.3 <span class="ff1">讨论</span></div><div class="t m0 x0 h9 y18d8 ff1 fs3 fc0 sc0 ls3a ws153">本节要解决的问题是让原本不兼容的代码可以一起工作。下面我会列举一系列的例</div><div class="t m0 x5 h9 y18d9 ff1 fs3 fc0 sc0 ls0">子。</div><div class="t m0 x5 h9 y29 ff2 fs3 fc0 sc0 ls0 ws13e">9.8.<span class="_ _5"> </span>7.8 <span class="ff1 ws599">减少可调用对象的参数个数 </span>218</div></div><div class="pi" data-data='{"ctm":[1.500000,0.000000,0.000000,1.500000,0.000000,0.000000]}'></div></div>
